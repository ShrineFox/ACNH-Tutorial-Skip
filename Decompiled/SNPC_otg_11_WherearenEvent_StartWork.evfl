flow Return_FirstVisitCustomer(Salary: int = 2000):
    run SNPC_otg_01_WherearenOffice::HouseCompleteActingrun SNPC_otg_01_WherearenOffice::HouseCompleteActing()
    # Welcome back! I saw the photo you just took. It's already been uploaded to the Happy Home Network app! It gave me a good sense for what you think is …
    MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_04_WherearenEvent:051', false)
    if EventFlowSystemActor.GeneralTalkChoice2() == 0:
        # That's great to hear!
        MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_04_WherearenEvent:052', false)
    else:
        # Y-you don't "think" so? Oh dear. Perhaps I should have sent a gift basket along with you… But if you have nothing to report, then I suppose that's go…
        MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_04_WherearenEvent:053', false)
    # Still, from now on, it might be a good idea to add occasional client visits into your routine. Happy customers are repeat customers, after all!
    MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_04_WherearenEvent:054', true)
    SubNpc.TurnNeck(10, false)
    fork:
        branch:
            # I'm always down at the pier, so hit me up when you need a boat ride! Just say, "I want to visit a home."
            SubNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_04_WherearenEvent:055', true)
        branch:
            EventFlowSystemActor.WaitFrame(20)
            Player.TurnNeck(1, false)
    MainNpc.TurnNeck(1, false)
    # Thank you, Niko! You're always so reliable. I don't know what we'd do without you.
    MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_04_WherearenEvent:056', false)
    MainNpc.TurnNeck(10, false)
    EventFlowSystemActor.SetTagFromSystem('cFlow', 'cMoney', 0, Salary, '')
    EventFlowSystemActor.UIPokiAppear()
    fork:
        branch:
            # Oh! I should pay you for this job, shouldn't I? Based on your services this time, you've earned <90:44:0000>!
            MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_04_WherearenEvent:057', true)
        branch:
            EventFlowSystemActor.WaitFrame(15)
            Player.TurnNeck(0, false)
    run Demo_Common_Wherearen::SetSalaryAsDeliveryItemrun Demo_Common_Wherearen::SetSalaryAsDeliveryItem()
    MainNpc.NpcDelivery(1, 'Default')
    EventFlowSystemActor.PokiCountDown(Salary, false)
    EventFlowSystemActor.UIPokiDisappear()
    # Thanks for taking such a wonderful photo! I appreciate your help.
    MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_04_WherearenEvent:058', true)
    System.EventFlags['cWherearenPlayer:SeqFirstVistCustomerOngoing'] = false
    System.EventFlags['cWherearenPlayer:Prohibit_NewOrder'] = false
    System.EventFlags['cWherearenPlayer:Unlock_MncBridgeBoat'] = true
    System.EventFlags['cPlayer:WHEREAREN_Unlock_ResortPlannerAppRevisit'] = true
    run Demo_Common_Wherearen::Demo_SetNormalPositionInOfficerun Demo_Common_Wherearen::Demo_SetNormalPositionInOffice()
    run SNPC_otg_01_WherearenOffice::CheckWorkContinue_Subrun SNPC_otg_01_WherearenOffice::CheckWorkContinue_Sub()
 
flow Return_FirstVisitCustomer_Init():
    MainNpc.NpcAITalkCastSetting('WherearenPrologue')
 
flow Root_FirstVisitCustomer():
    EventFlowSystemActor.WherearenSetFirstCustomerInfo(0)
    EventFlowSystemActor.WherearenResetVisitInfo()
    if System.EventFlags['cWherearenPlayer:SeqFirstVistCustomerOngoing']:
        # I'm sure you remember, but I need you to go take photos we can use in the Happy Home Network app. Once you're ready, talk to Niko and head to <115:9:…
        MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_04_WherearenEvent:043', true)
    else:
        # Since you took such a good photo for our design portfolio on that last job, I'd like you to take another one! Would you mind going back to <115:9:cd0…
        MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_04_WherearenEvent:041', false)
        # While you're there, please ask if any problems with the home have come up and how we can fix them if so. We want to keep our clients happy so they'll…
        MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_04_WherearenEvent:042', true)
        System.EventFlags['cWherearenPlayer:SeqFirstVistCustomerOngoing'] = true
        System.EventFlags['cWherearenPlayer:Prohibit_NewOrder'] = true
 
flow Root_TakeOder():
    if System.EventFlags['cWherearenPlayer:SeqOtgTalkTakeOrderTutorial']:
        # I want you to chat with the vacationers here on the island and offer our services to them! Just let yourself go with the flow! Don't overthink it, an…
        MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_04_WherearenEvent:003', true)
        if not System.EventFlags['cWherearenPlayer:SeqTakeOrderTutorialDone']:
            run Sub_Event44()
    else:
        # Alright, you look like you're ready to go! Now, let's see… I think you've got a handle on how vacation-home design works. Your next lesson is sales! …
        MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_04_WherearenEvent:001', false)
        # And so! I want you to chat with the vacationers on the island and offer our services to them! You'll do great! It's not that hard. Folks will buy any…
        MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_04_WherearenEvent:002', true)
        System.EventFlags['cWherearenPlayer:SeqTakeOrderTutorialOngoing'] = true
        System.EventFlags['cWherearenPlayer:SeqOtgTalkTakeOrderTutorial'] = true
        run Sub_Event44()
 
local flow Sub_Event44():
    EventFlowSystemActor.BGMPropertyControl(160)
    System.EventFlags['cPlayerTemp:WHEREAREN_MncTalkReserve_Bridge'] = true
 
flow Talk_TakeOder():
    # You'll find vacationers outside. Go up to them and promote our business! They're interested in resort living already. I'm sure you'll get them intere…
    MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_04_WherearenEvent:011', true)
 
flow Talk__FirstVisitCustomer():
    EventFlowSystemActor.WherearenSetFirstCustomerInfo(0)
    EventFlowSystemActor.WherearenResetVisitInfo()
    # You should be able to find Niko down at the pier. Ask him to take you to <115:9:cd00>'s place by boat.
    MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_04_WherearenEvent:044', true)
 
