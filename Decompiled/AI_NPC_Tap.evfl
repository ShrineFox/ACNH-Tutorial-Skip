flow Init():
    MainNpc.NpcAISettingMainNpc.NpcAISetting(8, true)
    MainNpc.NpcRegistAIBlackBoardMainNpc.NpcRegistAIBlackBoard('SpeakTypeBed', 1)
    MainNpc.NpcAISetRequestSpeakFuncMainNpc.NpcAISetRequestSpeakFunc('cDreamBedInPlaza', false)
    if EventFlowSystemActor.SystemCheckNowStageEventFlowSystemActor.SystemCheckNowStage('cIdrDream'):
        if System.EventFlags['cLandTemp:TapIndoorPos']:
            MainNpc.NpcAISetPosByRailMainNpc.NpcAISetPosByRail(0, 1, true, 60.0)
        else:
            MainNpc.NpcAISetPosByRailMainNpc.NpcAISetPosByRail(0, 0, true, 90.0)
 
flow Root():
    if EventFlowSystemActor.SystemCheckNowStageEventFlowSystemActor.SystemCheckNowStage('cIdrDream'):
        MainNpc.NpcAISettingMainNpc.NpcAISetting(4, false)
        run AI_NPC_Common::ContinueSpeakrun AI_NPC_Common::ContinueSpeak(FlowName='SNPC_tap', EntryName='Root')
    elif System.EventFlags['cLandTemp:TapDreamFirstTalkDone']:
        MainNpc.NpcChangeTurnDefaultStateMainNpc.NpcChangeTurnDefaultState('cTurn', '', 'SNPC_tap_02_InDreaming', 'InDreamTalk', false, true, true, 1, 0.0, '')
    else:
        MainNpc.NpcAISettingMainNpc.NpcAISetting(4, false)
        run AI_NPC_Common::ContinueSpeakrun AI_NPC_Common::ContinueSpeak(EntryName='Root', FlowName='SNPC_tap_02_InDreaming')
 
