flow AmiiboDeviceCamera():
    MainNpc.NpcAISetting(4, false)
    EventFlowSystemActor.CameraSetDemoParam('AmiiboDevice', 'cDefault', 'CameraTag:AmiiboDevice', false, false, false, 0)
 
flow AmiiboDeviceCamera_Direct():
    MainNpc.NpcAISetting(4, false)
    EventFlowSystemActor.CameraSetDemoParam('AmiiboDevice_Direct', 'cDefault', 'CameraTag:AmiiboDevice', false, false, false, 0)
 
flow Root():
    # Can we chat before you head out? I want to show you something.
    MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_04_WherearenEvent:281', false)
    EventFlowSystemActor.SetLookAtTargetObject('cWherearenAmiiboDevice')
    MainNpc.TurnNeck(13, false)
    run AmiiboDeviceCamera()
    EventFlowSystemActor.WaitFrame(20)
    fork:
        branch:
            # Look on top of the counter! Spot anything new?
            MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_04_WherearenEvent:281_01', false)
        branch:
            EventFlowSystemActor.WaitFrame(15)
            Player.TurnNeck(13, false)
    # That's an <item>amiibo scanner!
    MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_04_WherearenEvent:283', false)
    MainNpc.TurnNeck(10, false)
    fork:
        branch:
            # I have a relative who's good with machines. When I told him things were going well with my company, he sent it over as a gift!
            MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_04_WherearenEvent:284', false)
        branch:
            EventFlowSystemActor.WaitFrame(15)
            Player.TurnNeck(0, false)
entrypoint Event12:
    # That <item>amiibo scanner is going to be a critical part of our business! Using Animal Crossing series amiibo, you can contact clients directly and oâ€¦
    MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_04_WherearenEvent:285', false)
    # That's all for now! I can't wait to see what you do with that <item>amiibo scanner in the future!
    MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_04_WherearenEvent:286', true)
    System.EventFlags['cWherearenPlayer:SeqAvailableAmiiboDone'] = true
    System.EventFlags['cWherearenPlayer:Unlock_Amiibo'] = true
 
flow Root_AmiiboDevice():
    run AmiiboDeviceCamera_Direct()
    EventFlowSystemActor.WaitFrame(20)
    # I had a feeling that would catch your attention!
    MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_04_WherearenEvent:282', false)
    # That's an <item>amiibo scanner!
    MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_04_WherearenEvent:283', false)
    # I have a relative who's good with machines. When I told him things were going well with my company, he sent it over as a gift!
    MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_04_WherearenEvent:284', false)
    run Event12()
 
