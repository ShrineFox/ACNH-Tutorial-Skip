flow Cancel():
    EventFlowSystemActor.SoundDuckingOff(18)
 
flow ChkCraftCampKit():
    if (EventFlowSystemActor.PlayerHasCraftRecipe('', 5166)) and (EventFlowSystemActor.PlayerIsMadeCraftRecipe('cAND', 5166, 65534, 65534, 65534, 65534, 65534, 65534, 65534)):
        EventFlowSystemActor.PlayerResetCraftRecipe('CampSite')
        if EventFlowSystemActor.SystemCheckNowStage('cIdrOffice'):
            System.EventFlags['cPlayer:IslandDevQuestCampMadeRcotent'] = true
 
flow ChkCraftWoodBridge():
    if (EventFlowSystemActor.PlayerHasCraftRecipe('', 7211)) and (EventFlowSystemActor.PlayerIsMadeCraftRecipe('cAND', 7211, 65534, 65534, 65534, 65534, 65534, 65534, 65534)):
        EventFlowSystemActor.PlayerResetCraftRecipe('WoodBridge')
        if EventFlowSystemActor.SystemCheckNowStage('cIdrTanukichi'):
            System.EventFlags['cPlayer:ImmQBridgeMadeinRcoTent'] = true
 
flow Chk_RemakeWithRcoWorkBench():
    if EventFlowSystemActor.IsMyVillage():
        if EventFlowSystemActor.SystemCheckNowStage('cIdrTanukichi'):
            System.EventFlags['cPlayer:RemakeWithRcoTentBeforeWS'] = true
        elif EventFlowSystemActor.SystemCheckNowStage('cIdrOffice'):
            System.EventFlags['cPlayer:RemakeWithRcoOfficeBeforeWS'] = true
 
flow DIY():
    EventFlowSystemActor.UIWorkingHandling('cCraft')
    if EventFlowSystemActor.UIResultMenuDecide():
        if EventFlowSystemActor.SystemCheckNowStage('cIdrTanukichi'):
            System.EventFlags['cPlayer:RcoDoneDIYmyself'] = true
            System.EventFlags['cPlayerTemp:RcoDoneDIYmeselfNow'] = true
        SubflowResults[0] = 0
        SubflowResults[1] = 0
        run Workbench_Cmn_DIYdemo()
        run ChkCraftWoodBridge()
        run ChkCraftCampKit()
        if EventFlowSystemActor.GeneralTalkChoice2() == 0:
            EventFlowSystemActor.BGMPropertyControl(21)
            Player.PlayerWorkbenchPutaway(false)
            Player.PlayerDemoTurnToStarter()
            EventFlowSystemActor.WaitFrame(10)
            EventFlowSystemActor.BGMPropertyControl(22)
            Player.PlayerWorkbenchThinking()
            run DIY()
        else:
            run Workbench_Cmn_DIYfinish()
    else:
        EventFlowSystemActor.SoundDuckingOff(18)
 
flow DIY_DisableCancel():
    Player.PlayerDemoTurn('cNorth')
    Player.TurnNeck(11, false)
    Player.TurnBody(11, 0.0)
    EventFlowSystemActor.UIWorkingHandling('cCraftTutorial')
    if EventFlowSystemActor.UIResultMenuDecide():
        SubflowResults[0] = 0
        SubflowResults[1] = 1
        run Workbench_Cmn_DIYdemo()
        fork:
            branch:
                # Yes! That was perfect. As you can see, crafting is quite simple, provided you have the correct recipes, hm? And that concludes my free DIY workshop! …
                DynamicCast_rco.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:922', true)
            branch:
                run Workbench_Cmn_DIYfinish()
        DynamicCast_rco.SmartPhone(0)
        # I'll just need to send them to your NookPhone. Would you mind opening it up?
        DynamicCast_rco.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:922_01', true)
        run Demo_Common_PhoneCall::SendingDataWithP_DynamicJoinrun Demo_Common_PhoneCall::SendingDataWithP_DynamicJoin()
        System.EventFlags['cPlayer:MainmenuRecipe'] = true
        EventFlowSystemActor.UIMenuDeviceAppear('cInstall', 'cRecipe')
        # Splendid, thank you. The DIY app is now installed on your phone and ready for you to use anytime.
        DynamicCast_rco.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:923', false)
        run Demo_Common_PhoneCall::PuttingMobileAwayWithP_DynamicJoinrun Demo_Common_PhoneCall::PuttingMobileAwayWithP_DynamicJoin()
        # And the <item>flimsy fishing rod you just crafted is yours to keep! It may not last…forever…but it should serve you well for a little while at least.
        DynamicCast_rco.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:923_01', false)
        if System.EventFlags['cPlayer:MakeVillagePlayerFlag']:
            # Speaking of fishing, I am no master angler, but perhaps I can give you a few tips, hm? In my experience, you should aim in front of the shadow of a f…
            DynamicCast_rco.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:923_02', false)
        else:
            # I'm told that the best anglers like to switch up their favorite spots and fish at different times of the day… I suppose it's to catch a larger variet…
            DynamicCast_rco.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:923_03', false)
        EventFlowSystemActor.PlayerSetCraftRecipe('DIYtutorial2', 65534)
        if not System.EventFlags['cPlayer:MakeVillagePlayerFlag']:
            run UnlockAddRecipeFor2P()
        System.EventFlags['cPlayer:RcoDIYtrialOngoing'] = false
        System.EventFlags['cLand:FlightBalloonEnable'] = true
        System.EventFlags['cLand:MessageBottleAvailable'] = true
        EventFlowSystemActor.SoundDuckingOff(18)
    else:
        run DIY_DisableCancel()
 
flow RcoDIYtrialOngoing():
    if not EventFlowSystemActor.HasTargetItem(2500, 5):
        DynamicCast_rco.RcoStandUpChair()
        DynamicCast_rco.TurnBody(10, 0.0)
        DynamicCast_rco.NpcWaitTurn()
        MainNpc.TalkCamera(true, 'cTalk', 0)
        # Remember, to craft the fishing rod you'll need 5 <item>tree branches. If you don't see enough of them lying on the ground, try shaking a few trees. E…
        DynamicCast_rco.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:911', false)
        EventFlowSystemActor.SoundDuckingOff(18)
    elif EventFlowSystemActor.SystemHasBaggageSpace('cPocketBag') < 1:
        DynamicCast_rco.RcoStandUpChair()
        DynamicCast_rco.TurnBody(10, 0.0)
        DynamicCast_rco.NpcWaitTurn()
        MainNpc.TalkCamera(true, 'cTalk', 0)
        # For this DIY workshop, you'll need 5 <item>tree branches…and some space to put your fishing rod! After all, you can't take your craft project home if…
        DynamicCast_rco.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:912', false)
        EventFlowSystemActor.SoundDuckingOff(18)
    else:
        DynamicCast_rco.RcoStandUpChair()
        DynamicCast_rco.TurnBody(10, 0.0)
        DynamicCast_rco.NpcWaitTurn()
        MainNpc.TalkCamera(true, 'cTalk', 0)
        if not System.EventFlags['cPlayer:RcoDIYtrialGetMaterial']:
            # Ah, PLAYER. Found the necessary materials, hm? Well then! Let's get started on crafting that fishing rod. Yes, yes! To begin, just select a project f…
            DynamicCast_rco.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:921', true)
        EventFlowSystemActor.PlayerSetCraftRecipe('DIYtutorial1', 65534)
        run DIY_DisableCancel()
 
flow RcoRemakeTrialOngoing(ItemPrice: int = 0):
    if not EventFlowSystemActor.HasTargetItem(3436, 1):
        run RcoWorkingTableRemakeWorkshop()
    elif EventFlowSystemActor.NetHasVisitor():
        run RcoWorkingTableRemakeWorkshop()
    else:
        System.EventFlags['cPlayerTemp:RcoTalkSceneFlag'] = true
        DynamicCast_rco.RcoStandUpChair()
        DynamicCast_rco.NpcWaitTalkPrepare()
        DynamicCast_rco.TurnBody(10, 0.0)
        DynamicCast_rco.NpcWaitTurn()
        Player.PlayerChangeStateDemoTalk()
        Player.TurnBody(0, 0.0)
        EventFlowSystemActor.NpcEventItemSet(3436, 'cTalk', 0, ItemPrice)
        if not System.EventFlags['cPlayer:RcoRemakeTrialGetFurniture']:
            System.EventFlags['cPlayer:RcoRemakeTrialGetFurniture'] = false
            # Oh! <50:3>PLAYER! You've got your <125:0:0000>!
            DynamicCast_rco.OpenMessageWindow('TalkSNpc/rco/SP_rco_09_RemakeWorkShop:301', false)
            # I think that means it's time for you to customize it.
            DynamicCast_rco.OpenMessageWindow('TalkSNpc/rco/SP_rco_09_RemakeWorkShop:302', false)
            if EventFlowSystemActor.SystemHasBaggageSpace('cPocketBag') < 1:
                # One moment… You'll also need some pocket space so you can hold the <item>customization kits you'll use. I'll give you the kits when you use the workb…
                DynamicCast_rco.OpenMessageWindow('TalkSNpc/rco/SP_rco_09_RemakeWorkShop:303', false)
                System.EventFlags['cPlayer:RemakeWs_TalkWhenItemFull'] = true
                EventFlowSystemActor.SoundDuckingOff(18)
            else:
                run Sub_grp_Event158(ItemPrice=ItemPrice)
        elif EventFlowSystemActor.SystemHasBaggageSpace('cPocketBag') < 1:
            run RcoWorkingTableRemakeWorkshop()
        else:
            if System.EventFlags['cPlayer:RemakeWs_TalkWhenItemFull']:
                # Hm, looks like you're ready now with your <125:0:0000>. And you have some pocket space!
                DynamicCast_rco.OpenMessageWindow('TalkSNpc/rco/SP_rco_09_RemakeWorkShop:305_02', false)
            else:
                # Hm, looks like you're ready now with your <125:0:0000>.
                DynamicCast_rco.OpenMessageWindow('TalkSNpc/rco/SP_rco_09_RemakeWorkShop:305_01', false)
            # I think that means it's time for you to customize it.
            DynamicCast_rco.OpenMessageWindow('TalkSNpc/rco/SP_rco_09_RemakeWorkShop:302', false)
            run Sub_grp_Event158(ItemPrice=ItemPrice)
 
flow RcoWorkingTableNormal():
    Player.PlayerWorkbenchThinking()
    if System.EventFlags['cPlayer:EnableDiyRemake']:
        # Should I craft something using Tom Nook's workbench?
        Player.OpenMessageWindow('TalkFtr/FTR_WorkingTable:011_01', false)
        switch EventFlowSystemActor.GeneralTalkChoice3():
            case 0:
                run DIY()
            case 1:
                run Remake()
            case 2:
                run Cancel()
    else:
        # Should I craft something using Tom Nook's workbench?
        Player.OpenMessageWindow('TalkFtr/FTR_WorkingTable:011', true)
        if EventFlowSystemActor.GeneralTalkChoice2() == 0:
            run DIY()
        else:
            run Cancel()
 
flow RcoWorkingTableRemakeWorkshop():
    Player.PlayerWorkbenchThinking()
    # Should I craft something using Tom Nook's workbench?
    Player.OpenMessageWindow('TalkFtr/FTR_WorkingTable:011_02', false)
    switch EventFlowSystemActor.GeneralTalkChoice3():
        case 0:
            run DIY()
        case 1:
            if EventFlowSystemActor.NetHasVisitor():
                run VisitorOnMyIsland()
            else:
                EventFlowSystemActor.SoundDuckingOff(18)
                System.EventFlags['cPlayerTemp:RcoTalkSceneFlag'] = true
                System.EventFlags['cPlayerTemp:RcoAccessWorkingTable'] = true
                run SNPC_rco_01_Tent_1_Entries::RcoAskRemakeTrialrun SNPC_rco_01_Tent_1_Entries::RcoAskRemakeTrial()
        case 2:
            run Cancel()
 
flow RecipeUIDisable():
    # This workbench is for DIY projects.
    Player.OpenMessageWindow('TalkFtr/FTR_WorkingTable:002', false)
    run Sub_Event201()
 
flow Remake():
    EventFlowSystemActor.UIItemSelectWindowHandling('cWorkBenchRemake', 65534, '', '', 'cItemSelectRemake', false)
    if not EventFlowSystemActor.UIResultMenuDecide():
        EventFlowSystemActor.SoundDuckingOff(18)
    elif EventFlowSystemActor.UIPocketMenuItemSelected(14820, 1, true):
        # Should I customize my NookPhone with a <item>Paradise Planning case? This will consume the item.
        Player.OpenMessageWindow('TalkFtr/FTR_WorkingTable:024', true)
        if EventFlowSystemActor.GeneralTalkChoice2() == 0:
            run Sub_Event299()
        else:
            run Remake()
    elif EventFlowSystemActor.UIPocketMenuItemSelected(13439, 1, true):
        # Should I customize my NookPhone with a <item>Pocket Camp phone case? This will consume the item.
        Player.OpenMessageWindow('TalkFtr/FTR_WorkingTable:023', true)
        if EventFlowSystemActor.GeneralTalkChoice2() == 0:
            run Sub_Event299()
        else:
            run Remake()
    else:
        EventFlowSystemActor.UIWorkingHandling('cRemakeSelect')
        if EventFlowSystemActor.UIResultMenuDecide():
            run Sub_Event299()
        else:
            run Remake()
 
flow RemakeWS_SharePlay():
    run Event159()
 
flow Root():
    EventFlowSystemActor.SoundDuckingOn(18)
    if not EventFlowSystemActor.IsMyVillage():
        if System.EventFlags['cPlayer:MainmenuRecipe']:
            run WorkingTable_Borrow()
        else:
            run RecipeUIDisable()
    elif (not EventFlowSystemActor.SystemCheckNowStage('cIdrTanukichi')) and (not EventFlowSystemActor.SystemCheckNowStage('cIdrOffice')):
        if not System.EventFlags['cPlayer:MainmenuRecipe']:
            run RecipeUIDisable()
        elif (not EventFlowSystemActor.SystemCheckNowStage('cAnyNpcHouse')) and (not EventFlowSystemActor.SystemCheckNowStage('cOtherPlayerHouse')):
            run WorkingTable_Normal()
        else:
            run WorkingTable_Borrow()
    elif System.EventFlags['cPlayer:MainmenuRecipe']:
        if System.EventFlags['cPlayer:EnableDiyRemake']:
            run RcoWorkingTableNormal()
        elif System.EventFlags['cPlayer:RcoRemakeTrialOngoing']:
            run RcoRemakeTrialOngoing()
        elif System.EventFlags['cPlayer:RcoEnableRemakeTrial']:
            run RcoWorkingTableRemakeWorkshop()
        else:
            run RcoWorkingTableNormal()
    elif not System.EventFlags['cPlayer:RcoTalked1stAfterPrologue']:
        run RecipeUIDisable()
    elif System.EventFlags['cPlayer:RcoHeardDetailDIYtrial']:
        if EventFlowSystemActor.NetHasVisitor():
            run VisitorOnMyIsland()
        else:
            run RcoDIYtrialOngoing()
    elif EventFlowSystemActor.NetHasVisitor():
        run RecipeUIDisable()
    else:
        if MainNpc.NpcIsSitting() not in (0, 1, 2, 3, 5):
            MainNpc.TalkCamera(true, 'cTalk', 0)
        # Ah, I see you've discovered my DIY workbench.
        MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:901', false)
        if MainNpc.NpcIsSitting() in (0, 1, 2, 3, 5):
            MainNpc.RcoStandUpChair()
            MainNpc.TalkCamera(true, 'cTalk', 0)
        EventFlowSystemActor.SoundDuckingOff(18)
        run SNPC_rco_01_Tent_1_Entries::RcoTentAskDIYtrialrun SNPC_rco_01_Tent_1_Entries::RcoTentAskDIYtrial()
 
flow Root_Tutorial():
    run Root()
 
flow Root_Tutorial_Init():
    MainNpc.NpcAISetting(4, false)
 
local flow Sub_Event176(ItemPrice: int):
    EventFlowSystemActor.SetItemToPocket(2513, 50)
    Player.TurnBody(11, 0.0)
    Player.TurnNeck(11, false)
    Player.PlayerDemoTurn('cNorth')
    Player.PlayerWaitTurn()
    EventFlowSystemActor.UIItemSelectWindowHandling('cItemName', 3436, '', '', 'cItemSelectRemakeTutorial', false)
    EventFlowSystemActor.UIWorkingHandling('cRemakeSelectTutorial')
    SubflowResults[0] = 1
    SubflowResults[1] = 1
    run Workbench_Cmn_DIYdemo()
    fork:
        branch:
            # Yes, yes! Masterfully done!
            DynamicCast_rco.OpenMessageWindow('TalkSNpc/rco/SP_rco_09_RemakeWorkShop:401', false)
        branch:
            run Workbench_Cmn_DIYfinish()
    # As you've just seen, customizing items is quite easy when you have <item>customization kits and a workbench. You can take the extras from today as my…
    DynamicCast_rco.OpenMessageWindow('TalkSNpc/rco/SP_rco_09_RemakeWorkShop:402', false)
    # And this concludes my workshop on customization! I hope you enjoy putting on a fashion show in your home using your custom <125:0:0000>. Now, take a …
    DynamicCast_rco.OpenMessageWindow('TalkSNpc/rco/SP_rco_09_RemakeWorkShop:403', true)
    System.EventFlags['cPlayer:RcoRemakeTrialOngoing'] = false
    System.EventFlags['cPlayer:RcoEnableRemakeTrial'] = false
    System.EventFlags['cPlayer:EnableDiyRemake'] = true
    EventFlowSystemActor.SoundDuckingOff(18)
 
local flow Sub_Event201():
    EventFlowSystemActor.SoundDuckingOff(18)
 
local flow Sub_Event299():
    run Chk_RemakeWithRcoWorkBench()
    SubflowResults[0] = 1
    SubflowResults[1] = 0
    run Workbench_Cmn_DIYdemo()
    if EventFlowSystemActor.GeneralTalkChoice2() == 0:
        EventFlowSystemActor.BGMPropertyControl(21)
        Player.PlayerWorkbenchPutaway(true)
        Player.PlayerDemoTurnToStarter()
        EventFlowSystemActor.WaitFrame(10)
        EventFlowSystemActor.BGMPropertyControl(22)
        Player.PlayerWorkbenchThinking()
        run Remake()
    else:
        run Workbench_Cmn_DIYfinish()
 
local flow Sub_grp_Event158(ItemPrice: int):
    if EventFlowSystemActor.OfficeLevel() not in (`ResServiceTent0`, `ResServiceTent1`):
entrypoint Event159:
        # I've placed some <item>customization kits in with your belongings. So go ahead and try customizing your <item>wooden wardrobe!
        DynamicCast_rco.OpenMessageWindow('TalkSNpc/rco/SP_rco_09_RemakeWorkShop:304_01', true)
        run Sub_Event176(ItemPrice=ItemPrice)
    elif EventFlowSystemActor.IsSharePlay(0):
        run RemakeWS_SharePlay()
    else:
        # First, PLAYER, I'll give you some <item>customization kits!
        DynamicCast_rco.OpenMessageWindow('TalkSNpc/rco/SP_rco_09_RemakeWorkShop:304', true)
        if not System.EventFlags['cLandTemp:RcoRemakeWSInThisScene']:
            DynamicCast_rco.NpcRailMove(2, false, false, 0, 1, 0)
            System.EventFlags['cLandTemp:RcoRemakeWSInThisScene'] = true
        DynamicCast_rco.SetDeliveryItemAtRandom(2513, false, 'cVillageRemakePattern', 0)
        DynamicCast_rco.NpcDelivery(1, 'Default')
        # Next, pull out your <item>wooden wardrobe and try customizing it!
        DynamicCast_rco.OpenMessageWindow('TalkSNpc/rco/SP_rco_09_RemakeWorkShop:304_02', true)
        run Sub_Event176(ItemPrice=ItemPrice)
 
flow UnlockAddRecipeFor2P():
    if EventFlowSystemActor.ShopLevel() in (`NooksCrannyInitial`, `NooksCrannyUpgraded`):
        EventFlowSystemActor.PlayerSetCraftRecipe('None', 3068)
        if (System.EventFlags['cLand:MuseumConstructionToday']) or (EventFlowSystemActor.MuseumLevel() not in (`BlathersNotMovedIn`, `BlathersTent`)):
            EventFlowSystemActor.PlayerSetCraftRecipe('None', 4703)
        if EventFlowSystemActor.OfficeLevel() == `ResServiceBuilding`:
            EventFlowSystemActor.PlayerSetCraftRecipe('None', 2615)
 
flow VisitorOnMyIsland():
    # I've got company at the moment, so I'll do the workshop later.
    Player.OpenMessageWindow('TalkFtr/FTR_WorkingTable:051', false)
    run Sub_Event201()
 
flow Workbench_Cmn_DIYdemo():
    EventFlowSystemActor.SetTagFromUIResult('cItemName', 0)
    EventFlowSystemActor.BGMPropertyControl(19)
    if SubflowResults@2[0] == 0:
        EventFlowSystemActor.SaveSetFromUIResult('cWorkCraft')
        Player.PlayerWorkbenchMaking(false)
        EventFlowSystemActor.BGMPropertyControl(20)
        if SubflowResults@2[1] == 0:
            Player.PlayerWorkbenchGetDemo(false, false, false)
            # I made [a|an] <125:0:0000>!
            Player.OpenMessageWindow('TalkFtr/FTR_WorkingTable:031', true)
        else:
            fork:
                branch:
                    Player.PlayerWorkbenchGetDemo(true, true, false)
                    # I made [a|an] <125:0:0000>!
                    Player.OpenMessageWindow('TalkFtr/FTR_WorkingTable:031_01', true)
                branch:
                    DynamicCast_rco.NpcReaction('cAccomplish')
    else:
        EventFlowSystemActor.SaveSetFromUIResult('cWorkRemake')
        Player.PlayerWorkbenchMaking(true)
        EventFlowSystemActor.BGMPropertyControl(20)
        if SubflowResults@2[1] == 0:
            Player.PlayerWorkbenchGetDemo(false, false, true)
            # I customized [a|an] <125:0:0000>!
            Player.OpenMessageWindow('TalkFtr/FTR_WorkingTable:032', false)
        else:
            fork:
                branch:
                    Player.PlayerWorkbenchGetDemo(true, true, true)
                    # I customized [a|an] <125:0:0000>!
                    Player.OpenMessageWindow('TalkFtr/FTR_WorkingTable:032_01', true)
                branch:
                    DynamicCast_rco.NpcReaction('cAccomplish')
 
flow Workbench_Cmn_DIYfinish():
    EventFlowSystemActor.BGMPropertyControl(21)
    if SubflowResults@2[1] == 0:
        EventFlowSystemActor.StoreNormalCamera(false, '')
        if SubflowResults@2[0] == 0:
            Player.PlayerWorkbenchPutaway(false)
        else:
            Player.PlayerWorkbenchPutaway(true)
        EventFlowSystemActor.SoundDuckingOff(18)
    else:
        EventFlowSystemActor.BGMPropertyControl(22)
        EventFlowSystemActor.WaitFrame(30)
        if SubflowResults@2[0] == 0:
            Player.PlayerWorkbenchPutaway(false)
        else:
            Player.PlayerWorkbenchPutaway(true)
        EventFlowSystemActor.WaitFrame(15)
        Player.TurnBody(0, 0.0)
 
flow WorkingTable_Borrow():
    Player.PlayerWorkbenchThinking()
    if System.EventFlags['cPlayer:EnableDiyRemake']:
        # Should I craft something using this workbench?
        Player.OpenMessageWindow('TalkFtr/FTR_WorkingTable:021', false)
        switch EventFlowSystemActor.GeneralTalkChoice3():
            case 0:
                run DIY()
            case 1:
                if EventFlowSystemActor.IsMyVillage():
                    run Remake()
                else:
                    if not System.EventFlags['cPlayerVisit:VisitorRemakeWorkingTable']:
                        # You cannot customize with custom designs while on someone else's island.
                        EventFlowSystemActor.OpenMessageWindow('TalkFtr/FTR_WorkingTable:022', false)
                        System.EventFlags['cPlayerVisit:VisitorRemakeWorkingTable'] = true
                    run Remake()
            case 2:
                run Cancel()
    else:
        # Should I craft something using this workbench?
        Player.OpenMessageWindow('TalkFtr/FTR_WorkingTable:021_01', false)
        if EventFlowSystemActor.GeneralTalkChoice2() == 0:
            run DIY()
        else:
            run Cancel()
 
flow WorkingTable_Normal():
    Player.PlayerWorkbenchThinking()
    if System.EventFlags['cPlayer:EnableDiyRemake']:
        # Should I craft something?
        Player.OpenMessageWindow('TalkFtr/FTR_WorkingTable:001', true)
        switch EventFlowSystemActor.GeneralTalkChoice3():
            case 0:
                run DIY()
            case 1:
                run Remake()
            case 2:
                run Cancel()
    else:
        # Should I craft something?
        Player.OpenMessageWindow('TalkFtr/FTR_WorkingTable:001_01', true)
        if EventFlowSystemActor.GeneralTalkChoice2() == 0:
            run DIY()
        else:
            run Cancel()
 
