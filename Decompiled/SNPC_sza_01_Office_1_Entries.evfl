flow Chk_Enable_Evaluation():
    if System.EventFlags['cLand:IslandEvaluationUnlock']:
        System.EventFlags['cPlayer:IslandEvaluationUnlockMyself'] = true
        System.EventFlags['cPlayer:SzaHeardAboutIslandEvaluation'] = true
 
flow Chk_Enable_Regulation():
    if System.EventFlags['cLand:v200_Enabled_ChangeRegulation']:
        System.EventFlags['cPlayer:ExplainIslandRegulation'] = true
 
flow Sza_EvaluationExplanation():
    if System.EventFlags['cPlayer:SzaTalkAtOfficeToday']:
        # Ah, yes!
        MainNpc.OpenMessageWindow('TalkSNpc/sza/SP_sza_50_IslandEvaluation:000_01_02', false)
    else:
        System.EventFlags['cPlayer:SzaTalkAtOfficeToday'] = true
        SubflowResults[15] = 1
        run SNPC_sza_00_Common::Sza_Common_Greetrun SNPC_sza_00_Common::Sza_Common_Greet()
        # Oh! Of course!
        MainNpc.OpenMessageWindow('TalkSNpc/sza/SP_sza_50_IslandEvaluation:000_01_01', false)
    if System.EventFlags['cPlayer:MakeVillagePlayerFlag']:
        # As Mr. Nook mentioned, I'm leading a task force that compiles feedback related to the image of our island. OK, it's just me. Though I have always wan…
        MainNpc.OpenMessageWindow('TalkSNpc/sza/SP_sza_50_IslandEvaluation:000_02', false)
    else:
        # At the moment, I'm leading a task force that compiles feedback related to the image of our island. OK, it's just me. Though I have always wanted a ta…
        MainNpc.OpenMessageWindow('TalkSNpc/sza/SP_sza_50_IslandEvaluation:000_02_01', false)
        System.EventFlags['cPlayer:IslandEvaluationUnlockMyself'] = true
    System.EventFlags['cPlayer:SzaHeardAboutIslandEvaluation'] = true
    SubflowResults[0] = 1
 
flow Sza_RegulationExplanation():
    if SubflowResults@2[1] == 0:
        if System.EventFlags['cPlayer:SzaTalkAtOfficeToday']:
            # Ah, yes!
            MainNpc.OpenMessageWindow('TalkSNpc/sza/v2_0_0/SP_sza_60_aboutisland_03_Regulation:1001_01', false)
        else:
            System.EventFlags['cPlayer:SzaTalkAtOfficeToday'] = true
            SubflowResults[15] = 1
            run SNPC_sza_00_Common::Sza_Common_Greetrun SNPC_sza_00_Common::Sza_Common_Greet()
            # Oh, yeah!
            MainNpc.OpenMessageWindow('TalkSNpc/sza/v2_0_0/SP_sza_60_aboutisland_03_Regulation:1001', false)
    else:
        # Oh! I almost forgot!
        MainNpc.OpenMessageWindow('TalkSNpc/sza/v2_0_0/SP_sza_60_aboutisland_03_Regulation:1001_02', false)
    if System.EventFlags['cPlayer:PAAboutUnlockIslandRegulation']:
        # As I said in the broadcast, we can now enact ordinances, special rules that change things about the island.
        MainNpc.OpenMessageWindow('TalkSNpc/sza/v2_0_0/SP_sza_60_aboutisland_03_Regulation:1002_01', false)
    else:
        # You may have heard that we can now enact ordinances, special rules that can change things about the island.
        MainNpc.OpenMessageWindow('TalkSNpc/sza/v2_0_0/SP_sza_60_aboutisland_03_Regulation:1002', false)
    if System.EventFlags['cPlayer:MakeVillagePlayerFlag']:
        # The others and I decided that, as our Resident Representative, you should be in charge of our ordinances. This means you can enact or dismiss any ord…
        MainNpc.OpenMessageWindow('TalkSNpc/sza/v2_0_0/SP_sza_60_aboutisland_03_Regulation:1003', false)
    else:
        # Ordinances are pretty serious. We need our Resident Representative, <110:39>, to handle them. If you have any thoughts about having an ordinance enac…
        MainNpc.OpenMessageWindow('TalkSNpc/sza/v2_0_0/SP_sza_60_aboutisland_03_Regulation:1003_01', false)
    System.EventFlags['cPlayer:ExplainIslandRegulation'] = true
    System.EventFlags['cPlayer:PAAboutUnlockIslandRegulation'] = true
    SubflowResults[0] = 1
 
flow TalkFirst():
    System.EventFlags['cPlayer:SzaTaled1stTime'] = true
    System.EventFlags['cPlayer:SzaTalkAtOfficeToday'] = true
    if System.EventFlags['cPlayer:OfficeSzaIntroduction']:
        if System.EventFlags['cPlayerTemp:RcoOfficeFirstTalkNow']:
            # Oh, PLAYER! Here you are already!
            MainNpc.OpenMessageWindow('TalkSNpc/sza/SP_sza_2_Office:001_01', false)
        else:
            # Welcome, PLAYER! In case you don't remember, I'm Isabelle. I look forward to being of assistance with your life here on ISLAND!
            MainNpc.OpenMessageWindow('TalkSNpc/sza/SP_sza_2_Office:001_02', false)
    else:
        if System.EventFlags['cPlayer:SzaTalkFirstNotOffice']:
            # <50:3>PLAYER! It's nice to see you again! Oh! I don't think I've ever seen you in here, though. Let me give you a quick overview.
            MainNpc.OpenMessageWindow('TalkSNpc/sza/SP_sza_2_Office:022', false)
        else:
            # It's nice to meet you! My name is Isabelle, and I work here at Resident Services.
            MainNpc.OpenMessageWindow('TalkSNpc/sza/SP_sza_2_Office:021_01', false)
            if System.EventFlags['cPlayer:FirstPlayAfterPlayerMake']:
                # You must be tired from all your travels, but I just want you to know that I'm always here to help.
                MainNpc.OpenMessageWindow('TalkSNpc/sza/SP_sza_2_Office:021_02', false)
            else:
                # I've looked forward to meeting you! I hope you know that I'm here to help you however I can!
                MainNpc.OpenMessageWindow('TalkSNpc/sza/SP_sza_2_Office:021_03', false)
    # At this counter, I can help you with both general issues and issues you may face with other residents. We can delve into the details when specific co…
    MainNpc.OpenMessageWindow('TalkSNpc/sza/SP_sza_2_Office:002', false)
    run Chk_Enable_Evaluation()
    run Chk_Enable_Regulation()
    if not EventFlowSystemActor.NetHasVisitor():
        # But since you're here, I may as well ask… Do you have any specific concerns at the moment?
        MainNpc.OpenMessageWindow('TalkSNpc/sza/SP_sza_2_Office:002_02', false)
        if EventFlowSystemActor.GeneralTalkChoice2() == 0:
            # Oh, this is so exciting! My first official request! Ahem… I'm sorry… That wasn't professional, was it? Now then…
            MainNpc.OpenMessageWindow('TalkSNpc/sza/SP_sza_2_Office:003', false)
            run SNPC_sza_00_Common::szaNormalSeqrun SNPC_sza_00_Common::szaNormalSeq()
        else:
            run SNPC_sza_00_Common::Sza_Cmn_Cancelrun SNPC_sza_00_Common::Sza_Cmn_Cancel()
 
