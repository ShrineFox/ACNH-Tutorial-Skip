flow AfterRemodel_Force():
    System.EventFlags['cPlayerTemp:RcoTalkSceneFlag'] = true
    run SNPC_rco_01_Tent_1_Entries::RcoTent_Force_PlayerPosrun SNPC_rco_01_Tent_1_Entries::RcoTent_Force_PlayerPos()
    run RcoAfterBuiltHouseEvent()
 
flow AfterRemodel_Force_Init():
    run SNPC_rco_01_Tent_1_Entries::RcoTent_Force_DisableTalkCamerarun SNPC_rco_01_Tent_1_Entries::RcoTent_Force_DisableTalkCamera()
 
flow GiveMileTicket():
    System.EventFlags['cPlayer:CanGetMileTicketTrialForMoving'] = false
    run Event24()
 
flow GiveMileTicketForMovingPlayer_Force():
    System.EventFlags['cPlayerTemp:RcoTalkSceneFlag'] = true
    run SNPC_rco_01_Tent_1_Entries::RcoTent_Force_PlayerPosrun SNPC_rco_01_Tent_1_Entries::RcoTent_Force_PlayerPos()
    run Only_GiveMileTicket()
 
flow GiveMileTicketForMovingPlayer_Normal():
    if System.EventFlags['cPlayer:RcoAfterHouseRemodel']:
        switch EventFlowSystemActor.PlayerHouseLevel():
            case `BaseHouse`:
                run RcoAfterBuiltHouseEvent()
            case `HouseExpansion1`, `BackRoom`, `LeftRoom`, `RightRoom`, `SecondFloor`, `Basement`:
                run Only_GiveMileTicket()
            default:
                return
    else:
        run Only_GiveMileTicket()
 
flow Only_GiveMileTicket():
    # Hello, PLAYER!
    MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:1101', false)
    # How are you settling in? Is life on ISLAND treating you well?
    MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:1102', false)
    switch EventFlowSystemActor.GeneralTalkChoice2():
        case 0, 1:
            # Good, good! I think you'll enjoy it here. There are countless wonderful ways to spend your time! Even so, sometimes it's just nice to get off the isl…
            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:1103', false)
            if EventFlowSystemActor.GeneralTalkChoice2() == 0:
                # You can use a <item>Nook Miles Ticket to do some island-hopping adventuring, yes, yes! Go anytime you want! Maybe you're looking to meet some new cha…
                MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:1105', false)
            else:
                # A <item>Nook Miles Ticket is a special travel voucher you can only get by redeeming Nook Miles. It's a conundrum, hm? We want to improve our island, …
                MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:012_06', false)
            # Well, I won't take up any more of your time. Get back out there and explore ISLAND!
            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:1104', false)
            System.EventFlags['cPlayer:RcoGetTvForCongratsHouse'] = true
            System.EventFlags['cPlayer:CanGetMileTicketTrialForMoving'] = false
 
flow RcoAfterBuiltHouseEvent():
    if not System.EventFlags['cPlayer:NotBuilt2PMyHomeAfterMoving']:
        if (not System.EventFlags['cPlayer:PlayerMovingOrderHouseBuilt']) and (not System.EventFlags['cPlayer:PlayerMovingAfterHouseRemodel']):
            # Well, hello there, PLAYER!
            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:011', false)
            run Sub_grp_Event2()
        else:
            switch EventFlowSystemActor.PlayerHouseLevel():
                case `BaseHouse`:
                    # Well, hello there, PLAYER! Say, didn't you ask to have a home built just before you moved here?
                    MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:1002', false)
                    run Sub_Event118()
                case `HouseExpansion1`, `BackRoom`, `LeftRoom`, `RightRoom`, `SecondFloor`, `Basement`:
                    # Well, hello there, PLAYER! Say, didn't you ask to have your home remodeled just before you moved here?
                    MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:1003', false)
                    run Sub_Event118()
                default:
                    return
 
flow RcoRcmTalkAboutStoreMaterial_Force():
    run SNPC_rco_01_Tent_1_Entries::RcoTent_Force_PlayerPosrun SNPC_rco_01_Tent_1_Entries::RcoTent_Force_PlayerPos()
    System.EventFlags['cPlayerTemp:RcoTalkSceneFlag'] = true
    System.EventFlags['cLand:RcoRcmTalkingAboutStoreMaterial'] = true
    # …So you see, since the number of homeowners is increasing, I agree that we need to build a shop. However, when it comes to building supplies, our cus…
    MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:101', false)
    # I have every confidence that you'll find a way to handle this little puzzle. The two of you have been training under me for how many years now, hm? T…
    MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:102', true)
    EventFlowSystemActor.WaitFrame(10)
    fork:
        branch:
            MainNpc.TurnBody(10, 0.0)
            MainNpc.NpcWaitTurn()
        branch:
            Npc_1.TurnBody(10, 0.0)
            Npc_1.NpcWaitTurn()
    run GiveMileTicketForMovingPlayer_Normal()
 
flow RcoRcmTalkAboutStoreMaterial_Force_Init():
    run SNPC_rco_01_Tent_1_Entries::RcoTent_Force_DisableTalkCamerarun SNPC_rco_01_Tent_1_Entries::RcoTent_Force_DisableTalkCamera()
    MainNpc.NpcAITalkSubCastEntry('rcm', 1)
    MainNpc.NpcAISetting(2, false)
    MainNpc.NpcAISetting(3, false)
    MainNpc.NpcAISetting(3, false)
 
flow Root():
    if System.EventFlags['cPlayer:RcoAfterHouseRemodel']:
        run RcoAfterBuiltHouseEvent()
 
flow SkipMileTicket():
    # Now then, go enjoy life in your freshly built home! Indeed!
    MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:012_07', false)
    EventFlowSystemActor.PlayerSetLoan(98000)
    run Sub_Event51()
 
local flow Sub_Event118():
    System.EventFlags['cPlayer:PlayerMovingOrderHouseBuilt'] = false
    System.EventFlags['cPlayer:PlayerMovingAfterHouseRemodel'] = false
    run Sub_grp_Event2()
 
local flow Sub_Event49():
    # Ah, yes! Please make your payments using the Nook Stop's ABD feature as you've done before.
    MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:081_01', false)
    run Sub_Event50()
 
local flow Sub_Event50():
    # As always, it's been ever so nice doing business with you. Yes, yes!
    MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:081_02', false)
    run Sub_Event51()
 
local flow Sub_Event51():
    EventFlowSystemActor.UIMoneyDisappear()
    System.EventFlags['cPlayer:PlayerLoanRepaying'] = true
    System.EventFlags['cPlayer:RcoAfterHouseRemodel'] = false
    System.EventFlags['cPlayer:RcoWallFtrRemoveHouseRemodel'] = false
    EventFlowSystemActor.ExitFlowchartEventFlowSystemActor.ExitFlowchart()
 
local flow Sub_grp_Event2():
    switch EventFlowSystemActor.PlayerHouseLevel():
        case `BaseHouse`:
            # Are you happy with your home? Is it meeting your expectations?<10:4> I bet you'll be a lot more comfortable now! Houses are so different from tents, …
            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:012_01', false)
            # Oh yes! There's more… All homeowners are automatically registered with the Happy Home Academy. The HHA, as we call it, will evaluate your home on a r…
            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:012_02', false)
            # Which brings us to…
            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:012_02_01', false)
            EventFlowSystemActor.UIMoneyAppear()
            # your new home loan! That'll be… 98,000 Bells, please!
            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:012_03', false)
            if EventFlowSystemActor.GeneralTalkChoice2() == 0:
                # Ah… Don't worry. You can pay it back in installments, big or small. Payments can be made using the ABD feature of the Nook Stop.
                MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:012_04_01', false)
            else:
                # Oh, I'm sorry. That was a special offer that only applied to your initial getaway-package fees. You'll have to make loan payments with Bells now. Ah……
                MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:012_04_02', false)
            if not System.EventFlags['cPlayer:PlayerProducedByPlayerMoving']:
entrypoint Event24:
                # I think that's everything I need to tell you about homes today.<10:4> But I do have a nice surprise for you! I do hope you're ready for this… it's a …
                MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:012_05', false)
                switch EventFlowSystemActor.GeneralTalkChoice2():
                    case 0, 1:
                        # A <item>Nook Miles Ticket is a special travel voucher you can only get by redeeming Nook Miles. It's a conundrum, hm? We want to improve our island, …
                        MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:012_06', false)
                        # Now then, go enjoy life in your freshly built home! Indeed!
                        MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:012_07', false)
                        EventFlowSystemActor.PlayerSetLoan(98000)
                        System.EventFlags['cPlayer:RcoGetTvForCongratsHouse'] = true
                        run Sub_Event51()
            elif System.EventFlags['cPlayer:CanGetMileTicketTrialForMoving']:
                run GiveMileTicket()
            else:
                run SkipMileTicket()
        case `HouseExpansion1`:
            # Your home is much roomier, yes?<10:4> It's nice to have even a little extra space.
            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:021_01', false)
            # Which brings us to…
            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:021_02', false)
            EventFlowSystemActor.UIMoneyAppear()
            # the cost of your remodel! That'll be 198,000 Bells, hm?
            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:021_03', false)
            EventFlowSystemActor.PlayerSetLoan(198000)
            run Sub_Event49()
        case `BackRoom`:
            # Your home now has another room where once there was none, yes?<10:4> You can use it for whatever you like!
            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:031_01', false)
            # Which brings us to…
            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:031_02', false)
            EventFlowSystemActor.UIMoneyAppear()
            # the cost of your remodel! That'll be 348,000 Bells, hm?
            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:031_03', false)
            EventFlowSystemActor.PlayerSetLoan(348000)
            run Sub_Event49()
        case `LeftRoom`:
            # Just like that your home has another proper room, hm?<10:4> That's another upgrade to an even cushier lifestyle.
            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:041_01', false)
            # Which brings us to…
            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:041_02', false)
            EventFlowSystemActor.UIMoneyAppear()
            # the cost of your remodel! That'll be 548,000 Bells, hm?
            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:041_03', false)
            EventFlowSystemActor.PlayerSetLoan(548000)
            # Ah, yes! Please make your payments using the Nook Stop's ABD feature as you've done before.
            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:081_01', false)
            # One other thing I should mention… Now that you've made some big improvements to your home, I can start offering customization services. This is not a…
            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:041_04', false)
            run Sub_Event50()
        case `RightRoom`:
            # Just like that your home has another proper room, hm?<10:4> That's another upgrade to an even cushier lifestyle.
            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:051_01', false)
            # Which brings us to…
            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:051_02', false)
            EventFlowSystemActor.UIMoneyAppear()
            # the cost of your remodel! That'll be 758,000 Bells, hm?
            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:051_03', false)
            EventFlowSystemActor.PlayerSetLoan(758000)
            # Ah, yes! Please make your payments using the Nook Stop's ABD feature as you've done before.
            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:081_01', false)
            # One other thing I should mention… as part of the home-customization services available to you, you can now order replacement doors. Changing your doo…
            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:051_04', false)
            run Sub_Event50()
        case `SecondFloor`:
            # Your home has two, beautiful stories now, hm? I hope you'll take this opportunity to experiment with some new styles of interior design!
            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:061_01', false)
            # Which brings us to…
            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:061_02', false)
            EventFlowSystemActor.UIMoneyAppear()
            # the cost of your remodel! That'll be 1,248,000 Bells, hm?
            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:061_03', false)
            EventFlowSystemActor.PlayerSetLoan(1248000)
            # Ah, yes! Please make your payments using the Nook Stop's ABD feature as you've done before.
            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:081_01', false)
            # One other thing I should mention… As part of our home-customization service, you can now order full house designs and replacement siding! Making majo…
            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:061_05', false)
            System.EventFlags['cPlayer:CompleteNoticeChangeHouseForm'] = true
            run Sub_Event50()
        case `Basement`:
            # Your home has a proper basement now, does it not? You won't find many folks with a home as impressive as yours!
            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:071_01', false)
            # Which brings us to…
            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:071_02', false)
            EventFlowSystemActor.UIMoneyAppear()
            # the cost of your remodel! That'll be 2,498,000 Bells, hm?
            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:071_03', false)
            EventFlowSystemActor.PlayerSetLoan(2498000)
            # Oh! I'd like to discuss something. Although we can't increase the size of your house any further, well… With all the furniture and trinkets you've co…
            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_02_Loan:1202', false)
            run Sub_Event51()
        default:
            return
 
