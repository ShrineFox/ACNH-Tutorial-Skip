flow Branch_ChkHarvestRecipe():
    if EventFlowSystemActor.MultiItemSelectIncludeEventFlowSystemActor.MultiItemSelectInclude(5605, 65534, 65534, 65534, 65534, 65534, 65534, 65534, 'cItemSelect'):
        if EventFlowSystemActor.PlayerHasCraftRecipeEventFlowSystemActor.PlayerHasCraftRecipe('DIYbook3', 65534):
            run RcmDIYbookBought()
        else:
            run RcmDIYbookBuySel()
            EventFlowSystemActor.PlayerSetCraftRecipeEventFlowSystemActor.PlayerSetCraftRecipe('DIYbook3', 65534)
            run Event28()
    elif EventFlowSystemActor.MultiItemSelectIncludeEventFlowSystemActor.MultiItemSelectInclude(13787, 65534, 65534, 65534, 65534, 65534, 65534, 65534, 'cItemSelect'):
        if EventFlowSystemActor.PlayerHasCraftRecipeEventFlowSystemActor.PlayerHasCraftRecipe('HarvestFtr', 65534):
            # Not that we're keeping track, but… you've already learned all of the DIY recipes in that collection! Perhaps you would enjoy the challenge of craftin…
            MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rcm/SP_rcm_00_common:2003', false)
            run SNPC_rcm_00_Common::BuyCancelNoAskrun SNPC_rcm_00_Common::BuyCancelNoAsk()
        else:
            run RcmDIYbookBuySel()
            EventFlowSystemActor.PlayerSetCraftRecipeEventFlowSystemActor.PlayerSetCraftRecipe('HarvestFtr', 65534)
entrypoint Event28:
            # And we're done!<10:4> I hope you enjoy DIY even more now with your new recipes!__ ...new recipes!__
            MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rcm/SP_rcm_00_common:107_02', false)
            run Event50()
 
flow Branch_WhatIsHarvestRecipe():
    if EventFlowSystemActor.MultiItemSelectIncludeEventFlowSystemActor.MultiItemSelectInclude(5605, 65534, 65534, 65534, 65534, 65534, 65534, 65534, 'cItemSelect'):
        # This <125:0:0000> contains a mix of recipes that require a mastery of various materials!
        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rcm/SP_rcm_00_common:106_01_03', false)
        run Event71()
        return
    elif EventFlowSystemActor.MultiItemSelectIncludeEventFlowSystemActor.MultiItemSelectInclude(13787, 65534, 65534, 65534, 65534, 65534, 65534, 65534, 'cItemSelect'):
        # Ah! You've found a collection of DIY recipes inspired by Turkey Day. It's <50:1><125:0:0000>! We'll only be offering this collection until the end of…
        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rcm/SP_rcm_00_common:2004', false)
        run Event71()
        return
    elif EventFlowSystemActor.MultiItemSelectIncludeEventFlowSystemActor.MultiItemSelectInclude(14811, 65534, 65534, 65534, 65534, 65534, 65534, 65534, 'cItemSelect'):
        # Ah, <125:0:0000>? That's a simple cookbook filled with recipes using basic ingredients.
        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rcm/SP_rcm_00_common:4011', false)
        # I'll send the recipe data to your app immediately if you decide to make a purchase.
        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rcm/SP_rcm_00_common:4019', false)
        run RcmDIYbookBuySel()
    elif EventFlowSystemActor.MultiItemSelectIncludeEventFlowSystemActor.MultiItemSelectInclude(14816, 65534, 65534, 65534, 65534, 65534, 65534, 65534, 'cItemSelect'):
        # Ah, <125:0:0000>? That's a cookbook filled with recipes from our recent Turkey Day celebration!
        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rcm/SP_rcm_00_common:4012', false)
        # I'll send the recipe data to your app immediately if you decide to make a purchase.
        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rcm/SP_rcm_00_common:4019', false)
        run RcmDIYbookBuySel()
    else:
        return
 
flow ChkCookingOrDIY():
    SubflowResults[14] = 0
    if (EventFlowSystemActor.MultiItemSelectIncludeEventFlowSystemActor.MultiItemSelectInclude(14811, 65534, 65534, 65534, 65534, 65534, 65534, 65534, 'cItemSelect')) or (EventFlowSystemActor.MultiItemSelectIncludeEventFlowSystemActor.MultiItemSelectInclude(14816, 65534, 65534, 65534, 65534, 65534, 65534, 65534, 'cItemSelect')):
        run CookingRecipeBook()
        EventFlowSystemActor.ExitFlowchartEventFlowSystemActor.ExitFlowchart()
 
flow CookingRecipeBook():
    SubflowResults[14] = 1
    # This is a digital book filled with food and drink recipes!__ ...recipes!__ And it's called… <125:0:0000>!
    MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rcm/SP_rcm_00_common:4001', false)
    if not System.EventFlags['cPlayer:MainmenuRecipe_v2']:
        if EventFlowSystemActor.IsMyVillageEventFlowSystemActor.IsMyVillage():
            # Sorry, but we can't sell you food or drink recipes until you have the DIY Recipes+ app upgrade. To get the app upgrade, you have to redeem Nook Miles…
            MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rcm/SP_rcm_00_common:4021', false)
        else:
            # Sorry, but we can only sell food and drink recipes to folks that have the DIY Recipes+ app upgrade. If you want the upgrade, you'll need to visit the…
            MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rcm/SP_rcm_00_common:4022', false)
        run SNPC_rcm_00_Common::BuyCancelNoAskrun SNPC_rcm_00_Common::BuyCancelNoAsk()
    elif EventFlowSystemActor.MultiItemSelectIncludeEventFlowSystemActor.MultiItemSelectInclude(14811, 65534, 65534, 65534, 65534, 65534, 65534, 65534, 'cItemSelect'):
        if EventFlowSystemActor.PlayerHasCookingRecipeEventFlowSystemActor.PlayerHasCookingRecipe('DishShopRecipeBook', 65534):
            run RcmDIYbookBought()
        else:
            run RcmDIYbookBuySel()
            EventFlowSystemActor.PlayerSetCookingRecipeEventFlowSystemActor.PlayerSetCookingRecipe('DishShopRecipeBook', 65534)
            run Sub_Event113()
    elif EventFlowSystemActor.MultiItemSelectIncludeEventFlowSystemActor.MultiItemSelectInclude(14816, 65534, 65534, 65534, 65534, 65534, 65534, 65534, 'cItemSelect'):
        if EventFlowSystemActor.PlayerHasCookingRecipeEventFlowSystemActor.PlayerHasCookingRecipe('DishHarvestRecipeBook', 65534):
            # I think you've already learned all the recipes in that cookbook. If you haven't tried making them all yet, you should. Turkey Day food is always so d…
            MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rcm/SP_rcm_00_common:4020', false)
            run SNPC_rcm_00_Common::BuyCancelNoAskrun SNPC_rcm_00_Common::BuyCancelNoAsk()
        else:
            run RcmDIYbookBuySel()
            EventFlowSystemActor.PlayerSetCookingRecipeEventFlowSystemActor.PlayerSetCookingRecipe('DishHarvestRecipeBook', 65534)
            run Sub_Event113()
 
flow RcmDIYbookBought():
    # I do believe you've purchased this already, PLAYER!
    MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rcm/SP_rcm_00_common:104_02', false)
    run SNPC_rcm_00_Common::BuyCancelNoAskrun SNPC_rcm_00_Common::BuyCancelNoAsk()
 
flow RcmDIYbookBuySel():
    # Let's see… That's <90:24:0000>. What do you think?
    MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rcm/SP_rcm_00_common:104', false)
    switch EventFlowSystemActor.GeneralTalkChoice3EventFlowSystemActor.GeneralTalkChoice3():
        case 0:
            run SNPC_rcm_00_Common::Rcm_Common_BuyCheckUIrun SNPC_rcm_00_Common::Rcm_Common_BuyCheckUI()
            System.EventFlags['cPlayerTemp:RcmBoughtGrocery'] = true
            EventFlowSystemActor.UIShopBuyDisappearEventFlowSystemActor.UIShopBuyDisappear()
            if (not EventFlowSystemActor.NetIsConnectedEventFlowSystemActor.NetIsConnected()) and (EventFlowSystemActor.ShopLevelEventFlowSystemActor.ShopLevel() != `InResServiceTent`):
                MainNpc.NpcMoveToPlayerMainNpc.NpcMoveToPlayer()
            Player.PlayerChangeStateDemoTalkPlayer.PlayerChangeStateDemoTalk()
            Player.TurnBodyPlayer.TurnBody(0, 0.0)
            Player.PlayerWaitTurnPlayer.PlayerWaitTurn()
            MainNpc.SmartPhoneMainNpc.SmartPhone(0)
            if SubflowResults@2[14] == 0:
                # OK, time to send the recipes from "<125:0:0000>" to your phone…
                MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rcm/SP_rcm_00_common:107_01', true)
            else:
                # OK, time to send the recipes from "<125:0:0000>" to your phone…
                MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rcm/SP_rcm_00_common:4002', true)
            EventFlowSystemActor.WaitFrameEventFlowSystemActor.WaitFrame(15)
            Player.SmartPhonePlayer.SmartPhone(0)
            fork:
                branch:
                    Player.SmartPhonePlayer.SmartPhone(4)
                branch:
                    MainNpc.CharacterEmoticonActionMainNpc.CharacterEmoticonAction('Smiling', true, '', 30, false)
            EventFlowSystemActor.WaitFrameEventFlowSystemActor.WaitFrame(20)
            MainNpc.CharacterEmoticonActionMainNpc.CharacterEmoticonAction('EmotEnd', true, '', 30, false)
            MainNpc.SmartPhoneMainNpc.SmartPhone(4)
            EventFlowSystemActor.WaitFrameEventFlowSystemActor.WaitFrame(30)
            MainNpc.SmartPhoneSEMainNpc.SmartPhoneSE(2, 'Phone_Sending')
            EventFlowSystemActor.WaitFrameEventFlowSystemActor.WaitFrame(30)
            Player.SmartPhoneSEPlayer.SmartPhoneSE(2, 'Phone_Recieving')
            EventFlowSystemActor.WaitFrameEventFlowSystemActor.WaitFrame(15)
            MainNpc.SmartPhoneMainNpc.SmartPhone(5)
            Player.SmartPhonePlayer.SmartPhone(5)
        case 1:
            if EventFlowSystemActor.MultiItemSelectIncludeEventFlowSystemActor.MultiItemSelectInclude(5603, 65534, 65534, 65534, 65534, 65534, 65534, 65534, 'cItemSelect'):
                # This <125:0:0000> contains simple DIY recipes that use materials you can easily obtain.
                MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rcm/SP_rcm_00_common:106_01_01', false)
entrypoint Event71:
                # I'll send the recipe data to your app immediately if you decide to make a purchase.
                MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rcm/SP_rcm_00_common:106_02', false)
                run RcmDIYbookBuySel()
            elif EventFlowSystemActor.MultiItemSelectIncludeEventFlowSystemActor.MultiItemSelectInclude(5604, 65534, 65534, 65534, 65534, 65534, 65534, 65534, 'cItemSelect'):
                # This <125:0:0000> contains recipes that require an interesting variety of materials.
                MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rcm/SP_rcm_00_common:106_01_02', false)
entrypoint Event71:
                # I'll send the recipe data to your app immediately if you decide to make a purchase.
                MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rcm/SP_rcm_00_common:106_02', false)
                run RcmDIYbookBuySel()
            else:
                run Branch_WhatIsHarvestRecipe()
        case 2:
            run SNPC_rcm_00_Common::Rcm_Groceries_Buy_Cancelrun SNPC_rcm_00_Common::Rcm_Groceries_Buy_Cancel()
 
flow Rcm_Cmn_DisableDIY():
    if EventFlowSystemActor.IsMyVillageEventFlowSystemActor.IsMyVillage():
        # You haven't attempted a DIY project here on the island yet, correct?
        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rcm/SP_rcm_00_common:104_01_01', false)
        if EventFlowSystemActor.ShopLevelEventFlowSystemActor.ShopLevel() == `InResServiceTent`:
            # Right now, the boss is offering a free DIY workshop, so please give that a try first!
            MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rcm/SP_rcm_00_common:104_01_02', false)
        else:
            # Right now, the boss is offering a free DIY workshop inside Resident Services, so please try that first!
            MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rcm/SP_rcm_00_common:104_01_03', false)
    else:
        # Oh! I'm afraid we can only sell that to customers who have the DIY app. If you'd like to learn more about DIY, you should stop by Resident Services o…
        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rcm/SP_rcm_00_common:108', false)
 
flow Root():
    run ChkCookingOrDIY()
    # "<50:3><125:0:0000>" is a digital DIY recipe book!__ ...book!__
    MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rcm/SP_rcm_00_common:105_01', false)
    if not System.EventFlags['cPlayer:MainmenuRecipe']:
        run Rcm_Cmn_DisableDIY()
        run SNPC_rcm_00_Common::BuyCancelNoAskrun SNPC_rcm_00_Common::BuyCancelNoAsk()
    elif EventFlowSystemActor.MultiItemSelectIncludeEventFlowSystemActor.MultiItemSelectInclude(5603, 65534, 65534, 65534, 65534, 65534, 65534, 65534, 'cItemSelect'):
        if EventFlowSystemActor.PlayerHasCraftRecipeEventFlowSystemActor.PlayerHasCraftRecipe('DIYbook1', 65534):
            run RcmDIYbookBought()
        else:
            run RcmDIYbookBuySel()
            EventFlowSystemActor.PlayerSetCraftRecipeEventFlowSystemActor.PlayerSetCraftRecipe('DIYbook1', 65534)
            run Event28()
    elif not EventFlowSystemActor.MultiItemSelectIncludeEventFlowSystemActor.MultiItemSelectInclude(5604, 65534, 65534, 65534, 65534, 65534, 65534, 65534, 'cItemSelect'):
        run Branch_ChkHarvestRecipe()
    elif EventFlowSystemActor.PlayerHasCraftRecipeEventFlowSystemActor.PlayerHasCraftRecipe('DIYbook2', 65534):
        run RcmDIYbookBought()
    else:
        run RcmDIYbookBuySel()
        EventFlowSystemActor.PlayerSetCraftRecipeEventFlowSystemActor.PlayerSetCraftRecipe('DIYbook2', 65534)
        run Event28()
 
local flow Sub_Event113():
    # We're done!<10:4> We hope you enjoy making food and drinks even more with all those new recipes!__ ...recipes!__
    MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rcm/SP_rcm_00_common:4003', false)
entrypoint Event50:
    fork:
        branch:
            MainNpc.SmartPhoneMainNpc.SmartPhone(1)
        branch:
            EventFlowSystemActor.WaitFrameEventFlowSystemActor.WaitFrame(15)
            Player.SmartPhonePlayer.SmartPhone(1)
    System.EventFlags['cPlayerTemp:RcmBoughtGrocery'] = true
    # Anything else look interesting?
    MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rcm/SP_rcm_00_common:092', false)
    if EventFlowSystemActor.ShopLevelEventFlowSystemActor.ShopLevel() != `InResServiceTent`:
        Player.TurnBodyPlayer.TurnBody(13, 0.0)
        Player.PlayerWaitTurnPlayer.PlayerWaitTurn()
    run SNPC_rcm_00_Common::Rcm_Common_BuyAgain2run SNPC_rcm_00_Common::Rcm_Common_BuyAgain2()
 
