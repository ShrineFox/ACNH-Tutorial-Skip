flow AlreadyFenceUnlock():
    if System.EventFlags['cLand:RcmImmQuestRunning']:
        # I'm in contact with some folks who are very interested in moving to this island, so I'm busy with prep work. In fact, there's so much interest that I…
        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:162', false)
    elif System.EventFlags['cPlayer:PlayerProducedByPlayerMoving']:
        # I can't think of any pressing business for you to attend to! Why not enjoy some Nook Shopping or redeem some miles? I'd like you to spend your time a…
        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:182', false)
    else:
        # Your home is built, so right now… you don't really have any pressing business to attend to! Maybe enjoy some Nook Shopping or redeem some miles? I'd …
        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:160', false)
 
flow Connect_DayOnce():
    if (not System.EventFlags['cPlayerTemp:RcoTentAskedHintTmp']) and (not ((System.EventFlags['cPlayer:MakeVillagePlayerFlag']) and (System.EventFlags['cLand:RcmImmQuestRunning']))):
        # Yes, yes…that IS the question…
        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:101', false)
        System.EventFlags['cPlayerTemp:RcoTentAskedHintTmp'] = true
 
flow PlayerMovingJump_MainP():
    if not System.EventFlags['cLand:RcmImmQuestComplete']:
        if System.EventFlags['cLand:RcmImmQuestRunning']:
            run SNPC_rco_53_MigrantsQuest::Rootrun SNPC_rco_53_MigrantsQuest::Root()
        elif not System.EventFlags['cPlayer:MainmenuRecipe']:
            run Rco_Hint_AboutDIYWS()
        elif EventFlowSystemActor.MuseumLevelEventFlowSystemActor.MuseumLevel() == `BlathersNotMovedIn`:
            run Rco_Hint_AboutSetMuseumTent()
        elif EventFlowSystemActor.PlayerHouseLevelEventFlowSystemActor.PlayerHouseLevel() in (`Homeless`, `PlacedTent`):
            run Rco_Hint_AboutSetMuseumTent()
        else:
            run Rco_Hint_AfterBuildHouse()
    elif System.EventFlags['cLand:Plorogue4BuiltMuseum']:
        # We've done everything to get the homes ready for new residents, so nothing springs to mind right now…
        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_05_MigrantsQuest:151', false)
        switch EventFlowSystemActor.RandomChoiceExcludePrevious3EventFlowSystemActor.RandomChoiceExcludePrevious3(3, true):
            case 0:
                # I promise to do my part to welcome new residents as soon as possible.
                MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_05_MigrantsQuest:152_01', false)
                # By the way, I plan on letting the island know about folks moving in or out during my island broadcasts. However, once I know who will move into a cer…
                MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_05_MigrantsQuest:152_02', false)
            case 1:
                if System.EventFlags['cPlayer:ImmQGetQuestPrize']:
                    # If you're out of things to do, you could try using the fencing I gave you. Set it up around your home! If you place fencing pieces next to each other…
                    MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_05_MigrantsQuest:153_01', false)
                else:
                    # I'll send my thank-you gift by mail, and I do think you'll like it! It might show up in your mailbox as soon as tomorrow, so keep an eye out for it!
                    MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_05_MigrantsQuest:153_02', false)
            case 2:
                if SubflowResults@2[15] == 0:
                    # I'm sure you've gotten used to living here by now, so I want you to enjoy your time doing what you like.
                    MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_05_MigrantsQuest:154_02', false)
                else:
                    # If you have the time, I'd be honored if you'd join our celebration ceremony!
                    MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_05_MigrantsQuest:154_01', false)
    else:
        run Rco_Hint_AboutSetMuseumTent()
 
flow PlayerMovingJump_SubP():
    if not System.EventFlags['cLand:RcmImmQuestComplete']:
        run AlreadyFenceUnlock()
    elif System.EventFlags['cPlayer:ObjRcoMachineHeardFenceRecipe']:
        run AlreadyFenceUnlock()
    else:
        # Ah! Here's something. Did you know you can now redeem miles at the Nook Stop for fencing recipes? You can use fencing to surround your home, parcel o…
        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:163', false)
        System.EventFlags['cPlayer:ObjRcoMachineHeardFenceRecipe'] = true
 
flow Rco_Hint_AboutDIYWS():
    # Ah! I've got just the thing. You have yet to attend one of my DIY workshops, hm? Once you get going with DIY, you'll really open some new doors. I da…
    MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:102', false)
    System.EventFlags['cPlayer:RcoTentEnableDIYtrial'] = true
 
flow Rco_Hint_AboutLoan():
    if System.EventFlags['cPlayer:RcoPaid1stCharge']:
        switch EventFlowSystemActor.PlayerHouseLevelEventFlowSystemActor.PlayerHouseLevel():
            case `PlacedTent`:
                if System.EventFlags['cHouse:HouseOrder1']:
                    # Well, your lovely future home is already under construction, so… perhaps it's time to start thinking about furnishings, hm? May I humbly suggest chec…
                    MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:109', false)
                else:
                    # RANDOM: Well, since you've already paid off you… // Perhaps the construction of a new home … // Well, did you know that owning a home m…
                    MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:108', false)
            case `BaseHouse`, `HouseExpansion1`, `BackRoom`, `LeftRoom`, `RightRoom`, `SecondFloor`, `Basement`:
                if not System.EventFlags['cPlayer:PlayerProducedByPlayerMoving']:
                    run Rco_Hint_AfterBuildHouse()
                elif System.EventFlags['cLand:PlayerMovingEnableShopMaterialCollect']:
                    run Rco_Hint_AfterBuildHouse()
                else:
                    # Have you taken the time to sort through your belongings since you moved here, PLAYER? Should you need anything for your new life here, may I humbly s…
                    MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:183', false)
            default:
                return
    else:
        # Well…I don't mean to rush you, but there is the small matter of your move-in fees… Putting in some work to chip away at those is always time well spe…
        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:106', false)
        # RANDOM: After all, you can satisfy the loan wit… // In the Nook Miles app, you'll find info… // Remember, you'll get a notification rig… // Ah, but you could probably use some sug… // And did you know that you can earn mile… // Of course, a good way to earn a lot of … // Of course, if you're looking for an eas… // Now, if you need some ideas about how t… // And if you're looking for a hint about …
        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:107', false)
 
flow Rco_Hint_AboutRemakeWS():
    if System.EventFlags['cPlayer:RcoRemakeTrialOngoing']:
        # <50:3>PLAYER, you're already registered for my customization workshop! Ask me "About that workshop..." if you're curious what to do next for that wor…
        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_00_Common:902', false)
    else:
        # I'm looking for folks to participate in a customization workshop. Learning how to customize your creations will make DIY even more fun, so I hope you…
        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_00_Common:901', false)
 
flow Rco_Hint_AboutSetMuseumTent():
    if not EventFlowSystemActor.MuseumDonationNumCheckEventFlowSystemActor.MuseumDonationNumCheck(5):
        if System.EventFlags['cPlayer:MakeVillagePlayerFlag']:
            # Well, this island is a diverse habitat for many interesting creatures, you know. Other than us! Oho… Yes, yes…you can catch all kinds of insects and …
            MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:103', false)
        else:
            run Rco_Hint_AboutLoan()
    elif not System.EventFlags['cLand:Plorogue4BuiltMuseum']:
        if EventFlowSystemActor.HasTargetItemEventFlowSystemActor.HasTargetItem(2755, 1):
            # I've got just the thing for you! My good friend Blathers will be joining us on ISLAND. Would you be so kind as to stake out a small area for him to g…
            MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:104', false)
        else:
            run Rco_Hint_AboutLoan()
    elif System.EventFlags['cPlayer:RcoHeardThanksForBuiltOwlTent']:
        run Rco_Hint_AboutLoan()
    else:
        System.EventFlags['cPlayer:RcoHeardThanksForBuiltOwlTent'] = true
        # By the way, thank you so much for finding a place for Blathers to set up. Ah, but you're looking for a practical suggestion, hm?
        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:105', false)
        run Rco_Hint_AboutLoan()
 
flow Rco_Hint_AfterBuildHouse():
    if not System.EventFlags['cPlayer:RcmTookQuestReq']:
        # Ah, this is good timing, actually. I've been meaning to talk to you about Timmy's shop. Or rather…I've been meaning to point you in Timmy's direction…
        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:130', false)
    elif System.EventFlags['cPlayer:Prologue4RcmGetTent']:
        # I should thank you for gathering all of those materials for the shop. You're quite resourceful! Maybe I should be asking YOU for advice on how to bui…
        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:150', false)
    else:
        # I must thank you for offering to help gather materials for the new shop. That's very generous!
        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:140', false)
        if (not EventFlowSystemActor.HasKindItemEventFlowSystemActor.HasKindItem('cKind', 'Axe', '')) and (not EventFlowSystemActor.HasTargetItemEventFlowSystemActor.HasTargetItem(2502, 1)):
            # Ah, but you're looking for practical advice, hm? Well, it seems you could be in the market for a new axe, and we're selling a <item>flimsy axe right …
            MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:140_01', false)
            if EventFlowSystemActor.ShoppingCapacityEventFlowSystemActor.ShoppingCapacity('cItemName', 2502):
                # Ah! That reminds me… I picked up a <item>stone while out for a stroll. Perhaps you can make something of it!
                MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:140_02', false)
                MainNpc.SetDeliveryItemAtRandomMainNpc.SetDeliveryItemAtRandom(2502, true, 'cVillageRemakePattern', 0)
                MainNpc.NpcDeliveryMainNpc.NpcDelivery(1, 'Default')
                # Why don't you see if you can do something with them, hm? That <item>flimsy axe is not far out of reach!
                MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:140_03', false)
 
flow Rco_Hint_Complete():
    # I can't think of any more advice to give you, PLAYER! You've accomplished so much! I am sure you can find your own ways of having fun and living your…
    MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_00_Common:900', false)
 
flow Rco_Hint_WaitingInvite1stCamper():
    switch System.EventFlags['cPlayer:IslandDevQuestTalkAboutFirstCamper']:
        case 0, 1:
            # Today we have our first guest over at the campsite! <50:3>PLAYER, if you have time, or even if you don't have time, make time, and go check in on our…
            MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_07_IslandDevelopment:351', false)
 
flow Rco_Hint_WaitingOpenCampSite():
    if (not System.EventFlags['cPlayer:EnableDiyRemake']) and (EventFlowSystemActor.RandomChoiceExcludePrevious2EventFlowSystemActor.RandomChoiceExcludePrevious2(2, true) != 0):
        # I'm looking for folks to participate in a customization workshop. Learning how to customize your creations will make DIY even more fun, so I hope you…
        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_00_Common:901', false)
    elif System.EventFlags['cPlayer:IslandDevQuestTalkAfterBuildCamp']:
        switch EventFlowSystemActor.RandomChoiceExcludePrevious3EventFlowSystemActor.RandomChoiceExcludePrevious3(3, true):
            case 0:
                if System.EventFlags['cLand:CampSiteBuiltToday']:
                    # I managed to get the campsite open, but I knew it'd be too much to expect a visitor right away.
                    MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_07_IslandDevelopment:163_01_02', false)
                    # What we need is for visitors to be completely wowed by the wonders of life on our island. I'd appreciate anything you can do to help improve the isla…
                    MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_07_IslandDevelopment:163_02', false)
                else:
                    # Keep an eye on our campsite. Where there's a tent, there's bound to be a visitor, hm? And when you see a visitor, be a good host and work that famous…
                    MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_07_IslandDevelopment:164', false)
            case 1:
                # Keep an eye on our campsite. Where there's a tent, there's bound to be a visitor, hm? And when you see a visitor, be a good host and work that famous…
                MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_07_IslandDevelopment:164', false)
            case 2:
                # Our campsite will no doubt draw some interesting visitors.
                MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_07_IslandDevelopment:162_01_02', false)
                # If visitors are even the least bit interested in ISLAND, I'll work my famous Tom Nook magic… I'm sure I can persuade them to make permanent plans for…
                MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_07_IslandDevelopment:162_02', false)
    else:
        switch EventFlowSystemActor.RandomChoiceExcludePrevious3EventFlowSystemActor.RandomChoiceExcludePrevious3(3, true):
            case 0:
                # I'll do my best to have the campsite up and running by tomorrow, but… it might be too much to wish for a visitor on opening day.
                MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_07_IslandDevelopment:163_01_01', false)
                # What we need is for visitors to be completely wowed by the wonders of life on our island. I'd appreciate anything you can do to help improve the isla…
                MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_07_IslandDevelopment:163_02', false)
            case 1:
                # Once the campsite is open, we can expect to see some new faces!
                MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_07_IslandDevelopment:162_01_01', false)
                # If visitors are even the least bit interested in ISLAND, I'll work my famous Tom Nook magic… I'm sure I can persuade them to make permanent plans for…
                MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_07_IslandDevelopment:162_02', false)
            case 2:
                if System.EventFlags['cPlayer:IslandDevQuestCampSetMySelf']:
                    # Thanks to your help, we have a place to put our new campsite…
                    MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_07_IslandDevelopment:161_01', false)
                # My plan is to open the campsite to visitors by tomorrow. Something to look forward to, hm?
                MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_07_IslandDevelopment:161_02', false)
 
flow Root():
    if not System.EventFlags['cPlayer:MakeVillagePlayerFlag']:
        run Root_SubPlayer()
    elif System.EventFlags['cLand:IslandDevQuestRunning']:
        run SNPC_rco_54_IslandDevelopment::Rootrun SNPC_rco_54_IslandDevelopment::Root()
    else:
        run Connect_DayOnce()
        if not System.EventFlags['cLand:ImmQClearNextDay']:
            run PlayerMovingJump_MainP()
        elif System.EventFlags['cPlayer:EnableDiyRemake']:
            if System.EventFlags['cLand:Plorogue4BuiltMuseum']:
                run Rco_Hint_Complete()
            else:
                run Rco_Hint_AboutSetMuseumTent()
        elif System.EventFlags['cPlayer:RcoEnableRemakeTrial']:
            run Rco_Hint_AboutRemakeWS()
        else:
            run PlayerMovingJump_MainP()
 
flow Root_SubPlayer():
    run Connect_DayOnce()
    switch EventFlowSystemActor.PlayerHouseLevelEventFlowSystemActor.PlayerHouseLevel():
        case `Homeless`:
            if System.EventFlags['cPlayer:NotBuilt2PMyHomeAfterMoving']:
                # It occurs to me, PLAYER… Have you settled on a place to live? A spot for your tent? Hm? You're free to live the way you like, of course. But there ar…
                MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:181', false)
            else:
                # It occurs to me, PLAYER… Have you settled on a place to live? A spot for your tent? Hm? You're free to live the way you like, of course. But there ar…
                MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_03_PcHouseTent:110', false)
        case `PlacedTent`:
            if System.EventFlags['cPlayer:MainmenuRecipe']:
                run Rco_Hint_AboutLoan()
            else:
                run Rco_Hint_AboutDIYWS()
        case `BaseHouse`, `HouseExpansion1`, `BackRoom`, `LeftRoom`, `RightRoom`, `SecondFloor`, `Basement`:
            if not System.EventFlags['cPlayer:MainmenuRecipe']:
                run Rco_Hint_AboutDIYWS()
            elif not System.EventFlags['cLand:ImmQClearNextDay']:
                run PlayerMovingJump_SubP()
            elif System.EventFlags['cPlayer:EnableDiyRemake']:
                run Rco_Hint_Complete()
            elif System.EventFlags['cPlayer:RcoEnableRemakeTrial']:
                run Rco_Hint_AboutRemakeWS()
            else:
                run PlayerMovingJump_SubP()
 
