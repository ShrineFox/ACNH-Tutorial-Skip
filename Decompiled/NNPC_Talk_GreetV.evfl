flow GreetV_Again1():
    MainNpc.NpcSelectMessage('cWildCard', '', '', '', 'TalkNNpc/B1_Bo/Greet/BO_GreetV_Again1', '', '', '')
 
flow GreetV_Again2():
    MainNpc.NpcSelectMessage('cWildCard', '', '', '', 'TalkNNpc/B1_Bo/Greet/BO_GreetV_Again2', '', '', '')
 
flow GreetV_Field1():
    switch MainNpc.EnvWeatherNNpcTalkCustom():
        case `Fine`:
            MainNpc.NpcSelectMessage('cWildCard', 'cFineWeather', '', '', 'TalkNNpc/B1_Bo/Greet/BO_GreetV_Field1', '', '', '')
        case `Cloudy`:
            MainNpc.NpcSelectMessage('cWildCard', 'cCloudWeather', '', '', 'TalkNNpc/B1_Bo/Greet/BO_GreetV_Field1', '', '', '')
        case `Rain`:
            MainNpc.NpcSelectMessage('cWildCard', 'cRainWeather', '', '', 'TalkNNpc/B1_Bo/Greet/BO_GreetV_Field1', '', '', '')
        case `HeavyRain`:
            MainNpc.NpcSelectMessage('cWildCard', 'cRainWeather', 'cHardRainWeather', '', 'TalkNNpc/B1_Bo/Greet/BO_GreetV_Field1', '', '', '')
        case `Snow`:
            MainNpc.NpcSelectMessage('cWildCard', 'cSnowWeather', '', '', 'TalkNNpc/B1_Bo/Greet/BO_GreetV_Field1', '', '', '')
        case `HeavySnow`:
            MainNpc.NpcSelectMessage('cWildCard', 'cSnowWeather', 'cHardSnowWeather', '', 'TalkNNpc/B1_Bo/Greet/BO_GreetV_Field1', '', '', '')
        case `Blossom`:
            MainNpc.NpcSelectMessage('cWildCard', 'cFineWeather', 'cBlossomShower', '', 'TalkNNpc/B1_Bo/Greet/BO_GreetV_Field1', '', '', '')
 
flow GreetV_XX2():
    switch MainNpc.EnvWeatherNNpcTalkCustom():
        case `Fine`:
            MainNpc.NpcSelectMessage('cWildCard', 'cFineWeather', '', '', 'TalkNNpc/B1_Bo/Greet/BO_GreetV_Fine2', '', '', '')
        case `Cloudy`:
            MainNpc.NpcSelectMessage('cWildCard', 'cCloudWeather', '', '', 'TalkNNpc/B1_Bo/Greet/BO_GreetV_Fine2', '', '', '')
        case `Rain`:
            MainNpc.NpcSelectMessage('cWildCard', 'cRainWeather', '', '', 'TalkNNpc/B1_Bo/Greet/BO_GreetV_Rain2', '', '', '')
        case `HeavyRain`:
            MainNpc.NpcSelectMessage('cWildCard', 'cRainWeather', 'cHardRainWeather', '', 'TalkNNpc/B1_Bo/Greet/BO_GreetV_Rain2', '', '', '')
        case `Snow`:
            MainNpc.NpcSelectMessage('cWildCard', 'cSnowWeather', '', '', 'TalkNNpc/B1_Bo/Greet/BO_GreetV_Snow2', '', '', '')
        case `HeavySnow`:
            MainNpc.NpcSelectMessage('cWildCard', 'cSnowWeather', 'cHardSnowWeather', '', 'TalkNNpc/B1_Bo/Greet/BO_GreetV_Snow2', '', '', '')
        case `Blossom`:
            MainNpc.NpcSelectMessage('cWildCard', 'cFineWeather', 'cBlossomShower', '', 'TalkNNpc/B1_Bo/Greet/BO_GreetV_Fine2', '', '', '')
 
flow Root():
    if MainNpc.EventFlags['cNpcMemory:ContinuousTalkCount'] >= 1:
        if MainNpc.EventFlags['cNpcMemory:ContinuousTalkCount'] < 4:
            run GreetV_Again1()
        else:
            MainNpc.EventFlags['cNpcMemory:Again2Count'] += 1
            run GreetV_Again2()
    elif EventFlowSystemActor.SystemCheckNowStage('cTalkingNpcHouse'):
        if MainNpc.EventFlags['cNpcMemory:TalkCountInNpcHouseToday'] < 1:
            run NNPC_Talk_Greet::Greet_House1run NNPC_Talk_Greet::Greet_House1()
        else:
            run NNPC_Talk_Greet::Greet_House2run NNPC_Talk_Greet::Greet_House2()
    elif MainNpc.ContinuousNpcTalkCount(1):
        run GreetV_XX2()
    else:
        run GreetV_Field1()
 
