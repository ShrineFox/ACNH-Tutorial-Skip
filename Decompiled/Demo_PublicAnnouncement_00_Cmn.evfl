flow NewYearEveHurry():
    # Good evening! There's a Countdown event for New Year's Eve in the plaza right now!<10:7:00d20000> The new year is only a few moments away, so head do…
    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:007_02', false)
 
flow Rco_EndMess():
    if SubflowResults@4[4] in (1, 2, 3):
        # RANDOM: **That's all from me. I do hope you all… // **That's all from me. Time for you all …
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_00_Rco:901', true)
 
flow Root():
    run Demo_PublicAnnouncement_20_CmnGreetChk::Rootrun Demo_PublicAnnouncement_20_CmnGreetChk::Root()
    run Demo_PublicAnnouncement_25_CmnNewsGreet::Rootrun Demo_PublicAnnouncement_25_CmnNewsGreet::Root()
    run Demo_PublicAnnouncement_26_CmnNewsBday::Rootrun Demo_PublicAnnouncement_26_CmnNewsBday::Root()
    if SubflowResults@2[23] == 0:
        run Demo_PublicAnnouncement_27_CmnNews_PreEvent::Rootrun Demo_PublicAnnouncement_27_CmnNews_PreEvent::Root()
    if SubflowResults@4[4] == 0:
        if SubflowResults@2[0] == 0:
            switch SubflowResults@6[13]:
                case 0:
                    run Demo_PublicAnnouncement_40_CmnNoNews::Rootrun Demo_PublicAnnouncement_40_CmnNoNews::Root()
                case 1:
                    run Demo_PublicAnnouncement_40_CmnNoNews::Rootrun Demo_PublicAnnouncement_40_CmnNoNews::Root()
                    run Demo_PublicAnnouncement_03_Rco_Once::TownNews_Rco_HouseBuildrun Demo_PublicAnnouncement_03_Rco_Once::TownNews_Rco_HouseBuild()
                case 2:
                    # **Now then, I only have one piece of news for today…**
                    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:210_01', false)
                    run Demo_PublicAnnouncement_03_Rco_Once::TownNews_Rco_RemakeWorkshoprun Demo_PublicAnnouncement_03_Rco_Once::TownNews_Rco_RemakeWorkshop()
                case 3:
                    # **There's only a single announcement today, but it's a big one. Yes, yes!**
                    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:161_02', false)
                    run Demo_PublicAnnouncement_03_Rco_Once::TownNews_Rco_OfficeRenualrun Demo_PublicAnnouncement_03_Rco_Once::TownNews_Rco_OfficeRenual()
                case 4:
                    # **Now then, I'm sure you all can guess what I'm going to tell you next… It's today's big announcement!**
                    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:163_00_01', false)
                    run Demo_PublicAnnouncement_03_Rco_Once::TownNews_Rco_OfficeOpenrun Demo_PublicAnnouncement_03_Rco_Once::TownNews_Rco_OfficeOpen()
                case 5:
                    # **As you can imagine, I'll have my paws full today with the Resident Services construction. I'll be getting back to that now. Have a good day, everyo…
                    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:003_03', false)
        elif not System.EventFlags['cLand:TkkFirstLiveReserved']:
            run Demo_PublicAnnouncement_40_CmnNoNews::Rootrun Demo_PublicAnnouncement_40_CmnNoNews::Root()
        elif System.EventFlags['cPlayer:TkkFirstLiveJoined']:
            run Demo_PublicAnnouncement_40_CmnNoNews::Rootrun Demo_PublicAnnouncement_40_CmnNoNews::Root()
        else:
            # Now… Today, I have one very special announcement.
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:301_02', false)
            run Demo_PublicAnnouncement_13_Sza_Once::TownNews_KK1stLiverun Demo_PublicAnnouncement_13_Sza_Once::TownNews_KK1stLive()
    else:
        if SubflowResults@2[15] == 0:
            if SubflowResults@2[0] == 0:
                # **Now for today's news…**
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_00_Rco:021', false)
            else:
                # Now for today's announcements…
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:021', false)
        else:
            if SubflowResults@2[0] == 0:
                # **Now for today's other news…**
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_00_Rco:022', false)
            else:
                # Now for additional announcements…
                MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:022', false)
        run Demo_PublicAnnouncement_31_CmnNewsRegulation::Rootrun Demo_PublicAnnouncement_31_CmnNewsRegulation::Root()
        run Demo_PublicAnnouncement_13_Sza_Once::TownNews_StartKppTourrun Demo_PublicAnnouncement_13_Sza_Once::TownNews_StartKppTour()
        run Demo_PublicAnnouncement_32_CmnNewsMoveIn::Rootrun Demo_PublicAnnouncement_32_CmnNewsMoveIn::Root()
        run Demo_PublicAnnouncement_33_CmnNewsFacilities::Rootrun Demo_PublicAnnouncement_33_CmnNewsFacilities::Root()
        run Demo_PublicAnnouncement_34_CmnNewsMoveOut::Rootrun Demo_PublicAnnouncement_34_CmnNewsMoveOut::Root()
        if SubflowResults@2[0] == 0:
            switch SubflowResults@5[13]:
                case 0:
                    if SubflowResults@4[16] == 0:
                        run Rco_EndMess()
                    else:
                        run Demo_PublicAnnouncement_35_CmnNewsEventNotice::Rootrun Demo_PublicAnnouncement_35_CmnNewsEventNotice::Root()
                        run Rco_EndMess()
                case 1:
                    run Demo_PublicAnnouncement_03_Rco_Once::TownNews_Rco_HouseBuildrun Demo_PublicAnnouncement_03_Rco_Once::TownNews_Rco_HouseBuild()
                case 2:
                    # **Alright. It's time for our final announcement of the day…**
                    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:210', false)
                    run Demo_PublicAnnouncement_03_Rco_Once::TownNews_Rco_RemakeWorkshoprun Demo_PublicAnnouncement_03_Rco_Once::TownNews_Rco_RemakeWorkshop()
                    run Rco_EndMess()
                case 3:
                    # **Now then… I have one more bit of important news to wrap things up.**
                    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:161_01', false)
                    run Demo_PublicAnnouncement_03_Rco_Once::TownNews_Rco_OfficeRenualrun Demo_PublicAnnouncement_03_Rco_Once::TownNews_Rco_OfficeRenual()
                    run Rco_EndMess()
                case 4:
                    # **Now then… I have one more bit of important news to wrap things up.**
                    MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_10_Rco_Once:161_01', false)
                    run Demo_PublicAnnouncement_03_Rco_Once::TownNews_Rco_OfficeOpenrun Demo_PublicAnnouncement_03_Rco_Once::TownNews_Rco_OfficeOpen()
        elif not System.EventFlags['cLand:TkkFirstLiveReserved']:
            run Skip_TkkFirstLive()
        elif System.EventFlags['cPlayer:TkkFirstLiveJoined']:
            run Skip_TkkFirstLive()
        else:
            # Now, let's see… To wrap up today's broadcast, I have a very special announcement.
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_11_Sza_Once:301_01', false)
            run Demo_PublicAnnouncement_13_Sza_Once::TownNews_KK1stLiverun Demo_PublicAnnouncement_13_Sza_Once::TownNews_KK1stLive()
 
flow Skip_TkkFirstLive():
    if SubflowResults@8[21] not in (0, 1, 2, 3, 4, 5, 6):
        # That's all from me. I hope everyone has a wonderful new year!
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:902', false)
    elif EventFlowSystemActor.EnvSameDate('cEndOfTheYear', 'cGrowUpTime'):
        # To wrap things up today, I have an event announcement to make!
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:007_05', false)
        if EventFlowSystemActor.EnvHourCompare(2, -1, true, false) == 0:
            # We're ringing in the new year in the plaza! Fireworks will be going until 2 AM, so come and enjoy the show!
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:007_03', false)
        else:
            # We're ringing in the new year! The Countdown and fireworks may be over, but you can still buy New Year's goodies in the plaza until 5 AM.
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:007_04', false)
        # That's all from me. I hope everyone has a wonderful new year!
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:902', false)
    elif SubflowResults@9[16] == 0:
        if SubflowResults@4[4] in (1, 2, 3):
            # RANDOM: That's all for now. I hope you all enjo… // That's all for today… Have a fun day ou… // And with that, I'll get back to work su…
            MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:901', true)
    else:
        run Demo_PublicAnnouncement_35_CmnNewsEventNotice::Rootrun Demo_PublicAnnouncement_35_CmnNewsEventNotice::Root()
        # RANDOM: That's all for now. I hope you all enjo… // That's all for today… Have a fun day ou… // And with that, I'll get back to work su…
        MainNpc.OpenMessageWindow('TalkSNpc/PublicAnnouncement/SP_PublicAnnouncement_01_Sza:901', true)
 
