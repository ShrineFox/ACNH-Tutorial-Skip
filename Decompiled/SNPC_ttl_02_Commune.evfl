flow ReturnSel():
	# Anything else you need?
	MainNpc.OpenMessageWindow('TalkSNpc/ttl/SP_ttl_02_Commune:003', false)
	run Event3()

flow ReturnSel0():
	# Anything else I can help you with?
	MainNpc.OpenMessageWindow('TalkSNpc/ttl/SP_ttl_02_Commune:1014', false)
	run Event28()

flow Root():
	run Ttl_First()
	if EventFlowSystemActor.EnvWeatherArea() == `cWeatherArea_North`:
		if EventFlowSystemActor.EnvCheckBetweenDate(9, 1, 12, 10, 'cLastGrowUpTime'):
			run Sub_Event51()
		else:
			run Sub_grp_Event16()
	else:
		if EventFlowSystemActor.EnvCheckBetweenDate(3, 1, 6, 10, 'cLastGrowUpTime'):
			run Sub_Event51()
		else:
			run Sub_grp_Event16()

local flow Sub_Event48():
	# So how can ol' Cornimer be of service today?
	MainNpc.OpenMessageWindow('TalkSNpc/ttl/SP_ttl_02_Commune:1012', false)
	run Sub_grp_Event52()

local flow Sub_Event51():
	if System.EventFlags['cPlayer:TtlTodayFirstTalkFlag']:
		run Sub_grp_Event16()
	else:
		run TtlB()

local flow Sub_grp_Event16():
	if EventFlowSystemActor.EnvHourCompare(23, -1, true, true) in (0, 1):
		if System.EventFlags['cPlayer:TtlTodayTalkFlag']:
			# Hey there, sprout! Need something?
			MainNpc.OpenMessageWindow('TalkSNpc/ttl/SP_ttl_02_Commune:002', false)
		else:
			System.EventFlags['cPlayer:TtlTodayTalkFlag'] = true
			# Well, well, well… You're looking spry, PLAYER. Whaddaya need?
			MainNpc.OpenMessageWindow('TalkSNpc/ttl/SP_ttl_02_Commune:001', false)
entrypoint Event3:
		switch EventFlowSystemActor.GeneralTalkChoice3():
			case 0:
				EventFlowSystemActor.UIItemSelectWindowHandling('cMoveToChest', 65534, '', '', 'cPutInStorage', false)
				EventFlowSystemActor.UISelectedItemMoveChest()
				run ReturnSel()
			case 1:
				EventFlowSystemActor.UIStorageHandling()
				run ReturnSel()
			case 2:
				# If you say so, sprout! Heh heh HOORF!
				MainNpc.OpenMessageWindow('TalkSNpc/ttl/SP_ttl_02_Commune:004', false)
	else:
		# I hate to break it to ya, sprout, but I'm taking the day off. I'll be working tomorrow though.
		MainNpc.OpenMessageWindow('TalkSNpc/ttl/SP_ttl_02_Commune:1001', false)

local flow Sub_grp_Event26():
	if EventFlowSystemActor.GeneralTalkChoice2() == 0:
		MainNpc.DecideEventReward('cDonguri')
		MainNpc.SetDeliveryItem(1, true)
		MainNpc.NpcDelivery(1, 'Default')
		System.EventFlags['cPlayer:TtlB_Acorn_Today'] = true
		run Sub_Event48()
	else:
		# No, huh? Well, if you don't want an acorn, what DO you want?
		MainNpc.OpenMessageWindow('TalkSNpc/ttl/SP_ttl_02_Commune:1006', false)
		run Event28()

local flow Sub_grp_Event38():
	if EventFlowSystemActor.SystemHasBaggageSpace('cPocketBag') < 1:
		# How's it going, li'l oakie? Still got that zip in your step, I see.
		MainNpc.OpenMessageWindow('TalkSNpc/ttl/SP_ttl_02_Commune:1017', false)
		run Sub_Event48()
	else:
		# Hello there! Mercy, but you're looking lively today! Here, I know you love acorns.
		MainNpc.OpenMessageWindow('TalkSNpc/ttl/SP_ttl_02_Commune:1016', false)
		run Sub_grp_Event26()

local flow Sub_grp_Event52():
	switch EventFlowSystemActor.GeneralTalkChoice3():
		case 0:
			EventFlowSystemActor.UIItemSelectWindowHandling('cMoveToChest', 65534, '', '', 'cPutInStorage', false)
			EventFlowSystemActor.UISelectedItemMoveChest()
			run ReturnSel0()
		case 1:
			EventFlowSystemActor.UIStorageHandling()
			run ReturnSel0()
		case 2:
			# If you say so, sprout! Heh heh HOORF!
			MainNpc.OpenMessageWindow('TalkSNpc/ttl/SP_ttl_02_Commune:004', false)

flow TtlB():
	if EventFlowSystemActor.EnvHourCompare(22, -1, true, true) not in (0, 1):
		# I hate to break it to ya, sprout, but I'm taking the day off. I'll be working tomorrow though.
		MainNpc.OpenMessageWindow('TalkSNpc/ttl/SP_ttl_02_Commune:1001', false)
	elif not System.EventFlags['cPlayer:TtlBFirstTalkFlag']:
		# The Acorn Legend is back! It is I, Cornimer, and the season of ME has come again! EH HEH HEH HOORF!
		MainNpc.OpenMessageWindow('TalkSNpc/ttl/SP_ttl_02_Commune:1003', false)
		System.EventFlags['cPlayer:TtlBFirstTalkFlag'] = true
		if EventFlowSystemActor.SystemHasBaggageSpace('cPocketBag') < 1:
			# So how can ol' Cornimer be of service today?
			MainNpc.OpenMessageWindow('TalkSNpc/ttl/SP_ttl_02_Commune:1012', false)
entrypoint Event28:
			switch EventFlowSystemActor.GeneralTalkChoice3():
				case 0:
					EventFlowSystemActor.UIItemSelectWindowHandling('cMoveToChest', 65534, '', '', 'cPutInStorage', false)
					EventFlowSystemActor.UISelectedItemMoveChest()
					run ReturnSel0()
				case 1:
					EventFlowSystemActor.UIStorageHandling()
					run ReturnSel0()
				case 2:
					# If you say so, sprout! Heh heh HOORF!
					MainNpc.OpenMessageWindow('TalkSNpc/ttl/SP_ttl_02_Commune:004', false)
		else:
			# You! With the space in your pockets! What makes you think you can walk around like that, all willy-nilly!
			MainNpc.OpenMessageWindow('TalkSNpc/ttl/SP_ttl_02_Commune:1004', false)
			# Acorns are wonderful, aren't they? Here! Don't say ol' Cornimer never gave you nuttin'! Heh heh HOORF!
			MainNpc.OpenMessageWindow('TalkSNpc/ttl/SP_ttl_02_Commune:1005', false)
			run Sub_grp_Event26()
	elif System.EventFlags['cPlayer:TtlTodayTalkFlag']:
		if System.EventFlags['cPlayer:TtlB_Acorn_Today']:
			# What can ol' Cornimer do for you, li'l oakie?
			MainNpc.OpenMessageWindow('TalkSNpc/ttl/SP_ttl_02_Commune:1013', false)
			run Sub_grp_Event52()
		else:
			run Sub_grp_Event38()
	else:
		System.EventFlags['cPlayer:TtlTodayTalkFlag'] = true
		if System.EventFlags['cPlayer:TtlB_Acorn_Today']:
			run Sub_Event48()
		else:
			run Sub_grp_Event38()

flow Ttl_First():
	if not System.EventFlags['cPlayer:Ttl1stmet']:
		if System.EventFlags['cPlayer:TalkTtlCommuneOpenEvent']:
			# I don't know if you caught the name earlier, but I'm Tortimer. And you are? <50:3>PLAYER? It's a pleasure to meet you, PLAYER.
			MainNpc.OpenMessageWindow('TalkSNpc/ttl/SP_ttl_02_Commune:102', false)
		else:
			# Hello there, whippersnapper! The name's Tortimer. And what might yours be? <50:3>PLAYER, eh? It's very nice to meet you, PLAYER.
			MainNpc.OpenMessageWindow('TalkSNpc/ttl/SP_ttl_02_Commune:101', false)
		# Now! Contrary to what some of the youngins might think, there's still a bit of get-up-and-go under this shell. Could a fossil run a delivery service?…
		MainNpc.OpenMessageWindow('TalkSNpc/ttl/SP_ttl_02_Commune:103', false)
		System.EventFlags['cPlayer:TtlTodayTalkFlag'] = true
		System.EventFlags['cPlayer:Ttl1stmet'] = true
		System.EventFlags['cPlayer:TtlTodayFirstTalkFlag'] = true
		EventFlowSystemActor.ExitFlowchart()
