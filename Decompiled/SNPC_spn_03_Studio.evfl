flow Enter():
    Player.PlayerDemoMove('cForward', 1)
    fork:
        branch:
            EventFlowSystemActor.EmitDoorSound('cDoorEnter')
        branch:
            EventFlowSystemActor@pl.WaitFrame(20)
            Player.CharacterEmoticonAction('Eh', true, '', 0, false)
    EventFlowSystemActor.WaitFrame(10)
    fork:
        branch:
            Player.PlayerDemoTurn('cSouth')
        branch:
            EventFlowSystemActor.WaitFrame(10)
    fork:
        branch:
            EventFlowSystemActor.WaitFrame(5)
            Player.PlayerDemoTurn('cWest')
            EventFlowSystemActor.WaitFrame(5)
            Player.PlayerMoveToTarget(false, 150.0, 193.0, 0.0, 0.0, false, '')
            Player.TurnBody(0, 0.0)
        branch:
            MainNpc.NpcAISetting(12, true)
            MainNpc.NpcEnter('Entrance', 5, 0.0)
    MainNpc.TurnBody(10, 0.0)
    EventFlowSystemActor.WaitFrame(15)
 
flow Exit():
    System.EventFlags['cPlayer:SpnPhotoStudioGuideDone'] = true
    EventFlowSystemActor.SetCatalogFlagPhotoStudioPreset()
    MainNpc.NpcChangeWaitState('cWait', '', '', '', false, true, ArgFlag0=true, ArgInt0=0, ArgStr0='')
    if (EventFlowSystemActor.TermEventNow('JuneBride', false)) and (System.EventFlags['cPlayer:CommuneIslandAvailable']):
        EventFlowSystemActor.MessageSuspend()
        EventFlowSystemActor.FadeOut('cCircle', 'cHeartWipe', 'cBlack', 1.0, 1.0, true)
        MainNpc.NpcAISetting(12, false)
        if System.EventFlags['cPlayer:SpnJuneBrideTalkEventFrag']:
            run Sub_Event0()
        else:
            System.EventFlags['cPlayer:SpnJuneBrideTalkEventFrag'] = true
            EventFlowSystemActor.StoreNormalCamera(false, '')
            Player.PlayerMoveToTarget(true, 15.0, -40.0, 0.0, 0.0, false, 'cAutoWait')
            Player.TurnBody(12, 225.0)
            EventFlowSystemActor.FadeIn(true)
            EventFlowSystemActor.SetNpcAIBlackBoardByLabel('alw', 'DemoSpeak', 1, 1)
    else:
        EventFlowSystemActor.FadeOut('cCircle', 'cCircle', 'cBlack', 1.0, 1.0, true)
        MainNpc.NpcAISetting(12, false)
        run Sub_Event0()
 
flow Root():
    if (EventFlowSystemActor.TermEventNow('JuneBride', false)) and (System.EventFlags['cPlayer:CommuneIslandAvailable']) and (not System.EventFlags['cPlayer:SpnJuneBrideTalkEventFrag']):
        Player.TurnBody(0, 0.0)
        EventFlowSystemActor.WaitFrame(10)
    else:
        run Setup()
        run Enter()
    run Talk()
    run Exit()
 
flow Setup():
    return
 
flow Spn_Explain_Again():
    # How'd I do? You need me to explain anything else?
    MainNpc.OpenMessageWindow('TalkSNpc/spn/SP_spn_02_Commune:105', false)
    run Event29()
 
flow Spn_Explain_Select():
    run Event29()
 
local flow Sub_Event0():
    EventFlowSystemActor.StoreNormalCamera(true, '')
    if System.EventFlags['cPlayer:PlayerMovingWithPFlag555']:
        System.EventFlags['cPlayer:PlayerMovingWithPFlag555'] = false
        EventFlowSystemActor.SystemReenterStage(6, 'cCircle', 'cCircle', 'cBlack', 1.0, 1.0)
    else:
        EventFlowSystemActor.FadeIn(true)
 
flow Talk():
    EventFlowSystemActor.BGMPropertyControl(174)
    if not EventFlowSystemActor.TermEventNow('JuneBride', false):
        System.EventFlags['cPlayer:SpnTodayExplainedPhotoStudio'] = true
        if System.EventFlags['cPlayer:SpnFirstTalkedAtCommuneIsland']:
            # So, you digging the Photopia vibe? Pretty groovy, right? It's like my home away from home, you know. Well…more like my home that IS my home, really… …
            MainNpc.OpenMessageWindow('TalkSNpc/spn/SP_spn_02_Commune:101', false)
        else:
            System.EventFlags['cPlayer:SpnFirstTalkedAtCommuneIsland'] = true
            System.EventFlags['cPlayer:SpnTalkAtCommuneToday'] = true
            if System.EventFlags['cPlayer:SpnTalkAtHomelandToday']:
                # Oh, hey, it's…ah…you! That person I met just today! Whose name is…PLAYER! Glad you came by for a visit! To my studio! Where I also live! How did I mi…
                MainNpc.OpenMessageWindow('TalkSNpc/spn/SP_spn_02_Commune:001_03_01', false)
            else:
                # Hey, is that <135:7:cd00> I smell? <50:3>PLAYER must be here! I'm sure glad you came to visit…but I WAS a bit surprised. Maybe I should put a bell on…
                MainNpc.OpenMessageWindow('TalkSNpc/spn/SP_spn_02_Commune:001_03_02', false)
            # Eh, it's all good. Welcome to my home AND my photo studio! I call it Photopia, 'cause it's like paradise. It's also totally free for anyone to use, a…
            MainNpc.OpenMessageWindow('TalkSNpc/spn/SP_spn_02_Commune:001_04', false)
        if EventFlowSystemActor.GeneralTalkChoice2() == 0:
            # Really? That's great! OK, you've come to the right dog. Yes, sirree! Alright, there's basically three things to worry about with pictures… the set, m…
            MainNpc.OpenMessageWindow('TalkSNpc/spn/SP_spn_02_Commune:103', false)
            # You wanna hear more details about sets, models, wardrobe or, you know, actually taking pictures?
            MainNpc.OpenMessageWindow('TalkSNpc/spn/SP_spn_02_Commune:104', false)
entrypoint Event29:
            switch EventFlowSystemActor.GeneralTalkChoice5():
                case 0:
                    # OK, there's six different rooms here, and you can set each of 'em up however you like. You can press  to change the decor in a studio, just like you…
                    MainNpc.OpenMessageWindow('TalkSNpc/spn/SP_spn_02_Commune:111', false)
                    if System.EventFlags['cPlayer:EnableDiyRemake']:
                        # And if the furniture you want is customizable, you can borrow it in any color!
                        MainNpc.OpenMessageWindow('TalkSNpc/spn/SP_spn_02_Commune:112_01', false)
                    else:
                        if System.EventFlags['cPlayer:RcoEnableRemakeTrial']:
                            # Oh yeah! That jogs a fun-run of a memory! I guess if you've gone and done Nook Inc.'s customization workshop, you can borrow stuff in other colors! G…
                            MainNpc.OpenMessageWindow('TalkSNpc/spn/SP_spn_02_Commune:112_02', false)
                    # Hm… Yep! That's everything I know about sets.
                    MainNpc.OpenMessageWindow('TalkSNpc/spn/SP_spn_02_Commune:113', false)
                    run Spn_Explain_Again()
                case 1:
                    # Now, nothin' wrong with being your own model if you're feelin' selfie-ish, but you can also invite models! In fact, you can invite up to 10 models if…
                    MainNpc.OpenMessageWindow('TalkSNpc/spn/SP_spn_02_Commune:121', false)
                    if System.EventFlags['cPlayer:EnableEmoticonUI']:
                        # Oh, one more thing! You can ask a model in the studio to strike a certain pose if you like. 'Course, you have to be able to show them what you want—l…
                        MainNpc.OpenMessageWindow('TalkSNpc/spn/SP_spn_02_Commune:122', false)
                        # Hm… Yep! That's everything I know about models.
                        MainNpc.OpenMessageWindow('TalkSNpc/spn/SP_spn_02_Commune:123', false)
                        run Spn_Explain_Again()
                    else:
                        run Spn_Explain_Again()
                case 2:
                    # You'll want your models wearing costumes that match the set, right? That's where the wardrobe comes in! Nook Shopping'll lend you clothes just like i…
                    MainNpc.OpenMessageWindow('TalkSNpc/spn/SP_spn_02_Commune:131', false)
                    # Hm… Yep! That's everything I know about wardrobe.
                    MainNpc.OpenMessageWindow('TalkSNpc/spn/SP_spn_02_Commune:132', false)
                    run Spn_Explain_Again()
                case 3:
                    # You can take pictures with  on your controller or with your NookPhone's  Camera app. Oh, but you can't use your NookPhone when you're changing stud…
                    MainNpc.OpenMessageWindow('TalkSNpc/spn/SP_spn_02_Commune:141', false)
                    if System.EventFlags['cPlayer:EnableEmoticonUI']:
                        # Oh, and if you're using the  Camera app, you can press   to signal your models that it's time to pose. If you don't know how to request a certain …
                        MainNpc.OpenMessageWindow('TalkSNpc/spn/SP_spn_02_Commune:142', false)
                        # Hm… Yep! That's everything I know about taking pictures.
                        MainNpc.OpenMessageWindow('TalkSNpc/spn/SP_spn_02_Commune:143', false)
                        run Spn_Explain_Again()
                    else:
                        run Spn_Explain_Again()
                case 4:
                    # You sure are, and don't let anybody tell you different!<10:4> Welp, feel free to use the studio anytime, bud.
                    MainNpc.OpenMessageWindow('TalkSNpc/spn/SP_spn_02_Commune:102_01_02', false)
                    if not System.EventFlags['cPlayer:SpnPhotoStudioGuideDone']:
                        # If you're all set, I'm gonna go freshen up my air. Come grab me outside if you need anything.
                        MainNpc.OpenMessageWindow('TalkSNpc/spn/SP_spn_02_Commune:102_02', true)
        else:
            # I hear ya. No need to rush into anything—my mistakes are here to be learned from! Use my pad whenever.
            MainNpc.OpenMessageWindow('TalkSNpc/spn/SP_spn_02_Commune:102_01_01', false)
            # If you're all set, I'm gonna go freshen up my air. Come grab me outside if you need anything.
            MainNpc.OpenMessageWindow('TalkSNpc/spn/SP_spn_02_Commune:102_02', true)
    elif System.EventFlags['cPlayer:CommuneIslandAvailable']:
        # This is my wedding-picture studio.<10:4> It's, uh…actually my kitchen with some set walls I put up. Let me know if you get hungry.
        MainNpc.OpenMessageWindow('TalkSNpc/spn/GEvent/SP_spn_GEvent_JuneBride:004', false)
        if System.EventFlags['cPlayer:SpnPhotoStudioGuideDone']:
            # It works pretty much exactly like my regular, not-my-kitchen studios. But if you forgot how THOSE work, which'll happen sometimes, just come find me …
            MainNpc.OpenMessageWindow('TalkSNpc/spn/GEvent/SP_spn_GEvent_JuneBride:007', false)
        else:
            System.EventFlags['cPlayer:SpnTodayExplainedPhotoStudio'] = true
            System.EventFlags['cPlayer:SpnPhotoStudioGuideDone'] = true
            # Since it's your first time in one of my studios, let me give you the rundown real quick. You can press  to change the decor in a studio, just like y…
            MainNpc.OpenMessageWindow('TalkSNpc/spn/GEvent/SP_spn_GEvent_JuneBride:005', false)
        # Oh! One thing. If you gotta take five partway through, no prob. But talk to me before you go back in, OK? Otherwise, Reese is in charge, so if you wa…
        MainNpc.OpenMessageWindow('TalkSNpc/spn/GEvent/SP_spn_GEvent_JuneBride:008', true)
        System.EventFlags['cPlayer:SpnFirstTalkedAtCommuneIsland'] = true
        System.EventFlags['cPlayer:SpnTalkAtCommuneToday'] = true
        System.EventFlags['cPlayer:PlayerPocketUIEnableInCommuneIsland'] = true
 
