flow HedgePresentSlo():
	MainNpc.NpcSetRewardRecipe(12758, false)
	MainNpc.SetDeliveryItem(1, true)
	MainNpc.NpcDelivery(1, 'Default')
	System.EventFlags['cPlayer:SloGetHedge'] = true
	# I'd be so happy if you were to use it in your own gardening pursuits.
	MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:041', false)
	System.EventFlags['cPlayer:RcoEarthDayGetHedge'] = true

flow Root():
	System.EventFlags['cPlayerTemp:ReijiTalkSceneFlag'] = true
	if EventFlowSystemActor.EnvHourCompare(23, -1, true, true) != 0:
		# Oh no! It looks like the shop is already closed for the day. And after you came all this way… Well, if you come back another time, I'll be extra happ…
		MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:054', false)
	elif not EventFlowSystemActor.IsMyVillage():
		run SNPC_slo_00_Peddling::slo_Select()
	elif System.EventFlags['cPlayer:SloTalkCommuneBeforeFlag']:
		if System.EventFlags['cPlayer:RcoEarthDayGetHedge']:
			run slo_Select()
		elif System.EventFlags['cPlayer:SloBuyCount'] < 3:
			run slo_Select()
		elif not System.EventFlags['cPlayer:SloTalkAboutHedge']:
			# <50:3>PLAYER, have I ever told you that you remind me of a radiant <135:2:cd00>? Hmm… Although, at this moment, I'm getting [a|an]<135:2:cd01> vibe. …
			MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:040', false)
			System.EventFlags['cPlayer:SloTalkAboutHedge'] = true
			if EventFlowSystemActor.SystemHasBaggageSpace('cPocketBag') < 1:
				# Oh! Your pockets are already full to the brim, my friend. Let's chat again when you've got more space.
				MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:043', false)
			else:
				run HedgePresentSlo()
		elif System.EventFlags['cPlayer:SloGetHedge']:
			run slo_Select()
		elif EventFlowSystemActor.SystemHasBaggageSpace('cPocketBag') < 1:
			run slo_Select()
		else:
			# I almost forgot, PLAYER! I've been waiting to give you this recipe for a <item>hedge. Now that you can make your own, I hope you'll use the Bells fro…
			MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:042', false)
			run HedgePresentSlo()
	elif System.EventFlags['cPlayer:TalkSloCommuneOpenEvent']:
		# Heya, heya, PLAYER! Nice to see you! I'm so happy I was able to open my shop here on this island.
		MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:001', false)
		if System.EventFlags['cPlayer:ReijiTalkBeforeFlag']:
			run Sub_Event47()
		else:
			# I sell plant seeds and starts here, and I'll buy weeds you don't need. I also plan to start a traveling weeding service!
			MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:087', false)
			# Thanks again for your business!
			MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:004', false)
			System.EventFlags['cPlayer:ReijiTalkBeforeFlag'] = true
			System.EventFlags['cPlayer:SloFirstTalkCommune'] = true
			System.EventFlags['cPlayer:SloExplainbush'] = true
			System.EventFlags['cPlayer:SloExplainVegetableSeedling'] = true
			run Sub_Event166()
	elif System.EventFlags['cPlayer:ReijiTalkBeforeFlag']:
		# Hiya! Thanks for coming all this way, PLAYER! Harvey invited me here to set up my shop!
		MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:002', false)
		run Sub_Event47()
	else:
		# Heya, heya, nice to meet you! Did Harvey invite you here too?
		MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:079', false)
		switch EventFlowSystemActor.GeneralTalkChoice2():
			case 0, 1:
				# Oh, you're from ISLAND! My good pal Timmy tells me that's a really nice place! Oh, right. I'm Leif. Really nice to meet you, PLAYER!
				MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:081', false)
				# I sell plant seeds and starts here, and I'll buy weeds you don't need. I also provide a traveling weeding service!
				MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:082', false)
				# I can definitely help make an even more beautiful island out of ISLAND!
				MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:085', false)
				# Anyway… Meeting you has been a true pleasure. I hope to see you again soon, PLAYER.
				MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:060', false)
				System.EventFlags['cPlayer:SloTalkedToday'] = true
				System.EventFlags['cPlayer:ReijiTalkBeforeFlag'] = true
				System.EventFlags['cPlayer:SloTalkCommuneBeforeFlag'] = true
				System.EventFlags['cPlayer:TalkSloCommuneOpenEvent'] = true
				System.EventFlags['cPlayer:SloExplainVegetableSeedling'] = true
				System.EventFlags['cPlayer:SloFirstTalkCommune'] = true
				System.EventFlags['cPlayer:SloExplainbush'] = true

flow Slo_Chk_PumpkinSeeding():
	if not EventFlowSystemActor.EnvCheckBetweenDate(10, 1, 10, 31, 'cLastGrowUpTime'):
		# [A|An]<125:0:0000>! A perfectly wonderful selection. And they're available in bulk. How many would you like?
		MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo:038', false)
	elif System.EventFlags['cPlayer:SloExplainPumpkinSeedingFlag']:
		# [A|An]<125:0:0000>! A perfectly wonderful selection. And they're available in bulk. How many would you like?
		MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo:038', false)
	else:
		# I'm doing a special in October. For <90:21:0000> each, you can grow your own <125:0:0200>.
		MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:047', false)
		System.EventFlags['cPlayer:SloExplainPumpkinSeedingFlag'] = true
		# I can sell them to you individually or in bulk. So, would you like to care for [a|an]<125:0:0200>?
		MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:048', false)

flow Slo_Purchase_Processing():
	EventFlowSystemActor.SetTagFromUIResult('cItemName', 0)
	EventFlowSystemActor.SetTagFromUIResult('cSloItemPrice', 0)
	EventFlowSystemActor.SetTagFromUIResult('cSloItem5Price', 1)
	if (EventFlowSystemActor.MultiKindItemSelectInclude('BushSeedling', '', '', '', '', '', '', '', 'cItemSelect')) and (System.EventFlags['cPlayer:SloExplainbush']):
		# When you raise a shrub start, it'll flower once it's in season. You could put a few starts around your home and plant flowers by them. Then you'd hav…
		MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:089', false)
		System.EventFlags['cPlayer:SloExplainbush'] = false
		if EventFlowSystemActor.SloIsWeatherBushCommune():
			if EventFlowSystemActor.EnvWeatherArea() == `cWeatherArea_North`:
				if EventFlowSystemActor.EnvCheckBetweenDate(6, 1, 9, 20, 'cGrowUpTime'):
					run Sub_Event242()
				else:
					run Sub_Event243()
			elif EventFlowSystemActor.EnvCheckBetweenDate(12, 1, 3, 20, 'cGrowUpTime'):
				run Sub_Event242()
			else:
				run Sub_Event243()
		# I sell <125:0:0200> in bulk, by the way. Would you like to raise a few?
		MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:092', false)
		run Sub_Event186()
	elif EventFlowSystemActor.MultiItemSelectInclude(13227, 3045, 2649, 3035, 3030, 3040, 65534, 65534, 'cItemSelect'):
		if System.EventFlags['cPlayer:SloExplainBuyVegetableSeedling']:
			if EventFlowSystemActor.MultiItemSelectInclude(13227, 65534, 65534, 65534, 65534, 65534, 65534, 65534, 'cItemSelect'):
				if System.EventFlags['cPlayer:SloExplainPumpkinColorFlag']:
					run Slo_Chk_PumpkinSeeding()
					run Sub_Event56()
				else:
					# <item>Pumpkins come in four colors— orange, green, yellow, and white… But you won't know what color you'll get until the <item>pumpkins grow. What an…
					MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo:197', false)
					System.EventFlags['cPlayer:SloExplainPumpkinColorFlag'] = true
					if not EventFlowSystemActor.EnvCheckBetweenDate(10, 1, 10, 31, 'cLastGrowUpTime'):
						# I sell <125:0:0200> individually or in bulk. What do you think?
						MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo:203', false)
  run Sub_Event186()
					elif System.EventFlags['cPlayer:SloExplainPumpkinSeedingFlag']:
						# I sell <125:0:0200> individually or in bulk. What do you think?
						MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo:203', false)
  run Sub_Event186()
					else:
						# In October, a special price is given to <125:0:0200>. They go on sale for <90:21:0000> each!
						MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo:202', false)
System.EventFlags['cPlayer:SloExplainPumpkinSeedingFlag'] = true
						# I can sell them to you individually or in bulk. So, would you like to care for [a|an]<125:0:0200>?
						MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo:106', false)
  run Sub_Event186()
			else:
				run Sub_Event71()
		else:
			# A few days after you plant some produce starts, you'll have produce ready to be picked! They'll grow even if you leave them be after planting, but da…
			MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:062', false)
			System.EventFlags['cPlayer:SloExplainBuyVegetableSeedling'] = true
			# I sell <125:0:0200> individually or in bulk. What do you think?
			MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:036', false)
			run Sub_Event186()
	else:
		run Sub_Event71()

local flow Sub_Event103():
	# Aw, thank you!
	MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:018', false)
	MainNpc.SetDeliveryItemAtRandom(2114, false, 'cVillageRemakePattern', 0)
	MainNpc.NpcDelivery(0, 'Default')
	if SubflowResults@2[0] == 0:
		MainNpc.ShopBuyDone(false, false, false, false)
	else:
		MainNpc.ShopBuyDone(false, true, false, false)
		EventFlowSystemActor.SetTagFromUIResult('cSloItem5Price', 0)
	MainNpc.SetDeliveryItem(4, false)
	EventFlowSystemActor.WaitFrame(15)
	MainNpc.NpcDelivery(1, 'Default')
	if not System.EventFlags['cPlayer:SloBuyToday']:
		System.EventFlags['cPlayer:SloBuyCount'] += 1
		System.EventFlags['cLand:SloPeddlerPurchaceToday'] = true
		System.EventFlags['cPlayer:SloBuyToday'] = true
	if (EventFlowSystemActor.MultiItemSelectInclude(13227, 3045, 2649, 3035, 3030, 3040, 65534, 65534, 'cItemSelect')) and (not System.EventFlags['cPlayer:SloBuyVegetableToday']):
		System.EventFlags['cPlayer:SloBuyVegetableToday'] = true
		System.EventFlags['cPlayer:SloVegetableCount'] += 1
	# Is there anything else I can do for you, my friend?
	MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:056', false)
	run slo_Buy_Again()

local flow Sub_Event166():
	System.EventFlags['cPlayer:SloTalkedToday'] = true
	System.EventFlags['cPlayer:SloTalkCommuneBeforeFlag'] = true
	System.EventFlags['cPlayer:TalkSloCommuneOpenEvent'] = true

local flow Sub_Event186():
	switch EventFlowSystemActor.GeneralTalkChoice3():
		case 0:
			run Sub_Event79()
		case 1:
			run Sub_Event57()
		case 2:
			run Sub_Event70()

local flow Sub_Event214():
	# You gotta do what makes you happy. I'll be here if you need me.
	MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:016', false)
	EventFlowSystemActor.UIMoneyDisappear()

local flow Sub_Event242():
	EventFlowSystemActor.SetTagFromSystem('cSloWeatherBushName', 'cDegit', 0, 0, '')
	# Right now, both the <140:20:cd00> and the plumeria are in season, so it's a great time to plant some.
	MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:091', false)

local flow Sub_Event243():
	EventFlowSystemActor.SetTagFromSystem('cSloWeatherBushName', 'cDegit', 0, 0, '')
	# Right now, the <140:20:cd00> is in season, so it's a perfect time to plant some.
	MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:090', false)

local flow Sub_Event255():
	EventFlowSystemActor.SetTagFromSystem('cSloWeatherBushName', 'cDegit', 0, 0, '')
	# This week, I'd like to recommend the lovely <140:20:cd00> and the plumeria. Right now they're both in season, so I hope you'll try raising a few.
	MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:097', false)

local flow Sub_Event256():
	EventFlowSystemActor.SetTagFromSystem('cSloWeatherBushName', 'cDegit', 0, 0, '')
	# This week, I'd like to recommend the lovely <140:20:cd00>. It's in season right now, so I hope you'll try raising a few.
	MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:098', false)

local flow Sub_Event47():
	if System.EventFlags['cPlayer:SloExplainWeeding']:
		# Thanks again for your business!
		MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:004', false)
		run Sub_Event166()
	else:
		# I stock more types of starts, plus I started a traveling weeding service. Thanks again for your business!
		MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:003', false)
		run Sub_Event166()

local flow Sub_Event56():
	switch EventFlowSystemActor.GeneralTalkChoice3():
		case 0:
			run Sub_Event79()
		case 1:
			run Sub_Event57()
		case 2:
			run Sub_Event70()

local flow Sub_Event57():
	SubflowResults[0] = 1
	run Sub_grp_Event60()

local flow Sub_Event66():
	# That is the perfect choice! Oh, I just wish you had room in your pockets so you could take it home. But at least I know we'll be seeing each other ag…
	MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:017', true)
	fork:
		branch:
			EventFlowSystemActor.UIMoneyDisappear()
		branch:
			EventFlowSystemActor@sub2.MessageSuspend()
		branch:
			EventFlowSystemActor@sub.UIShopBuyDisappear()

local flow Sub_Event70():
	# Oh! No worries. You know what's best for your garden. Is there anything else I can do for you?
	MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:039', false)
	run slo_Buy_Again()

local flow Sub_Event71():
	# [A|An]<125:0:0000>! A perfectly wonderful selection. And they're available in bulk. How many would you like?
	MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:035', false)
	run Sub_Event56()

local flow Sub_Event72():
	# Thank you! Oh my… You don't have enough money right now. But I'm sure you will have spare Bells to spend soon. And I look forward to seeing you then.
	MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:055', false)
	fork:
		branch:
			EventFlowSystemActor.UIMoneyDisappear()
		branch:
			EventFlowSystemActor@sub2.MessageSuspend()
		branch:
			EventFlowSystemActor@sub.UIShopBuyDisappear()

local flow Sub_Event79():
	SubflowResults[0] = 0
	run Sub_grp_Event60()

local flow Sub_Event87(EachWeedPrice: int, TotalWeedPrice: int, WeedNum: int, SellTotal: int):
	EventFlowSystemActor.UIMoneyDisappear()
	run slo_Again()

local flow Sub_grp_Event18(EachWeedPrice: int, TotalWeedPrice: int, WeedNum: int, SellTotal: int):
	if EventFlowSystemActor.HasKindItem('cKind', 'Weed', ''):
		# If I'm counting right, you've got <90:6:0003> <50:8:0300000c0063006c0075006d00700073000a0063006c0075006d0070000c0063006c0075006d00700073> of weeds… H…
		MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:022', false)
		if EventFlowSystemActor.GeneralTalkChoice2() == 0:
			EventFlowSystemActor.UIMoneyAppear()
			MainNpc.ShopSellCalc(SellTotal, 2.0, true, false)
			run Demo_Common::Demo_Slo_Selling()
			switch EventFlowSystemActor.MoneyCapacity(0, 'cShop'):
				case 0:
					MainNpc.ShopSellDone(2.0, false)
					# Thank you kindly!
					MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:026', false)
					run Sub_Event87(EachWeedPrice=EachWeedPrice, TotalWeedPrice=TotalWeedPrice, WeedNum=WeedNum, SellTotal=SellTotal)
				case 1:
					MainNpc.ShopSellDone(2.0, false)
					# Thank you kindly! Your extra Bells are happily stashed in this bag here.
					MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:027', false)
					run Sub_Event87(EachWeedPrice=EachWeedPrice, TotalWeedPrice=TotalWeedPrice, WeedNum=WeedNum, SellTotal=SellTotal)
				default:
					return
		else:
			# You gotta do what makes you happy. I'll be here if you need me.
			MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:016', false)
			run slo_Again()
	else:
		# Huh… I think your weeds must've sprouted off to another garden, PLAYER. I don't see 'em. And I can't buy what you don't have.
		MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:021', false)
		run slo_Again()

local flow Sub_grp_Event232():
	if EventFlowSystemActor.HasBellCount(100000):
		EventFlowSystemActor.BellCountDown(-100000, false)
		EventFlowSystemActor.PlayReport('cSloWeedingService', 100000)
		# You got it! You have a very neat and tidy island in your future, friend.
		MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:077', false)
		System.EventFlags['cLand:SloWeedingFlag'] = true
		MainNpc.SloDecideReward(0)
		EventFlowSystemActor.SystemMailSend('cSlo', 'MAIL_SNpc_slo', 1, 'cNone', 'cFastTomorrow', 'cReward', false, false)
	else:
		# Thank you! Oh my… You don't have enough money right now. But I'm sure you will have spare Bells to spend soon. And I look forward to seeing you then.
		MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:076', false)
	EventFlowSystemActor.UIMoneyDisappear()

local flow Sub_grp_Event60():
	if SubflowResults@2[0] == 0:
		if MainNpc.ShopHasBellCount(1.0):
			run Sub_grp_Event63()
		else:
			run Sub_Event72()
	else:
		if MainNpc.ShopHasBellCount(5.0):
			run Sub_grp_Event63()
		else:
			run Sub_Event72()

local flow Sub_grp_Event63():
	if SubflowResults@2[0] == 0:
		if EventFlowSystemActor.ShoppingCapacity('cSlo', 65534):
			run Sub_Event103()
		else:
			run Sub_Event66()
	else:
		if EventFlowSystemActor.ShoppingCapacity('cSlo5', 65534):
			run Sub_Event103()
		else:
			run Sub_Event66()

flow slo_Again():
	# Can I help with anything else?
	MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:029', false)
	switch EventFlowSystemActor.GeneralTalkChoice4():
		case 0:
			run slo_Buy()
		case 1:
			run slo_SellWeed()
		case 2:
			run slo_WeedingService()
		case 3:
			# Until next time!
			MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:033', true)

flow slo_Buy():
	if System.EventFlags['cPlayer:SloExplainVegetableSeedling']:
		if (EventFlowSystemActor.EnvCheckBetweenDate(10, 1, 10, 31, 'cLastGrowUpTime')) and (not System.EventFlags['cPlayer:SloExplainAddVegetable']):
			# Oh, yes! I have some happy news to share with you. Since October and Halloween are such close friends, <item>pumpkin starts are on sale for half off!
			MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:049', false)
			System.EventFlags['cPlayer:SloExplainAddVegetable'] = true
			if not System.EventFlags['cPlayer:SloExplainPumpkinColorFlag']:
				# <item>Pumpkins come in four colors— orange, green, yellow, and white… But you won't know what color you'll get until the <item>pumpkins grow. What an…
				MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:083', false)
				System.EventFlags['cPlayer:SloExplainPumpkinColorFlag'] = true
			# Pumpkins are so much fun. I sure hope you'll try raising some!
			MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:053', false)
	else:
		# Oh, that's right! In addition to flower seeds and shrubs, I've started selling produce starts!
		MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:061', false)
		if System.EventFlags['cPlayer:SloExplainPumpkinColorFlag']:
			# Similar to pumpkins, your produce starts will grow even if you leave them alone. But if you want a big, happy harvest, try watering them daily!
			MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:073', false)
		else:
			# A few days after you plant some produce starts, you'll have produce ready to be picked! They'll grow even if you leave them be after planting, but da…
			MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:062', false)
		System.EventFlags['cPlayer:SloExplainVegetableSeedling'] = true
		System.EventFlags['cPlayer:SloExplainBuyVegetableSeedling'] = true
	# These are all the lovely little seeds and starts I have in stock today.
	MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:015', false)
	EventFlowSystemActor.UIMoneyAppear()
	EventFlowSystemActor.UIShopBuyAppear('cCommuneIslandReiji')
entrypoint Event1:
	if EventFlowSystemActor.UIResultMenuDecide():
		run Slo_Purchase_Processing()
	else:
		fork:
			branch:
				EventFlowSystemActor.UIMoneyDisappear()
			branch:
				EventFlowSystemActor@sub.UIShopBuyDisappear()
		# You gotta do what makes you happy. I'll be here if you need me.
		MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:016', false)

flow slo_Buy_Again():
	EventFlowSystemActor.UIShopBuyReselectionAppear()
	run Event1()

flow slo_Select():
	if System.EventFlags['cPlayer:SloTalkedToday']:
		# Heya! What can I do for you?
		MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:010', false)
	else:
		System.EventFlags['cPlayer:SloTalkedToday'] = true
		# Oh! Hello! Isn't this the most perfect day to shop for flowers?
		MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:057', false)
		if (not System.EventFlags['cPlayer:SloRecommendbush']) and (EventFlowSystemActor.SloIsWeatherBushCommune()):
			if EventFlowSystemActor.EnvWeatherArea() == `cWeatherArea_North`:
				if EventFlowSystemActor.EnvCheckBetweenDate(6, 1, 9, 20, 'cGrowUpTime'):
					run Sub_Event255()
				else:
					run Sub_Event256()
			else:
				if EventFlowSystemActor.EnvCheckBetweenDate(12, 1, 3, 20, 'cGrowUpTime'):
					run Sub_Event255()
				else:
					run Sub_Event256()
			System.EventFlags['cPlayer:SloRecommendbush'] = true
		# I'd be happy to know what I can do for you today.
		MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:006', false)
	switch EventFlowSystemActor.GeneralTalkChoice4():
		case 0:
			run slo_Buy()
		case 1:
			run slo_SellWeed()
		case 2:
			run slo_WeedingService()
		case 3:
			# You gotta do what makes you happy. I'll be here if you need me.
			MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:016', true)

flow slo_SellWeed(EachWeedPrice: int = 0, TotalWeedPrice: int = 0, WeedNum: int = 0, SellTotal: int = 0):
	MainNpc.SloTagSet(2, 3, 4, EachWeedPrice, TotalWeedPrice, WeedNum)
	if System.EventFlags['cPlayer:SloTalkedWeedFirst']:
		# If you've got weeds, I'm buying! <90:26:0002> a clump.
		MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:020', false)
		run Sub_grp_Event18(EachWeedPrice=EachWeedPrice, TotalWeedPrice=TotalWeedPrice, WeedNum=WeedNum, SellTotal=SellTotal)
	else:
		# Oh, PLAYER. Are you interested in selling weeds? Yeah, I know how it feels to start pulling weeds and suddenly realize, "Wow. This could take a while…
		MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo:044', false)
		if EventFlowSystemActor.GeneralTalkChoice2() == 0:
			# I had a feeling…
			MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo:045', false)
		else:
			# Eh heh…
			MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo:046', false)
		# But gardening should make you happy, PLAYER. Which is why I have decided to buy weeds from you at a very special high price point. And if you act now…
		MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo:047', false)
		# It's a win-win. You get paid for all the hard work that goes into pulling weeds… And I get to spend time hanging out in ISLAND's pristine, weed-free …
		MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo:059', false)
		System.EventFlags['cPlayer:SloTalkedWeedFirst'] = true
		# So…can I buy your weeds?
		MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo:060', false)
		if EventFlowSystemActor.GeneralTalkChoice2() == 0:
			run Sub_grp_Event18(EachWeedPrice=EachWeedPrice, TotalWeedPrice=TotalWeedPrice, WeedNum=WeedNum, SellTotal=SellTotal)
		else:
			# Ah, so it goes. If you change your mind, I'd be happy to do business with you.
			MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:025', false)

flow slo_WeedingService():
	if System.EventFlags['cPlayer:SloExplainWeeding']:
		if System.EventFlags['cLand:SloWeedingFlag']:
			# Wait—what? My service has already been requested today. It'll be nice and tidy tomorrow!
			MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:080', false)
		elif EventFlowSystemActor.SloMainFieldWeedNum(300):
			EventFlowSystemActor.UIMoneyAppear()
			EventFlowSystemActor.SetTagFromSystem('cFlow', 'cMoney', 0, 100000, '')
			# Got a request for my weeding service? Looks like it'll run you <90:23:0000> this time.
			MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:078', false)
			if EventFlowSystemActor.GeneralTalkChoice2() == 0:
				run Sub_grp_Event232()
			else:
				run Sub_Event214()
		else:
			# Hold on… I didn't see many weeds growing at all the last time I was there on ISLAND. Ask again when you have some more weeds that need taking care of…
			MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:075', false)
	else:
		if System.EventFlags['cPlayer:SloTalkedWeedFirst']:
			# I've been buying weeds from folks up until now, but pulling them in the first place can be pretty tiring work.
			MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:068', false)
			if EventFlowSystemActor.GeneralTalkChoice2() == 0:
				# I'm so glad you agree…
				MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:069', false)
			else:
				# Oh, really? But even so, there must be those times when you're just too busy. And your aching back!
				MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:070', false)
		else:
			# Say, what do you do when you have a lot of weeds on your island? Even if you're going to sell them, yanking them all out of the ground is such hard w…
			MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:086', false)
			if EventFlowSystemActor.GeneralTalkChoice2() == 0:
				# I'm so glad you agree…
				MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:069', false)
			else:
				# Oh, really? But even so, there must be those times when you're just too busy. And your aching back!
				MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:070', false)
		# That's why I've started a weeding service! What I do is I go and pick up all the weeds on the island. But collecting them is tiring work… so the cost…
		MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:071', false)
		# But when you consider that it'll be cleaning up your island in one fell swoop, it's really worth the cost! Plus, every weed I pull goes right into th…
		MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:084', false)
		System.EventFlags['cPlayer:SloExplainWeeding'] = true
		if EventFlowSystemActor.SloMainFieldWeedNum(300):
			EventFlowSystemActor.UIMoneyAppear()
			EventFlowSystemActor.SetTagFromSystem('cFlow', 'cMoney', 0, 100000, '')
			# So, what do you say? I can get rid of the weeds for <90:23:0000>!
			MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:072', false)
			if EventFlowSystemActor.GeneralTalkChoice2() == 0:
				run Sub_grp_Event232()
			else:
				run Sub_Event214()
		else:
			# Your island doesn't seem all that full of weeds yet. I recommend waiting until there's more work for me. But if they get out of control, I'll pull th…
			MainNpc.OpenMessageWindow('TalkSNpc/slo/SP_slo_02_Commune:088', false)
		run slo_Again()
