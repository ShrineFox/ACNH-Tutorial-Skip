flow About_DiscloseLeaveTap():
	if System.EventFlags['cLand:IsDisclosedMyDream']:
		# Certainly. Right now, I have permission to share your dream of ISLAND. When I am asked to choose a dream to surprise someone, it is possible I may sh…
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:3500', false)
		if EventFlowSystemActor.GeneralTalkChoice2() == 0:
			SubflowResults[4] = 0
			SubflowResults[5] = 0
		else:
			SubflowResults[4] = 1
			SubflowResults[5] = 1
	else:
		if System.EventFlags['cLand:IsUploadDisclosedMyDream']:
			# Sure. Currently, I am not sharing your dream of ISLAND. Would you like your dream to be among those I might share when I am asked for a surprise? If …
			MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:3506', false)
			if EventFlowSystemActor.GeneralTalkChoice2() == 0:
				SubflowResults[4] = 1
				SubflowResults[5] = 2
			else:
				SubflowResults[4] = 0
				SubflowResults[5] = 2
		else:
			# Sure. Currently, I am not sharing your dream of ISLAND. Would you like your dream to be among those I might share if I am asked for a surprise?
			MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:3501', false)
			if EventFlowSystemActor.GeneralTalkChoice2() == 0:
				SubflowResults[4] = 1
				SubflowResults[5] = 0
			else:
				SubflowResults[4] = 0
				SubflowResults[5] = 1
	run Change_DiscloseLeaveTap()

flow About_MyDream():
	EventFlowSystemActor.SetTagFromSystem('cCurrentDreamingAddress', 'cDegit', 0, 0, '')
	# I have a dream of ISLAND filed under the Dream Address <140:17:cd00>.
	MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:3002', false)
entrypoint Event494:
	switch EventFlowSystemActor.GeneralTalkChoice5():
		case 0:
			run Update_Dream()
		case 1:
			run About_PublishNo()
		case 2:
			run About_DiscloseLeaveTap()
		case 3:
			run Delete_Dream()
		case 4:
			run ReturnSelect()

flow About_PublishNo():
	if System.EventFlags['cPlayer:TapDiscloseDreamLandID']:
		# Your Dream Address is set to public, meaning others can see it on your Passport and on your island's map. Would you like to change the setting for yo…
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:3401', false)
		if EventFlowSystemActor.GeneralTalkChoice2() == 0:
			run Stay_PublishNo()
		else:
			System.EventFlags['cPlayer:TapDiscloseDreamLandID'] = false
			# Happily! Your Dream Address is now private and will no longer appear on your Passport or your island's map.
			MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:3404', false)
			EventFlowSystemActor.SaveSimpleSave('cAll')
			run Return_About_MyDream()
	else:
		# Your Dream Address is currently set to private, meaning that it is not displayed to others. Shall I set your Dream Address to public and allow it to …
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:3402', false)
		if EventFlowSystemActor.GeneralTalkChoice2() == 0:
			run Stay_PublishNo()
		else:
			System.EventFlags['cPlayer:TapDiscloseDreamLandID'] = true
			# There! Your Dream Address is public. Others will now be able to see it on your Passport and your island's map.
			MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:3405', false)
			EventFlowSystemActor.SaveSimpleSave('cAll')
			run Return_About_MyDream()

flow AskRetrySearch():
	if System.EventFlags['cPlayer:TapUnlockFavorite']:
		run ReturnSelectSearchMode()
	elif System.EventFlags['cPlayer:TapUnlockLeaveTap']:
		run ReturnSelectMenuNoFavoriteLlist()
	else:
		run ReturnInputNo()

flow Caution_Parental():
	switch SubflowResults@3[1]:
		case 0:
			# My apologies, but you must first turn on "Communicating with Others" in Parental Controls in order to dream. Please come and see me again when you ar…
			MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1041', false)
			run ReturnSelect()
		case 1:
			# My apologies, but you must first turn on "Communicating with Others" in Parental Controls to upload a dream. Please come and see me again when you ar…
			MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:2041', false)
			run ReturnSelect()
		case 2:
			# My apologies, but you must first turn on "Communicating with Others" in Parental Controls to delete a dream. Please come and see me again when you ar…
			MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:3341', false)
			run Return_About_MyDream()

flow Change_DiscloseLeaveTap():
	if SubflowResults@2[4] == 0:
		switch SubflowResults@3[5]:
			case 0:
				System.EventFlags['cLand:IsDisclosedMyDream'] = false
				# Alright. I will no longer share your dream if I am asked for a surprise.
				MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:3503', false)
				run RunSetting()
			case 1:
				# Done. I will leave things as they are. If someone asks me for a surprise, that surprise will not be your dream of ISLAND.
				MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:3505', false)
				run RunSetting()
			case 2:
				# Done. I will leave things as they are. If someone asks me for a surprise, that surprise will not be your dream of ISLAND.
				MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:3505', false)
				run OnlySaveSetting()
	else:
		switch SubflowResults@3[5]:
			case 0:
				System.EventFlags['cLand:IsDisclosedMyDream'] = true
				# Very well. Now when someone asks me for a surprise, that surprise might be your dream of ISLAND.
				MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:3504', false)
entrypoint Event559:
				run Send_DiscloseSetting()
entrypoint Event460:
				EventFlowSystemActor.SaveSimpleSave('cAll')
				run Return_About_MyDream()
			case 1:
				# Understood. Your dream will remain among those I share if I am asked for a surprise.
				MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:3502', false)
				run RunSetting()
			case 2:
				System.EventFlags['cLand:IsDisclosedMyDream'] = true
				System.EventFlags['cLand:IsUploadDisclosedMyDream'] = false
				# Very well. Now when someone asks me for a surprise, that surprise might be your dream of ISLAND.
				MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:3504', false)
				run ShortCutFirstLeaveTapUpload()
				run Return_About_MyDream()

flow CloseLeaveTap():
	run Event469()

flow ConnectionMsg_End():
	EventFlowSystemActor.MessageSuspend()
	EventFlowSystemActor.MessageUnlockNext()

flow ConnectionMsg_Save():
	# Saving. Do not touch .
	EventFlowSystemActor.OpenMessageWindow('TalkSys/SYS_Save:001', false)
	EventFlowSystemActor.SaveSimpleSave('cAll')

flow ConnectionMsg_Start():
	EventFlowSystemActor.MessageLockNext(1)
	# Connecting to the internet...
	EventFlowSystemActor.OpenMessageWindow('TalkSys/SYS_Network:001', false)

flow DLStart_FavoriteList():
	# Splendid! Everything is now sorted. Please close your eyes…and relax…
	MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1006', false)
	Player.PlayerStartAnimeBedWait()
	EventFlowSystemActor.ChangeSwitchIdrDreamAromaPot(true)
	run ConnectionMsg_Start()
	switch SubflowResults@4[2]:
		case 0:
			run DownloadDream_FavoriteList()
		case 1:
			run SearchDream_FavoriteList()
		case 2:
			run SearchDream_LeaveTap()
		case 3:
			run DownloadDream_SearchByIslandName()

flow DLStart_LeaveTap():
	run DLStart_FavoriteList()

flow DLStart_SearchByIslandName():
	run DLStart_FavoriteList()

flow DL_NetErrorOccur():
	# My apologies, but I was unable to connect to the internet just now. Shall I try again?
	MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1032', false)
	if EventFlowSystemActor.GeneralTalkChoice2() != 0:
		run ReturnSelect()
	elif System.EventFlags['cPlayer:TapUnlockFavorite']:
		run ReturnSelectSearchMode()
	else:
		run ReturnSelectMenuNoFavoriteLlist()

flow Delete_Dream():
	# Oh my! Really? You wish to delete your dream from the library? But it is such a beautiful dream… Naturally, once it has been deleted, no one will be …
	MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:3301', false)
	if EventFlowSystemActor.GeneralTalkChoice2() == 0:
		run Return_Delete()
	else:
		# I am relieved you changed your mind. There may be someone enjoying your dream at this very moment!
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:3306', false)
		run Return_About_MyDream()

flow Delete_NetErrorOccur():
	# My apologies, but I was unable to connect to the internet just now. Shall I try again?
	MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:3331', false)
	if EventFlowSystemActor.GeneralTalkChoice2() == 0:
		run Return_Delete()
	else:
		run Return_About_MyDream()

flow DownloadDream_FavoriteList():
	EventFlowSystemActor.NetDownloadDream()
	run ConnectionMsg_End()
	if EventFlowSystemActor.CheckErrorType(2):
		EventFlowSystemActor.ChangeSwitchIdrDreamAromaPot(false)
		Player.PlayerStartAnimeBedWaitWithHandsClaspedOpenEyes()
		run DL_NetErrorOccur()
	else:
		# Drift and compile…and emerge within the dream…of <115:2:cd00>…<10:8:004b0000>
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1006_01', true)
		EventFlowSystemActor.CameraReserveFirstStateCommand('Demo:InDreamZoomIn', '', false)
		EventFlowSystemActor.CameraSetDemoParam('InIdrDreamZoomIn', 'InIdrDreamZoomInOut', 'Player', false, false, false, 0)
		EventFlowSystemActor.TapSmoke('cIdrDreamSmoke')
		EventFlowSystemActor.WaitFrame(90)
		EventFlowSystemActor.NextLPFadeOff()
		EventFlowSystemActor.SystemBGMVolumeFadeOut(10.0, 2, 0.0)
		EventFlowSystemActor.SoundSceneChangeFadeOutDucking(0)
		EventFlowSystemActor.NetGoToDream()
		EventFlowSystemActor.SystemRequestChangeStage('cDreamDemo', 'cNormalFader', 'cNormalFader', 'cWhite', 0.10000000149011612, 1.0)

flow DownloadDream_LeaveTapList():
	run DownloadDream_FavoriteList()

flow DownloadDream_SearchByIslandName():
	run DownloadDream_FavoriteList()

flow Download_Dream():
	if System.EventFlags['cPlayer:DreamFirstExplain']:
		run ReturnConnectInternet()
	else:
		# Of course, of course! But there are a few things I must clarify further before I guide you to a dream. Dreams, like many things these days, are downl…
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1011', false)
		System.EventFlags['cPlayer:TapUnlockSearchByIslandName'] = true
		System.EventFlags['cPlayer:TapUnlockLeaveTap'] = true
		# Oh! One other wrinkle… Dreams are very fragile things. To prevent the introduction of glitches, you must go empty-handed. Do not worry. I will happil…
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1000_01', false)
		System.EventFlags['cPlayer:DreamFirstExplain'] = true
		# I believe that covers everything. Now, are you ready to link with the library of dreams?
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1001', false)
		if EventFlowSystemActor.GeneralTalkChoice2() == 0:
			run ReturnConnectInternet()
		else:
			run ReturnSelect()

flow ErrOccur_AdressGet():
	run ConnectionMsg_End()
	EventFlowSystemActor.DreamUploadEffect('cOff')
	Player.PlayerStartAnimeBedWaitWithHandsClaspedOpenEyes()
	run UL_NetErrorOccur()

flow Error_MyIslandDream():
	# Hmm… That is the Dream Address for your own island. I am sorry, but I can no more guide you to your own island than I can divide by zero. Perhaps the…
	MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1033', false)
	if EventFlowSystemActor.GeneralTalkChoice2() == 0:
		run AskRetrySearch()
	else:
		run ReturnSelect()

flow Error_NotFound():
	# Sadly, there is no longer a dream filed to that Dream Address. Is there another dream you wish to visit?
	MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1057', false)
	run Event69()

flow Error_NotGotDream():
	# Oh! I was unable to find a dream for you…which I suppose is a surprise in itself. Shall I try again?
	MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1063', false)
	run Event69()

flow Error_NotGotSearched():
	# I am sorry, but there is no dream of an island named <115:2:cd00>. Perhaps it has another name?
	MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1076', false)
	if EventFlowSystemActor.GeneralTalkChoice2() == 0:
		run ReturnToSearchByIslandName()
	else:
		run ReturnSelect()

flow Exit_ThisScene():
	# I see. Please, come again. You are welcome at any time.
	MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:003', true)
	EventFlowSystemActor.NextLPFadeOff()
	EventFlowSystemActor.SystemBGMVolumeFadeOut(4.5, 0, 0.0)
	EventFlowSystemActor.SoundSceneChangeFadeOutDucking(1)
	EventFlowSystemActor.FadeOut('cDream', 'cDream', 'cBlack', 1.0, 1.0, true)
	EventFlowSystemActor.SystemRequestChangeStage('cDreamDemo', 'cDream', 'cDream', 'cBlack', 1.0, 1.0)

flow ExplainSearchByIslandName():
	if not System.EventFlags['cPlayer:TapUnlockSearchByIslandName']:
		if SubflowResults@2[6] == 0:
			# Additionally, you may now search for a dream by the name of its island.
			MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1074_01', false)
		else:
			# Oh yes! You may now search for a dream by the name of its island.
			MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1074_02', false)
		# If you know the name of the island you would like to dream of, just ask me to, "Search by island name."
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1074_03', false)
		System.EventFlags['cPlayer:TapUnlockSearchByIslandName'] = true

flow FavoriteList_Error_Cmn():
	run ConnectionMsg_End()
	EventFlowSystemActor.ChangeSwitchIdrDreamAromaPot(false)
	Player.PlayerStartAnimeBedWaitWithHandsClaspedOpenEyes()

flow FirstLeaveTapSetting():
	if not System.EventFlags['cPlayer:TapUnlockLeaveTap']:
		switch SubflowResults@4[3]:
			case 0:
				# By the way, if you prefer that I choose a dream for you, I will be happy to find you a surprise. No Dream Address is needed. I will simply pluck a pl…
				MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1060', false)
				# May I trouble you with a request? I would like your permission to share your dream of ISLAND if I am asked for a surprise. If you allow me to surpris…
				MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1066', false)
				if EventFlowSystemActor.GeneralTalkChoice2() == 0:
					System.EventFlags['cLand:IsDisclosedMyDream'] = true
					run FirstLeaveTapUpload()
					System.EventFlags['cPlayer:TapUnlockLeaveTap'] = true
				else:
entrypoint Event469:
					# I completely understand. In that case, your dream will not be shared if I am asked for a surprise.
					MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1070', false)
					System.EventFlags['cLand:IsUploadDisclosedMyDream'] = true
					System.EventFlags['cLand:IsDisclosedMyDream'] = false
					EventFlowSystemActor.SaveSimpleSave('cAll')
					# Should you decide that I may share your dream if asked for a surprise, tell me to "Adjust surprise sharing."
					MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1071', false)
					System.EventFlags['cPlayer:TapUnlockLeaveTap'] = true
			case 1:
				# May I trouble you with a request? I would like your permission to share your dream of ISLAND if I am asked for a surprise. If you allow me to surpris…
				MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1066', false)
				if EventFlowSystemActor.GeneralTalkChoice2() == 0:
					System.EventFlags['cLand:IsDisclosedMyDream'] = true
					run FirstLeaveTapUpload()
					System.EventFlags['cPlayer:TapUnlockLeaveTap'] = true
				else:
entrypoint Event469:
					# I completely understand. In that case, your dream will not be shared if I am asked for a surprise.
					MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1070', false)
					System.EventFlags['cLand:IsUploadDisclosedMyDream'] = true
					System.EventFlags['cLand:IsDisclosedMyDream'] = false
					EventFlowSystemActor.SaveSimpleSave('cAll')
					# Should you decide that I may share your dream if asked for a surprise, tell me to "Adjust surprise sharing."
					MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1071', false)
					System.EventFlags['cPlayer:TapUnlockLeaveTap'] = true
			case 2:
				# By the way, if you prefer that I choose a dream for you, I will be happy to find you a surprise. No Dream Address is needed. I will simply pluck a pl…
				MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1060', false)
				System.EventFlags['cPlayer:TapUnlockLeaveTap'] = true
			case 3:
				# Since you have been so generous in sharing your Dream Address, I would like to request something. It sometimes occurs that I am asked to surprise som…
				MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:2100', false)
				if EventFlowSystemActor.GeneralTalkChoice2() == 0:
					# Excellent. I am certain many will be delighted to come across your dream. One moment…
					MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:2101', false)
					System.EventFlags['cLand:IsDisclosedMyDream'] = true
					run UploadMetaLeaveTap()
					# There! I look forward to surprising many others with your dream. If you do not want your dream to be shared if I am asked for a surprise, tell me to …
					MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:2102', false)
					System.EventFlags['cPlayer:TapUnlockLeaveTap'] = true
				else:
					run CloseLeaveTap()

flow FirstLeaveTapUpload():
	# Excellent. I am certain many will be delighted to come across your dream. Thank you for your trust. Now, let us update your dream of ISLAND…
	MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1067', false)
	run ShortCutFirstLeaveTapUpload()

flow FirstLeaveTapUploadError():
	run ConnectionMsg_End()
	EventFlowSystemActor.DreamUploadEffect('cOff')
	Player.PlayerStartAnimeBedWaitWithHandsClaspedOpenEyes()
	if EventFlowSystemActor.YMD(2061, 1, 1, 'cNowTime') == 0:
		# I am terribly sorry, but I was unable to compile and update your dream of ISLAND. You may need to try again at another time. My apologies.
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:2103', false)
	else:
		# Unfortunately, I am unable to compile your dream of ISLAND. You will need to return on another day. I will be happy to try again then.
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:3133', false)

flow Go_About_MyDream5():
	# Is there any other way I can assist with your uploaded dream?
	MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:3002_02', false)
	run Event494()

flow LeaveTap_Error_Cmn():
	run FavoriteList_Error_Cmn()

flow Network_Signin():
	EventFlowSystemActor.CheckFreeCommunication(true)
	if EventFlowSystemActor.IsApprovedFreeCommunication():
		run System_ServerRegistration::UserRegistrun System_ServerRegistration::UserRegist(WithLogin=false, Terminate=false, WithSave=true)
	else:
		run Caution_Parental()

flow Network_Signin_SkipSave():
	EventFlowSystemActor.CheckFreeCommunication(true)
	if EventFlowSystemActor.IsApprovedFreeCommunication():
		run System_ServerRegistration::UserRegistrun System_ServerRegistration::UserRegist(WithLogin=false, Terminate=false, WithSave=false)
	else:
		run Caution_Parental()

flow OnlySaveSetting():
	run Event460()

flow Receive_Explanation():
	System.EventFlags['cPlayer:TapSelWhereAreHere'] = true
	# This is the world between, where electronic dreams and dreamers meet. I am a guide here. I can help you dream another's dream or share your dream wit…
	MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:4000', false)
	# If you wish to learn more…please feel free to ask.
	MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:4001', false)
entrypoint Event209:
	switch EventFlowSystemActor.GeneralTalkChoice3():
		case 0:
			# Of course! To dream of other islands is to travel without traveling. A dream is a memory of a place such as an island. After being uploaded, these dr…
			MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:4002', false)
			# One caveat… To enter a dream, you must always go empty-handed. Do not worry. I will happily hold on to your belongings and return them after you wake.
			MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:4002_00', false)
			# Oh! I should also mention that this process requires internet access. Additionally, if you wish to visit a specific dream, you might need to provide …
			MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:4011', false)
			run Return_Select_Explanation()
		case 1:
			# Ah! Sharing a dream of your island will allow others to visit that memory. First, I will form your memory of ISLAND into a dream. I will then connect…
			MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:4003', false)
			# And as I mentioned, the process does require internet access, so please have that ready.
			MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:4003_01', false)
			if System.EventFlags['cPlayer:MyDesignExchangeFirstAccess']:
				# Lastly, visitors to your dream may bring back any designs on display in your Custom Designs Portal. Check your Custom Designs Portal before uploading…
				MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:4003_02', false)
			# And with that, you are up-to-date!
			MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:4003_03', false)
			run Return_Select_Explanation()
		case 2:
			run ReturnSelect()

flow ReturnConnectInternet():
	# Then I shall connect to the internet to initialize a dream download.
	MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1002', false)
	SubflowResults[1] = 0
	run Network_Signin()
	if SubflowResults@2[0] != 0:
		# My apologies, but I was unable to connect to the internet just now. Shall I try again?
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1032', false)
		if EventFlowSystemActor.GeneralTalkChoice2() == 0:
			run ReturnConnectInternet()
		else:
			run ReturnSelect()
	elif System.EventFlags['cPlayer:TapUnlockFavorite']:
		run ReturnSelectSearchMode()
	elif EventFlowSystemActor.NetHasDreamLogList():
		# Connection established. If I may stop us for a moment, there is something I believe you will be pleased to hear. From here on, if you find a uniquely…
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1051', false)
		System.EventFlags['cPlayer:TapUnlockFavorite'] = true
		run ReturnSelectSearchMode()
	else:
		run ReturnSelectMenuNoFavoriteLlist()

flow ReturnInputNo():
	# What is the Dream Address for your desired dream?
	MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1003', false)
	EventFlowSystemActor.UISoftwareKeyboardHandling('cDreamSearchAddressId', true)
	if not EventFlowSystemActor.UIResultMenuDecide():
		if System.EventFlags['cPlayer:TapUnlockFavorite']:
			run ReturnSelectSearchMode()
		else:
			run ReturnSelect()
	elif EventFlowSystemActor.IsMatchedOwnDreamIdAndInputDreamId():
		run Error_MyIslandDream()
	else:
		# Thank you. One moment whilst I browse the library of dreams…
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1004', false)
		run ConnectionMsg_Start()
		EventFlowSystemActor.NetSearchDream('cDreamID')
		run ConnectionMsg_End()
		if EventFlowSystemActor.CheckErrorType(2):
			run DL_NetErrorOccur()
		elif EventFlowSystemActor.NetIsFoundDreamLand('cDreamID'):
			# The Dream Address you provided appears to be for an island called <115:2:cd00>. Is that correct?
			MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1005', false)
			if EventFlowSystemActor.GeneralTalkChoice2() == 0:
				run DLStart_FavoriteList()
			else:
				run AskRetrySearch()
		else:
			# My apologies, but there is no dream filed to that Dream Address.
			MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1031', false)
entrypoint Event69:
			if EventFlowSystemActor.GeneralTalkChoice2() == 0:
				run AskRetrySearch()
			else:
				run ReturnSelect()

flow ReturnIslandNameSearchList():
	# If you would, please choose which dream you would like to have.
	MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1009', false)
	run Event614()

flow ReturnSelect():
	if (System.EventFlags['cLand:EnableMyDream']) and (System.EventFlags['cPlayer:TapULFirstExplain']):
		run ReturnSelect_HaveMyDream()
	else:
		run ReturnSelect_NoMyDream()

flow ReturnSelectMenuNoFavoriteLlist():
	SubflowResults[6] = 1
	run ExplainSearchByIslandName()
	# How shall I prepare your dream?
	MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1073', false)
	switch EventFlowSystemActor.GeneralTalkChoice4():
		case 0:
			SubflowResults[2] = 0
			run ReturnInputNo()
		case 1:
			SubflowResults[2] = 3
			run ReturnToSearchByIslandName()
		case 2:
			SubflowResults[2] = 2
			run ReturnToLeaveTap()
		case 3:
			run ReturnSelect()

flow ReturnSelectMenuWithFavoriteLlist():
	SubflowResults[6] = 0
	run ExplainSearchByIslandName()
	# How shall I prepare your dream?
	MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1072', false)
	switch EventFlowSystemActor.GeneralTalkChoice5():
		case 0:
			SubflowResults[2] = 0
			run ReturnInputNo()
		case 1:
			SubflowResults[2] = 3
			run ReturnToSearchByIslandName()
		case 2:
			SubflowResults[2] = 2
			run ReturnToLeaveTap()
		case 3:
			SubflowResults[2] = 1
			run ReturnShowFavoriteList()
		case 4:
			run ReturnSelect()

flow ReturnSelectSearchMode():
	SubflowResults[3] = 0
	run FirstLeaveTapSetting()
	run ReturnSelectMenuWithFavoriteLlist()

flow ReturnSelect_HaveMyDream():
	if System.EventFlags['cPlayer:TapSelWhereAreHere']:
		# May I be of assistance to you in any other way?
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:002_07', false)
		run Event42()
	else:
		# May I be of assistance to you in any other way?
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:002_03', false)
		run Event42()

flow ReturnSelect_NoMyDream():
	if System.EventFlags['cPlayer:TapSelWhereAreHere']:
		# May I be of assistance to you in any other way?
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:002_06', false)
		run Event3()
	else:
		# May I be of assistance to you in any other way?
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:002_02', false)
		run Event3()

flow ReturnShowFavoriteList():
	if EventFlowSystemActor.NetHasDreamLogList():
		# Very well. Please select the dream you wish to revisit.
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1055', false)
		EventFlowSystemActor.UIDreamFavoriteListHandling()
		if not EventFlowSystemActor.UIResultMenuDecide():
			run ReturnSelectSearchMode()
		elif EventFlowSystemActor.UIIsMyDreamIDFromList():
			run Error_MyIslandDream()
		else:
			EventFlowSystemActor.SetTagFromUIResult('cDreamingListTownName', 0)
			# You wish to revisit the island named <115:2:cd00>? Is that correct?
			MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1056', false)
			if EventFlowSystemActor.GeneralTalkChoice2() == 0:
				run DLStart_FavoriteList()
			else:
				run ReturnShowFavoriteList()
	else:
		# Hmm… There do not appear to be any dreams that you can revisit. To dream, I will need either the Dream Address or the name of the island you wish to …
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1077', false)
		run ReturnSelectSearchMode()

flow ReturnToLeaveTap():
	# Gladly. There are so many wonderful surprises to be found in dreams. Let me find one for you…
	MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1062', false)
	if EventFlowSystemActor.GeneralTalkChoice2() == 0:
		run DLStart_LeaveTap()
	elif System.EventFlags['cPlayer:TapUnlockFavorite']:
		run ReturnSelectMenuWithFavoriteLlist()
	else:
		run ReturnSelectMenuNoFavoriteLlist()

flow ReturnToSearchByIslandName():
	# And what is the name of the island you wish to dream of?
	MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1075', false)
	EventFlowSystemActor.UISoftwareKeyboardHandling('cDreamSearchIslandName', true)
	EventFlowSystemActor.SetTagFromUIResult('cLandNameFromSwkbd', 0)
	if EventFlowSystemActor.UIResultMenuDecide():
		EventFlowSystemActor.SetTagFromUIResult('cLandNameFromSwkbd', 0)
		# Thank you. One moment whilst I browse the library of dreams…
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1007', false)
		run ConnectionMsg_Start()
		EventFlowSystemActor.NetSearchDream('cLandName')
		run ConnectionMsg_End()
		if EventFlowSystemActor.CheckErrorType(2):
			run SearchByIslandName_Error_Cmn()
			run DL_NetErrorOccur()
		elif EventFlowSystemActor.NetIsFoundDreamLand('cLandName'):
			# I believe I may have found the dream you are looking for. If you would, please take a look.
			MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1007_01', false)
entrypoint Event614:
			EventFlowSystemActor.UIDreamIslandSearchResultHandling()
			if EventFlowSystemActor.UIResultMenuDecide():
				EventFlowSystemActor.SetTagFromUIResult('cDreamSearchLandName', 0)
				# And are you ready to enter this dream now?
				MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1008', false)
				if EventFlowSystemActor.GeneralTalkChoice2() == 0:
					run DLStart_SearchByIslandName()
				else:
					run ReturnIslandNameSearchList()
			else:
				run ReturnSelectSearchMode()
		else:
			run SearchByIslandName_Error_Cmn()
			run Error_NotGotSearched()
	elif System.EventFlags['cPlayer:TapUnlockFavorite']:
		run ReturnSelectSearchMode()
	else:
		run ReturnSelect()

flow ReturnUpload():
	# Splendid! I shall now connect to the internet and the library of dreams.
	MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:2004', false)
	SubflowResults[1] = 1
	run Network_Signin_SkipSave()
	if SubflowResults@2[0] == 0:
		# I am in. And now I shall collect and compile your cherished memory of ISLAND into a dream…
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:2005', false)
		# Close your eyes… Picture what you love most about ISLAND… <100:10>Relax. Reeelaaax…</100:10>
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:2005_01', false)
		Player.PlayerStartAnimeBedWait()
		EventFlowSystemActor.DreamUploadEffect('cOn')
		run ConnectionMsg_Start()
		if EventFlowSystemActor.HasDreamID():
			run UploadMyDream()
		else:
			EventFlowSystemActor.GetDreamID()
			if EventFlowSystemActor.CheckErrorType(2):
				run ErrOccur_AdressGet()
			else:
				run UploadMyDream()
	else:
		run UL_NetErrorOccur()

flow Return_About_MyDream():
	run Go_About_MyDream5()

flow Return_Delete():
	# Dreams are fleeting. Digital dreams doubly so. I will delete your dream of ISLAND from the library.
	MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:3304', false)
	SubflowResults[1] = 2
	run Network_Signin_SkipSave()
	if SubflowResults@2[0] == 0:
		EventFlowSystemActor.MessageLockNext(1)
		# Deleting dream data for ISLAND. Do not touch .
		EventFlowSystemActor.OpenMessageWindow('TalkSys/SYS_Save:008', false)
		fork:
			branch:
				EventFlowSystemActor.NetDeleteDream()
			branch:
				EventFlowSystemActor@wait.WaitFrame(60)
		if EventFlowSystemActor.CheckErrorType(2):
			run ConnectionMsg_End()
			run Delete_NetErrorOccur()
		else:
			System.EventFlags['cPlayer:TapDreamDeleteToday'] = true
			System.EventFlags['cLand:EnableMyDream'] = false
			System.EventFlags['cLand:IsDisclosedMyDream'] = false
			System.EventFlags['cPlayer:TapSendThankyouLetter'] = false
			run ConnectionMsg_Save()
			run ConnectionMsg_End()
			# Thank you for waiting. Your dream of ISLAND is no more. Again, if you would like to create and upload a new dream, I will be happy to assist you begi…
			MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:3305', false)
			run ReturnSelect()
	else:
		run Delete_NetErrorOccur()

flow Return_Select_Explanation():
	# If you wish to learn more…please feel free to ask.
	MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:4001_01', false)
	run Event209()

flow Return_Update_MyDream():
	run Event127()

flow Root():
	EventFlowSystemActor.CameraSetDemoParam('InIdrDreamZoomOut', '', 'Player', false, false, false, 0)
	Player.TurnNeck(11, false)
	if System.EventFlags['cLandTemp:TapIndoorPos']:
		EventFlowSystemActor.WaitFrame(20)
		Player.PlayerStartAnimeBedWaitWithHandsClaspedOpenEyes()
		EventFlowSystemActor.WaitFrame(10)
		run Sub_grp_Event10()
	else:
		EventFlowSystemActor.WaitFrame(30)
		MainNpc.NpcChangeNameStatus(1)
		# <100:10>Welcome…</100:10><10:8:00370000>
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:001', true)
		fork:
			branch:
				MainNpc.NpcChangeHeadCtrlMode('cNoLook', true)
				MainNpc.NpcRailMove(0, false, false, 0, 1, 0)
				MainNpc.TurnBody(12, 60.0)
				MainNpc.NpcWaitTurn()
			branch:
				EventFlowSystemActor.WaitFrame(30)
				EventFlowSystemActor.WaitFrame(120)
				Player.PlayerStartAnimeBedWaitWithHandsClaspedOpenEyes()
		run Sub_grp_Event10()

flow RunSetting():
	run Event559()

flow SearchByIslandName_Error_Cmn():
	run FavoriteList_Error_Cmn()

flow SearchDream_FavoriteList():
	EventFlowSystemActor.NetSearchDream('cLogList')
	if EventFlowSystemActor.CheckErrorType(2):
		run FavoriteList_Error_Cmn()
		run DL_NetErrorOccur()
	elif EventFlowSystemActor.NetIsFoundDreamLand('cLogList'):
		run DownloadDream_FavoriteList()
	else:
		run FavoriteList_Error_Cmn()
		run Error_NotFound()

flow SearchDream_LeaveTap():
	EventFlowSystemActor.NetSearchDream('cAutoDefault')
	if EventFlowSystemActor.CheckErrorType(2):
		run LeaveTap_Error_Cmn()
		run DL_NetErrorOccur()
	elif EventFlowSystemActor.NetIsFoundDreamLand('cAutoDefault'):
		run DownloadDream_LeaveTapList()
	else:
		EventFlowSystemActor.NetSearchDream('cAutoAll')
		if EventFlowSystemActor.CheckErrorType(2):
			run LeaveTap_Error_Cmn()
			run DL_NetErrorOccur()
		elif EventFlowSystemActor.NetIsFoundDreamLand('cAutoAll'):
			run DownloadDream_LeaveTapList()
		else:
			run LeaveTap_Error_Cmn()
			run Error_NotGotDream()

flow Send_DiscloseSetting():
	run UploadMetaLeaveTap()

flow ShortCutFirstLeaveTapUpload():
	SubflowResults[1] = 1
	run Network_Signin_SkipSave()
	if SubflowResults@2[0] == 0:
		# Close your eyes… Picture what you love most about ISLAND… <100:10>Relax. Reeelaaax…</100:10>
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:3103', false)
		Player.PlayerStartAnimeBedWait()
		EventFlowSystemActor.DreamUploadEffect('cOn')
		run ConnectionMsg_Start()
		EventFlowSystemActor.NetUploadDream()
		if EventFlowSystemActor.CheckErrorType(2):
			run FirstLeaveTapUploadError()
		else:
			run ConnectionMsg_Save()
			run ConnectionMsg_End()
			EventFlowSystemActor.DreamUploadEffect('cOff')
			# There! Your dream is now updated. I look forward to surprising many others with it.
			MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1068', false)
			Player.PlayerStartAnimeBedWaitWithHandsClaspedOpenEyes()
			EventFlowSystemActor.SetTagFromSystem('cCurrentDreamingAddress', 'cDegit', 0, 0, '')
			# Please note that the Dream Address for ISLAND is filed under <140:17:cd00>. If you do not want your dream to be shared if I am asked for a surprise, …
			MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:1069', false)
	else:
		run FirstLeaveTapUploadError()

flow Stay_PublishNo():
	# Understood. Your Dream Address settings shall remain untouched.
	MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:3403', false)
	run Return_About_MyDream()

local flow Sub_grp_Event10():
	if System.EventFlags['cPlayer:TapDreamFirstTalk']:
		if System.EventFlags['cPlayer:TapDreamTalkToday']:
			# Welcome back. The dreams are well rested, tucked into their idling hard drives.
			MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:001_06', false)
		else:
			System.EventFlags['cPlayer:TapDreamTalkToday'] = true
			# Welcome, welcome. The binary fields are teeming with beautiful dreams!
			MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:001_05', false)
		if (System.EventFlags['cLand:EnableMyDream']) and (EventFlowSystemActor.NetIsDreamUploader()):
			SubflowResults[3] = 0
		else:
			SubflowResults[3] = 2
		run FirstLeaveTapSetting()
	else:
		System.EventFlags['cPlayer:TapDreamFirstTalk'] = true
		System.EventFlags['cPlayer:TapDreamTalkToday'] = true
		System.EventFlags['cPlayer:TapUpdatedDreamFirstTalk'] = true
		EventFlowSystemActor.WaitFrame(10)
		# If I am not mistaken, you are from ISLAND, yes? You must be the famous PLAYER.
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:001_01', false)
		switch EventFlowSystemActor.GeneralTalkChoice2():
			case 0, 1:
				# Mmmmmm… Few dream as pleasantly as those from ISLAND. Forgive me. I have yet to introduce myself. My name is Luna. Think of me as a guide to the libr…
				MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:001_02', true)
				switch EventFlowSystemActor.GeneralTalkChoice2():
					case 0, 1:
MainNpc.NpcChangeNameStatus(0)
						# A dream is but a manifestation of a memory that one holds dear…then chooses to upload to the internet. My role is to ferry travelers between dreams, …
						MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:001_03', false)
						# This need not be a one-way matter either. If you wish, I can collect your dream of ISLAND as well! Then I will spirit your dream through channels of …
						MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:001_04', false)
	if (System.EventFlags['cLand:EnableMyDream']) and (System.EventFlags['cPlayer:TapULFirstExplain']):
		if System.EventFlags['cPlayer:TapSelWhereAreHere']:
			# How may I be of assistance?
			MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:002_05', false)
		else:
			# How may I be of assistance?
			MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:002_01', false)
entrypoint Event42:
		switch EventFlowSystemActor.GeneralTalkChoice4():
			case 0:
				run Download_Dream()
			case 1:
				run About_MyDream()
			case 2:
				run Receive_Explanation()
			case 3:
				run Exit_ThisScene()
	else:
		if System.EventFlags['cPlayer:TapSelWhereAreHere']:
			# How may I be of assistance?
			MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:002_04', false)
		else:
			# How may I be of assistance?
			MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:002', false)
entrypoint Event3:
		switch EventFlowSystemActor.GeneralTalkChoice4():
			case 0:
				run Download_Dream()
			case 1:
				run Upload_Dream()
			case 2:
				run Receive_Explanation()
			case 3:
				run Exit_ThisScene()

flow UGCNotice():
	if EventFlowSystemActor.PlayerVillagerCount(2):
		# Important Info on Sharing Dreams When you share a dream of your island, other players—including ones you don't know—will be able to visit a version o…
		MainNpc.OpenMessageWindow('Dialog/DIALOG_Msg:0831', true)
	else:
		# Important Info on Sharing Dreams When you share a dream of your island, other players—including ones you don't know—will be able to visit a version o…
		MainNpc.OpenMessageWindow('Dialog/DIALOG_Msg:0830', true)

flow UL_NetErrorOccur():
	if EventFlowSystemActor.YMD(2061, 1, 1, 'cNowTime') == 0:
		# My apologies, but I was unable to connect to the internet just now. Shall I try again?
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:2031', false)
		if EventFlowSystemActor.GeneralTalkChoice2() == 0:
			run ReturnUpload()
		else:
			run ReturnSelect()
	else:
		# Unfortunately, I am unable to compile your dream of ISLAND. You will need to return on another day. I will be happy to try again then.
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:2036', false)
		run ReturnSelect()

flow Update_Dream():
	if System.EventFlags['cPlayer:TapDreamUploadToday']:
		# Unfortunately, I can only upload a dream once per day. I will be more than happy to help you tomorrow.
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:3132', false)
		run Return_About_MyDream()
	elif System.EventFlags['cPlayer:TapTalkAboutMydesignShowcase']:
		run Update_MyDream_Step2()
	elif System.EventFlags['cPlayer:MyDesignExchangeFirstAccess']:
		# Splendid! Incidentally, there is something you may wish to know… Visitors to your dream may bring back any design that is on display in your Custom D…
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:2034', false)
		System.EventFlags['cPlayer:TapTalkAboutMydesignShowcase'] = true
		# And with that said, I am now ready to collect and compile your memory of ISLAND. Shall I begin?
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:2035', false)
		if EventFlowSystemActor.GeneralTalkChoice2() == 0:
			run Return_Update_MyDream()
		else:
			run ReturnSelect()
	else:
		run Update_MyDream_Step2()

flow Update_MyDream_Step2():
	# As a precaution, I must first confirm your wish to update the dream of ISLAND. Are you certain?
	MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:3101', false)
	if EventFlowSystemActor.GeneralTalkChoice2() == 0:
entrypoint Event127:
		# Splendid! I shall now connect to the internet and the library of dreams.
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:3102', false)
		SubflowResults[1] = 1
		run Network_Signin_SkipSave()
		if SubflowResults@2[0] == 0:
			# Close your eyes… Picture what you love most about ISLAND… <100:10>Relax. Reeelaaax…</100:10>
			MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:3103', false)
			Player.PlayerStartAnimeBedWait()
			EventFlowSystemActor.DreamUploadEffect('cOn')
			run ConnectionMsg_Start()
			EventFlowSystemActor.NetUploadDream()
			if EventFlowSystemActor.CheckErrorType(2):
				run ConnectionMsg_End()
				EventFlowSystemActor.DreamUploadEffect('cOff')
				Player.PlayerStartAnimeBedWaitWithHandsClaspedOpenEyes()
				run Update_NetErrorOccur()
			else:
				System.EventFlags['cPlayer:TapDreamUploadToday'] = true
				System.EventFlags['cLand:EnableMyDream'] = true
				System.EventFlags['cPlayer:TapSendThankyouLetter'] = true
				run ConnectionMsg_Save()
				run ConnectionMsg_End()
				EventFlowSystemActor.DreamUploadEffect('cOff')
				# There! The dream update is now complete. Each byte feels renewed and refreshed. Well done!
				MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:3104', false)
				Player.PlayerStartAnimeBedWaitWithHandsClaspedOpenEyes()
				EventFlowSystemActor.SetTagFromSystem('cCurrentDreamingAddress', 'cDegit', 0, 0, '')
				# Your dream of ISLAND is still filed under the Dream Address <140:17:cd00>. May the dream of ISLAND host many happy visitors.
				MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:3105', false)
				run ReturnSelect()
		else:
			run Update_NetErrorOccur()
	else:
		run Return_About_MyDream()

flow Update_NetErrorOccur():
	if EventFlowSystemActor.YMD(2061, 1, 1, 'cNowTime') == 0:
		# My apologies, but I was unable to connect to the internet just now. Shall I try again?
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:3131', false)
		if EventFlowSystemActor.GeneralTalkChoice2() == 0:
			run Return_Update_MyDream()
		else:
			run Return_About_MyDream()
	else:
		# Unfortunately, I am unable to compile your dream of ISLAND. You will need to return on another day. I will be happy to try again then.
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:3133', false)
		run Return_About_MyDream()

flow UploadMetaLeaveTap():
	SubflowResults[1] = 1
	run Network_Signin()
	if SubflowResults@2[0] == 0:
		EventFlowSystemActor.NetUpdateDreamMeta()
		switch EventFlowSystemActor.CheckErrorType(2):
			default:
				return

flow UploadMyDream():
	EventFlowSystemActor.NetUploadDream()
	if EventFlowSystemActor.CheckErrorType(2):
		run ErrOccur_AdressGet()
	else:
		System.EventFlags['cPlayer:TapDiscloseDreamLandID'] = true
		System.EventFlags['cLand:EnableMyDream'] = true
		System.EventFlags['cPlayer:TapDreamUploadToday'] = true
		System.EventFlags['cPlayer:TapSendThankyouLetter'] = true
		run ConnectionMsg_Save()
		run ConnectionMsg_End()
		EventFlowSystemActor.DreamUploadEffect('cOff')
		# There! The dream upload is now complete. Each byte now reclines in its new home. Well done!
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:2006', false)
		Player.PlayerStartAnimeBedWaitWithHandsClaspedOpenEyes()
		EventFlowSystemActor.SetTagFromSystem('cCurrentDreamingAddress', 'cDegit', 0, 0, '')
		# Your dream of ISLAND is filed under the Dream Address <140:17:cd00>. To share your dream with others, simply give them the Dream Address. Again, it i…
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:2007', false)
		# Your Dream Address is currently set to appear on your Passport and on your island's map. If you do not want your island's Dream Address displayed on …
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:2008', false)
		# Lastly, do remember that your dream will not reflect any changes made to ISLAND after an upload. However, as your island develops, its dream can be r…
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:2009', false)
		SubflowResults[3] = 3
		System.EventFlags['cPlayer:TapUnlockLeaveTap'] = false
		run FirstLeaveTapSetting()
		# I believe that is everything! Thank you for your patience, and may your dream host many happy visitors.
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:2010', false)
		run ReturnSelect()

flow Upload_Dream():
	if System.EventFlags['cPlayer:TapDreamDeleteToday']:
		# The library of dreams must rest after the deletion of a dream. I can help you upload a new dream tomorrow.
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:2033', false)
		run ReturnSelect()
	elif System.EventFlags['cPlayer:TapDreamUploadToday']:
		# Unfortunately, I can only upload a dream once per day. I will be more than happy to help you tomorrow.
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:2032', false)
		run ReturnSelect()
	elif not System.EventFlags['cPlayer:TapULFirstExplain']:
		# Of course. But before we continue, there is some important information you will need to read first.
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:2001', true)
		run UGCNotice()
		System.EventFlags['cPlayer:TapULFirstExplain'] = true
		# All done! From here it is simple. First, I will form your memory of ISLAND into a dream. Then, I will connect to the internet to upload your dream to…
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:2002', false)
		if System.EventFlags['cPlayer:MyDesignExchangeFirstAccess']:
			# Oh! There is something else you may be interested to know… Visitors to your dream may bring back any design that is on display in your Custom Designs…
			MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:2002_01', false)
			System.EventFlags['cPlayer:TapTalkAboutMydesignShowcase'] = true
		if System.EventFlags['cLand:EnableMyDream']:
			# Enough explanations! The time has come to gather your beloved memory of ISLAND. Except… Ah! It would seem another resident has already uploaded a dre…
			MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:2003_01', false)
			if EventFlowSystemActor.GeneralTalkChoice2() == 0:
				run Return_Update_MyDream()
			else:
				run ReturnSelect()
		else:
			# Enough explanations! I shall now collect and compile your memory of ISLAND. Are you ready?
			MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:2003', false)
			if EventFlowSystemActor.GeneralTalkChoice2() == 0:
				run ReturnUpload()
			else:
				run ReturnSelect()
	elif System.EventFlags['cPlayer:TapTalkAboutMydesignShowcase']:
		run ReturnUpload()
	elif System.EventFlags['cPlayer:MyDesignExchangeFirstAccess']:
		# Splendid! Incidentally, there is something you may wish to know… Visitors to your dream may bring back any design that is on display in your Custom D…
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:2034', false)
		System.EventFlags['cPlayer:TapTalkAboutMydesignShowcase'] = true
		# And with that said, I am now ready to collect and compile your memory of ISLAND. Shall I begin?
		MainNpc.OpenMessageWindow('TalkSNpc/tap/SP_tap:2035', false)
		if EventFlowSystemActor.GeneralTalkChoice2() == 0:
			run ReturnUpload()
		else:
			run ReturnSelect()
	else:
		run ReturnUpload()
