flow Close_NetworkConnection():
    # You got it, friend. Prepare for radio silence. I'm turning off communications!
    MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:251_01', false)
    EventFlowSystemActor.UIVersionGuideDisappearEventFlowSystemActor.UIVersionGuideDisappear('cNormal')
    fork:
        branch:
            run EntryPoint_PreProcedure(ContinueAS=true)
            EventFlowSystemActor.WaitFrameEventFlowSystemActor.WaitFrame(40)
        branch:
            EventFlowSystemActor@Net.NetEndSessionVillageEventFlowSystemActor@Net.NetEndSessionVillage('cEndVillageSession', false)
    run EntryPoint_PostProcedure()
    run Event102()
 
flow DALNoveltyCountUp():
    if System.EventFlags['cPlayer:DodPresentCounterToday'] < 3:
        System.EventFlags['cPlayer:DodPresentCounterToday'] += 1
 
flow EntryPoint_Cancel():
    # Gotcha. Well, come on back anytime!
    MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:800', true)
    EventFlowSystemActor.UIVersionGuideDisappearEventFlowSystemActor.UIVersionGuideDisappear('cNormal')
 
flow EntryPoint_Cancel_Nega():
    # Understood. Well, come on back anytime!
    MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:801', true)
    EventFlowSystemActor.UIVersionGuideDisappearEventFlowSystemActor.UIVersionGuideDisappear('cNormal')
 
flow EntryPoint_ChangeToJoin():
    # Oh, so instead of having visitors, you wanna do some traveling?
    MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:220', false)
    if EventFlowSystemActor.GeneralTalkChoice2EventFlowSystemActor.GeneralTalkChoice2() == 0:
        # Roger!
        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:802', false)
        fork:
            branch:
                run EntryPoint_PreProcedure(ContinueAS=true)
                EventFlowSystemActor.WaitFrameEventFlowSystemActor.WaitFrame(40)
            branch:
                EventFlowSystemActor@Net.NetDestroySessionVillageEventFlowSystemActor@Net.NetDestroySessionVillage('cDestroyVillage', false)
        run EntryPoint_PostProcedure()
        if EventFlowSystemActor.EnvHourOverGrowUpEventFlowSystemActor.EnvHourOverGrowUp():
            EventFlowSystemActor.WaitFrameEventFlowSystemActor.WaitFrame(20)
            # Oooh, hang on—the island-wide broadcast is about to start. I'll have to close down for a minute. Don't worry—we'll get you where you're goin', but I …
            MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:1401', false)
        else:
            run SNPC_dod_01_Airport_NormalSeq::SelectIsland_NoRogerrun SNPC_dod_01_Airport_NormalSeq::SelectIsland_NoRoger()
    else:
        run EntryPoint_Cancel()
 
flow EntryPoint_CheckOpenGateFirst():
    if SubflowResults@2[0] == 0:
        if not System.EventFlags['cPlayer:OdekakeFirstOpenGate']:
            # Just so you know, the gate's open, so visitors might show up anytime. There might even be folks you don't know—it's a big ocean full of islands out t…
            MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:125', true)
        System.EventFlags['cPlayer:OdekakeFirstOpenGate'] = true
    else:
        # Just give your Dodo Code™, <110:26>, to anybody you want to invite. Makin' friends has never been so easy!
        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:126', false)
 
flow EntryPoint_CloseGateAndResetNetwork():
    # So you want to stop communication and close the gate? Well, we don't have any visitors, so no problem!
    MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:222', true)
    EventFlowSystemActor.UIVersionGuideDisappearEventFlowSystemActor.UIVersionGuideDisappear('cNormal')
    fork:
        branch:
            run EntryPoint_PreProcedure(ContinueAS=true)
            EventFlowSystemActor.WaitFrameEventFlowSystemActor.WaitFrame(40)
        branch:
            EventFlowSystemActor@Net.NetEndSessionVillageEventFlowSystemActor@Net.NetEndSessionVillage('cEndVillageSession', false)
    run EntryPoint_PostProcedure()
    EventFlowSystemActor.CloseVillageGateEventFlowSystemActor.CloseVillageGate()
entrypoint Event102:
    # Hope you'll be back to use our services again soon!
    MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:251_02', false)
    EventFlowSystemActor.WaitFrameEventFlowSystemActor.WaitFrame(20)
 
flow EntryPoint_Host():
    EventFlowSystemActor.CheckFreeCommunicationEventFlowSystemActor.CheckFreeCommunication(true)
    if EventFlowSystemActor.IsApprovedFreeCommunicationEventFlowSystemActor.IsApprovedFreeCommunication():
        EventFlowSystemActor.UIVersionGuideAppearEventFlowSystemActor.UIVersionGuideAppear('cNormal', 'cOn')
        # You wanna invite someone from a nearby island on local play or one from a far-off island via online play?
        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:110', false)
        switch EventFlowSystemActor.GeneralTalkChoice3EventFlowSystemActor.GeneralTalkChoice3():
            case 0:
                run SNPC_dod_10_Airport_LocalHost::EntryPoint_LocalHostrun SNPC_dod_10_Airport_LocalHost::EntryPoint_LocalHost()
            case 1:
                run SNPC_dod_20_Airport_InetHost::EntryPoint_InetHostrun SNPC_dod_20_Airport_InetHost::EntryPoint_InetHost()
            case 2:
                run EntryPoint_Cancel()
    else:
        # Lookin' to invite a friend to the island, huh? Well, you'll need someone to turn on "Communicating with Others" in Parental Controls.
        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:401', true)
 
flow EntryPoint_LockRetryLeave():
    run EntryPoint_PreProcedure(ContinueAS=true)
    EventFlowSystemActor.MessageLockNextEventFlowSystemActor.MessageLockNext(1)
    # Getting ready to return home...
    MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSys/SYS_Network:005', false)
    EventFlowSystemActor.NetDemoLockEventFlowSystemActor.NetDemoLock(1)
    EventFlowSystemActor.MessageUnlockNextEventFlowSystemActor.MessageUnlockNext()
    if EventFlowSystemActor.CheckErrorTypeEventFlowSystemActor.CheckErrorType(2):
        MainNpc.MessageSuspendMainNpc.MessageSuspend()
        run EntryPoint_PostProcedure()
        # Wuh-oh! Looks like we're getting interference… Hang on… Someone not put their NookPhone into airplane mode again?
        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:108_01', false)
        switch EventFlowSystemActor.GeneralTalkChoice3EventFlowSystemActor.GeneralTalkChoice3():
            case 0:
                run EntryPoint_LockRetryLeave()
            case 1:
                # See, we can't take off from an island if someone here is in the middle of talking or workin' on something. If you try a few times and it keeps not co…
                MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:118_01', false)
                # So did you want me to try again right now?
                MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:118_02', false)
                if EventFlowSystemActor.GeneralTalkChoice2EventFlowSystemActor.GeneralTalkChoice2() == 0:
                    run EntryPoint_LockRetryLeave()
                else:
                    # Roger! Just lemme know when you wanna take off.
                    MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:701', true)
            case 2:
                # Roger! Just lemme know when you wanna take off.
                MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:701', true)
    else:
        MainNpc.MessageSuspendMainNpc.MessageSuspend()
        EventFlowSystemActor.NetLeaveSessionVillageEventFlowSystemActor.NetLeaveSessionVillage('cLeaveSession', false)
 
flow EntryPoint_PostProcedure():
    MainNpc.CharacterEmoticonActionMainNpc.CharacterEmoticonAction('Serious', true, '', 0, false)
    MainNpc.TurnBodyMainNpc.TurnBody(10, 0.0)
    EventFlowSystemActor.WaitFrameEventFlowSystemActor.WaitFrame(2)
 
flow EntryPoint_PreProcedure(ContinueAS: bool):
    MainNpc.TurnNeckMainNpc.TurnNeck(11, false)
    MainNpc.TurnBodyMainNpc.TurnBody(12, -90.0)
    MainNpc.NpcWaitTurnMainNpc.NpcWaitTurn()
    MainNpc.NpcStartASMainNpc.NpcStartAS('DodProcedure', false, ContinueAS)
 
flow EntryPoint_RememberKeyword():
    # Sure thing! The code right now is "<110:25>"!
    MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:224', true)
    EventFlowSystemActor.UIVersionGuideDisappearEventFlowSystemActor.UIVersionGuideDisappear('cNormal')
 
flow EntryPoint_RememberPassword():
    # Sure thing! The code right now is "<110:26>"!
    MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:223', true)
    EventFlowSystemActor.UIVersionGuideDisappearEventFlowSystemActor.UIVersionGuideDisappear('cNormal')
 
flow EntryPoint_Visitor():
    EventFlowSystemActor.CheckFreeCommunicationEventFlowSystemActor.CheckFreeCommunication(true)
    if EventFlowSystemActor.IsApprovedFreeCommunicationEventFlowSystemActor.IsApprovedFreeCommunication():
        EventFlowSystemActor.UIVersionGuideAppearEventFlowSystemActor.UIVersionGuideAppear('cNormal', 'cOn')
        if System.EventFlags['cLand:RcoEnableBuyHousingKit']:
            System.EventFlags['cPlayer:EnableInviteMoveoutNPC'] = true
        # You wanna head to a nearby island on local play, or some far-off island using online play?
        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:101', false)
        switch EventFlowSystemActor.GeneralTalkChoice3EventFlowSystemActor.GeneralTalkChoice3():
            case 0:
                run SNPC_dod_11_Airport_LocalVisitor::EntryPoint_LocalVisitorrun SNPC_dod_11_Airport_LocalVisitor::EntryPoint_LocalVisitor()
            case 1:
                run SNPC_dod_21_Airport_InetVisitor::EntryPoint_InetVisitorrun SNPC_dod_21_Airport_InetVisitor::EntryPoint_InetVisitor()
            case 2:
                run EntryPoint_Cancel()
    else:
        # Fixin' to travel to another island, huh? Well, you'll need someone to turn on "Communicating with Others" in Parental Controls.
        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:400', true)
 
flow InDreamSeq():
    if System.EventFlags['cPlayerTemp:DodDreamTalk']:
        # Hello again! You've come a long way to visit ISLAND, so I hope you make the most of it.
        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:602', false)
    else:
        # Welcome, welcome! Oh, wow…you're here from another island, aren't ya? But…I didn't see your name on any passenger list…and I've got 'em all memorized…
        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:601', false)
        System.EventFlags['cPlayerTemp:DodDreamTalk'] = true
 
flow LandMakingRemove_Host():
    if System.EventFlags['cPlayer:DodHeardAboutIslandCreator']:
        # Oh, dang it! Looks like I forgot to check if you were using your Island Designer app.<10:7:003c0000> You can't use that app during flights or network…
        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:121_01', false)
    else:
        # Looks like you're busy doing Island Designer stuff.<10:7:005a0000> Sorry, but the regs say we can't let you use the Island Designer app during flight…
        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:120_01', false)
    System.EventFlags['cPlayer:EquipLicenseHelmet'] = false
    Player.PlayerOutfitFieldMakeToolKitPlayer.PlayerOutfitFieldMakeToolKit('cOff')
    if System.EventFlags['cPlayer:DodHeardAboutIslandCreator']:
        # Appreciate your patience, pal.<10:7:003c0000>
        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:121_02', true)
    else:
        # Hey, thanks for humoring us! The dodos at the other airports tease us when we make a mess.<10:7:003c0000>
        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:120_02', true)
        System.EventFlags['cPlayer:DodHeardAboutIslandCreator'] = true
 
flow LandMakingRemove_Soloplay():
    run LandMakingRemove_Host()
 
flow LandMakingRemove_Visitor():
    run LandMakingRemove_Host()
 
flow Root():
    if EventFlowSystemActor.NetIsDreamingEventFlowSystemActor.NetIsDreaming():
        run InDreamSeq()
    elif EventFlowSystemActor.IsMyVillageEventFlowSystemActor.IsMyVillage():
        MainNpc.TurnNeckMainNpc.TurnNeck(10, false)
        if EventFlowSystemActor.NetIsInviteFriendEventFlowSystemActor.NetIsInviteFriend():
            EventFlowSystemActor.UIVersionGuideAppearEventFlowSystemActor.UIVersionGuideAppear('cNormal', 'cOn')
            if EventFlowSystemActor.NetHasVisitorEventFlowSystemActor.NetHasVisitor():
                # Hey hey hey! Hope you're ready to greet some company from another island.
                MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:300', false)
                switch EventFlowSystemActor.NetSessionCreateSettingEventFlowSystemActor.NetSessionCreateSetting():
                    case 0:
                        run SNPC_dod_02_Airport_GateCheck::EntryPoint_GateCheckrun SNPC_dod_02_Airport_GateCheck::EntryPoint_GateCheck()
                    case 1:
                        if EventFlowSystemActor.IsVillageGateOpenedEventFlowSystemActor.IsVillageGateOpened():
                            # By the way, is there anything I can do to help you out?
                            MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:302', false)
                        else:
                            # By the way, is there anything I can do to help you out?
                            MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:301', false)
                        switch EventFlowSystemActor.GeneralTalkChoice3EventFlowSystemActor.GeneralTalkChoice3():
                            case 0:
                                run SNPC_dod_02_Airport_GateCheck::Dod_ChangeGaterun SNPC_dod_02_Airport_GateCheck::Dod_ChangeGate()
                            case 1:
                                run EntryPoint_RememberPassword()
                            case 2:
                                run EntryPoint_Cancel()
                    case 2:
                        if EventFlowSystemActor.IsVillageGateOpenedEventFlowSystemActor.IsVillageGateOpened():
                            # By the way, is there anything I can do to help you out?
                            MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:304', false)
                        else:
                            # By the way, is there anything I can do to help you out?
                            MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:303', false)
                        switch EventFlowSystemActor.GeneralTalkChoice3EventFlowSystemActor.GeneralTalkChoice3():
                            case 0:
                                run SNPC_dod_02_Airport_GateCheck::Dod_ChangeGaterun SNPC_dod_02_Airport_GateCheck::Dod_ChangeGate()
                            case 1:
                                run EntryPoint_RememberKeyword()
                            case 2:
                                run EntryPoint_Cancel()
            elif EventFlowSystemActor.IsVillageGateOpenedEventFlowSystemActor.IsVillageGateOpened():
                switch EventFlowSystemActor.NetSessionCreateSettingEventFlowSystemActor.NetSessionCreateSetting():
                    case 0:
                        # Hey there again! What can I do you for?
                        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:210', false)
                        switch EventFlowSystemActor.GeneralTalkChoice3EventFlowSystemActor.GeneralTalkChoice3():
                            case 0:
                                run EntryPoint_CloseGateAndResetNetwork()
                            case 1:
                                run EntryPoint_ChangeToJoin()
                            case 2:
                                run EntryPoint_Cancel()
                    case 1:
                        # Hey there again! What can I do you for?
                        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:211', false)
                        switch EventFlowSystemActor.GeneralTalkChoice4EventFlowSystemActor.GeneralTalkChoice4():
                            case 0:
                                run EntryPoint_CloseGateAndResetNetwork()
                            case 1:
                                run EntryPoint_RememberPassword()
                            case 2:
                                run EntryPoint_ChangeToJoin()
                            case 3:
                                run EntryPoint_Cancel()
                    case 2:
                        # Hey there again! What can I do you for?
                        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:212', false)
                        switch EventFlowSystemActor.GeneralTalkChoice4EventFlowSystemActor.GeneralTalkChoice4():
                            case 0:
                                run EntryPoint_CloseGateAndResetNetwork()
                            case 1:
                                run EntryPoint_RememberKeyword()
                            case 2:
                                run EntryPoint_ChangeToJoin()
                            case 3:
                                run EntryPoint_Cancel()
            else:
                switch EventFlowSystemActor.NetSessionCreateSettingEventFlowSystemActor.NetSessionCreateSetting():
                    case 0:
                        # Hey there again! What can I do you for?
                        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:200', false)
                        switch EventFlowSystemActor.GeneralTalkChoice4EventFlowSystemActor.GeneralTalkChoice4():
                            case 0:
                                run SNPC_dod_02_Airport_GateCheck::Dod_OpenGaterun SNPC_dod_02_Airport_GateCheck::Dod_OpenGate()
                            case 1:
                                run Close_NetworkConnection()
                            case 2:
                                run EntryPoint_ChangeToJoin()
                            case 3:
                                run EntryPoint_Cancel()
                    case 1:
                        # Hey there again! What can I do you for?
                        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:201', false)
                        switch EventFlowSystemActor.GeneralTalkChoice5EventFlowSystemActor.GeneralTalkChoice5():
                            case 0:
                                run SNPC_dod_02_Airport_GateCheck::Dod_OpenGaterun SNPC_dod_02_Airport_GateCheck::Dod_OpenGate()
                            case 1:
                                run Close_NetworkConnection()
                            case 2:
                                run EntryPoint_RememberPassword()
                            case 3:
                                run EntryPoint_ChangeToJoin()
                            case 4:
                                run EntryPoint_Cancel()
                    case 2:
                        # Hey there again! What can I do you for?
                        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:202', false)
                        switch EventFlowSystemActor.GeneralTalkChoice5EventFlowSystemActor.GeneralTalkChoice5():
                            case 0:
                                run SNPC_dod_02_Airport_GateCheck::Dod_OpenGaterun SNPC_dod_02_Airport_GateCheck::Dod_OpenGate()
                            case 1:
                                run Close_NetworkConnection()
                            case 2:
                                run EntryPoint_RememberKeyword()
                            case 3:
                                run EntryPoint_ChangeToJoin()
                            case 4:
                                run EntryPoint_Cancel()
        elif EventFlowSystemActor.EnvHourOverGrowUpEventFlowSystemActor.EnvHourOverGrowUp():
            # Oh, hey—the island-wide broadcast is about to start. I'll have to close down for a minute. Don't worry—we'll get you where you're goin', but I never …
            MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:1400', false)
        elif (EventFlowSystemActor.IsSharePlayEventFlowSystemActor.IsSharePlay(0)) and (System.EventFlags['cPlayer:OdekakeFirstTalk']):
            # Hey there, social butterfly! Glad to see you spending time with your fellow humans! Oh, but if you want to fly anywhere or invite anyone in, come tal…
            MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:350', false)
        else:
            run SNPC_dod_01_Airport_NormalSeq::Rootrun SNPC_dod_01_Airport_NormalSeq::Root()
    else:
        run Visitor_Root()
 
flow Root_Init():
    if (EventFlowSystemActor.IsMyVillageEventFlowSystemActor.IsMyVillage()) and (not EventFlowSystemActor.NetHasVisitorEventFlowSystemActor.NetHasVisitor()):
        MainNpc.NpcAITalkSubCastEntryMainNpc.NpcAITalkSubCastEntry('doc', 1)
 
flow Visitor_Root():
    MainNpc.TurnNeckMainNpc.TurnNeck(10, false)
    # Howdy! Always good to have visitors to ISLAND! Can I help you with something?
    MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:700', false)
    if EventFlowSystemActor.GeneralTalkChoice2EventFlowSystemActor.GeneralTalkChoice2() == 0:
        # Roger!
        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:802', true)
        run EntryPoint_LockRetryLeave()
    else:
        # Roger! Just lemme know when you wanna take off.
        MainNpc.OpenMessageWindowMainNpc.OpenMessageWindow('TalkSNpc/dod/SP_dod_AirPort:701', true)
 
