flow ChkSituation_v200():
    if EventFlowSystemActor.SystemCheckNowStage('cPhotoStudio'):
        run EnableSwitch()
        EventFlowSystemActor.ExitFlowchartEventFlowSystemActor.ExitFlowchart()
    elif (EventFlowSystemActor.SystemCheckNowStage('cAnyNpcHouse')) and (System.EventFlags['cLandTemp:NpcInteriorCoordinate']):
        run EnableSwitch()
        EventFlowSystemActor.ExitFlowchartEventFlowSystemActor.ExitFlowchart()
    elif (EventFlowSystemActor.SystemCheckNowStage('cCheckStageSymbol00')) and (EventFlowSystemActor.WherearenOrderStatus() == 2):
        run EnableSwitch()
        EventFlowSystemActor.ExitFlowchartEventFlowSystemActor.ExitFlowchart()
 
flow EnableSwitch():
    if EventFlowSystemActor.SystemRadioPlayMusic():
        EventFlowSystemActor.SystemSetTagRadioPlayMusic()
        # "<125:0:0000>" is currently playing.
        Player.OpenMessageWindow('TalkFtr/FTR_Radio:002', false)
    else:
        # The radio is on.
        Player.OpenMessageWindow('TalkFtr/FTR_Radio:004', false)
    if EventFlowSystemActor.GeneralTalkChoice2() == 0:
        Ftr.FtrChangeSwitch(false)
 
flow Root():
    if EventFlowSystemActor.IsMyVillage():
        if EventFlowSystemActor.SystemCheckNowStage('cField'):
            run EnableSwitch()
        else:
            if EventFlowSystemActor.SystemCheckNowStage('cTalkingPlayerHouse'):
                run EnableSwitch()
            else:
                run Sub_Event22()
    else:
        run Sub_Event22()
 
local flow Sub_Event22():
    run ChkSituation_v200()
    if not Ftr.IsOnStarterFtrSwitch():
        # Nothing is playing.
        Player.OpenMessageWindow('TalkFtr/FTR_Radio:005', false)
    elif EventFlowSystemActor.SystemRadioPlayMusic():
        EventFlowSystemActor.SystemSetTagRadioPlayMusic()
        # "<125:0:0000>" is currently playing.
        Player.OpenMessageWindow('TalkFtr/FTR_Radio:001', false)
    else:
        # The radio is on.
        Player.OpenMessageWindow('TalkFtr/FTR_Radio:003', false)
 
