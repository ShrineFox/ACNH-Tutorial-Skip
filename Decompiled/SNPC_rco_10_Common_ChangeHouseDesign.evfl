flow Root():
    run v200_AddChangeHouseFormNotice()
    if System.EventFlags['cPlayer:PcHousingLoanFinish']:
        # We can customize the outside of your home for free!
        MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_00_Common:004_02', false)
    else:
        EventFlowSystemActor.UIMoneyAppear()
        # We can customize the outside of your home for 5,000 Bells.
        MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_00_Common:004_01', false)
    # If you place your order now, it'll be ready by tomorrow morning. So… are you interested?
    MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_00_Common:004_03', false)
    if EventFlowSystemActor.GeneralTalkChoice2() != 0:
        # My, my… Changed your mind? Well, you know where to find me if you want to customize your home.
        MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_00_Common:007', false)
        EventFlowSystemActor.UIMoneyDisappear()
        if EventFlowSystemActor.OfficeLevel() == `ResServiceBuilding`:
            run SNPC_rco_00_Common::Rco_Office_CmnSelAgainrun SNPC_rco_00_Common::Rco_Office_CmnSelAgain()
    elif (not System.EventFlags['cPlayer:PcHousingLoanFinish']) and (not EventFlowSystemActor.HasBellCount(5000)):
        # Er… Nook Inc. policy is to collect our customization fees at the beginning of the transaction. It seems as though you don't have enough Bells on hand…
        MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_00_Common:005', false)
        EventFlowSystemActor.UIMoneyDisappear()
    else:
        # Excellent! Then I'll show you our design catalog and you can choose what you'd like for your home.
        MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_00_Common:006', false)
        EventFlowSystemActor.UIMoneyDisappear()
        EventFlowSystemActor.UICustomHomeHandling('cParts')
        if EventFlowSystemActor.UIResultMenuDecide():
            # Hmmm… Interesting design choice!
            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_00_Common:008_01', false)
            if not System.EventFlags['cPlayer:PcHousingLoanFinish']:
                EventFlowSystemActor.UIMoneyAppear()
                # That'll be 5,000 Bells, please!
                MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_00_Common:008_02', false)
                EventFlowSystemActor.BellCountDown(-5000, false)
                # Thank you kindly!
                MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_00_Common:009_01', false)
            # I'll make sure that construction is done by tomorrow morning. If you're like me, you're already excited!
            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_00_Common:009_02', false)
            System.EventFlags['cPlayer:RcoChangeHouseDesignReserved'] = true
            EventFlowSystemActor.UIMoneyDisappear()
        else:
            # My, my… Changed your mind? Well, you know where to find me if you want to customize your home.
            MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_00_Common:007', false)
            EventFlowSystemActor.UIMoneyDisappear()
            if EventFlowSystemActor.OfficeLevel() == `ResServiceBuilding`:
                run SNPC_rco_00_Common::Rco_Office_CmnSelAgainrun SNPC_rco_00_Common::Rco_Office_CmnSelAgain()
 
flow v200_AddChangeHouseFormNotice():
    if (EventFlowSystemActor.PlayerHouseLevel() in (`SecondFloor`, `Basement`)) and (not System.EventFlags['cPlayer:CompleteNoticeChangeHouseForm']):
        # Looking to customize the exterior of your home, hm? That reminds me, there's something I wanted to tell you. I'm now offering full house designs as a…
        MainNpc.OpenMessageWindow('TalkSNpc/rco/SP_rco_00_Common:1401', false)
        System.EventFlags['cPlayer:CompleteNoticeChangeHouseForm'] = true
 
