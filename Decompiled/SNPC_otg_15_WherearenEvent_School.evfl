flow IntroduceFacility():
    EventFlowSystemActor.BGMPropertyControl(148)
    EventFlowSystemActor.SoundDuckingOn(58)
    EventFlowSystemActor.FadeIn(false)
    EventFlowSystemActor.CameraSetDemoParam('FacilitySchoolEditStartDemo', 'FacilityEditStartDemo_0', 'Player', false, false, false, 0)
    fork:
        branch:
            Player.PlayerMoveToTarget(false, 322.0, 445.0, 0.0, 0.0, false, '')
            Player.TurnBody(12, 180.0)
        branch:
            MainNpc.NpcMoveDirection(180.0, 25.0, 1, false, false)
            MainNpc.TurnBody(12, 180.0)
    EventFlowSystemActor.WaitFrame(30)
    # And here we are!<10:4> Not…that we had far to go.
    MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_05_WherearenEvent_School:021', false)
    MainNpc.TurnNeck(10, false)
    EventFlowSystemActor.WaitFrame(12)
    Player.TurnBody(11, 0.0)
    Player.TurnNeck(0, false)
    # Now, I think we should start by freshening up the exterior. It could really use some personality! I'd like you to do your best for now. If you don't …
    MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_05_WherearenEvent_School:022', true)
    run Demo_Common_Wherearen::EditFacilityExteriorrun Demo_Common_Wherearen::EditFacilityExterior()
    System.EventFlags['cPlayerTemp:WHEREAREN_OtgTalkReserve_Facility'] = true
    EventFlowSystemActor.ReserveSkipSceneStartDemo()
    System.EventFlags['cLandTemp:ReserveFaderKeep'] = true
    run `00_System_StageChange`::ChangeStagerun `00_System_StageChange`::ChangeStage(FadeColorString='cBlack', TargetStage='cWherearenFacilityOrder', FadeOutSpeed=0.0, FadeInSpeed='cNormal', FadeOutKindString='cCircle', FadeInKindString='cCircle')
 
flow PostEdit():
    System.EventFlags['cWherearenPlayer:MncGenerateInOfficeTemp'] = true
    System.EventFlags['cWherearenPlayer:SeqSchoolEditOngoing'] = false
 
flow PreEdit():
    EventFlowSystemActor.BGMPropertyControl(147)
    MainNpc.TurnBody(10, 0.0)
    EventFlowSystemActor.WaitFrame(5)
    Player.TurnBody(0, 0.0)
    if System.EventFlags['cWherearenPlayer:FacilityPreEditTalkDone']:
        # Alright, let's keep working on this school! The info on what you need can be found by pressing  and looking in Order. Be sure to check that out! If…
        MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_05_WherearenEvent_School:051', true)
    else:
        # It needs a lot of work in here too. I'm so glad you're helping out with this! So, first things first… A school needs chairs and desks, right? When yo…
        MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_05_WherearenEvent_School:041', true)
        MainNpc.TurnNeck(11, false)
        MainNpc.TurnBody(12, 180.0)
        # Although…a room of this size will start feeling pretty cramped if we bring in too much furniture…
        MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_05_WherearenEvent_School:042', true)
        MainNpc.CharacterEmoticonAction('IdeaBulb', true, '', 0, false)
        EventFlowSystemActor.WaitFrame(30)
        MainNpc.TurnBody(10, 0.0)
        # I know just the thing! A technique to adjust the size of the room. It's an old trick of the trade… So, if a room feels too large or too small for you…
        MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_05_WherearenEvent_School:043', true)
        System.EventFlags['cPlayer:WHEREAREN_Unlock_RoomSizeModeUnlock'] = true
        System.EventFlags['cWherearenPlayer:FacilityPreEditTalkDone'] = true
 
flow ReturnOffice():
    # Whew! You know, I think we did a great job!
    MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_05_WherearenEvent_School:061', true)
    fork:
        branch:
            # I went to take a peek inside. What a good-looking school! It's so nice, I bet I'd do well even in my worst subjects!
            SubNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_05_WherearenEvent_School:062', false)
        branch:
            EventFlowSystemActor.WaitFrame(15)
            Player.TurnNeck(1, false)
    SubNpc.TurnNeck(2, false)
    # Wardell was impressed with how polished everything looks too!
    SubNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_05_WherearenEvent_School:062_01', true)
    Player.TurnNeck(2, false)
    MainNpc.TurnNeck(2, false)
    EventFlowSystemActor.WaitFrame(20)
    Npc_2.CharacterEmoticonAction('Nodding', true, '', 0, false)
    EventFlowSystemActor.WaitFrame(30)
    MainNpc.TurnNeck(10, false)
    fork:
        branch:
            # I agree! Our school is top-notch, thanks to PLAYER's work. Who said you can't learn anything in paradise?
            MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_05_WherearenEvent_School:063', false)
        branch:
            EventFlowSystemActor.WaitFrame(20)
            Player.TurnNeck(0, false)
    SubNpc.TurnNeck(10, false)
    fork:
        branch:
            # I heard that Lottie taught you her little trick about resizing rooms. So that means… WHOA!
            SubNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_05_WherearenEvent_School:064', true)
        branch:
            EventFlowSystemActor.WaitFrame(15)
            Player.TurnNeck(1, false)
    MainNpc.TurnNeck(1, false)
    EventFlowSystemActor.WaitFrame(8)
    Npc_2.TurnNeck(1, false)
    # What is it, Niko?
    MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_05_WherearenEvent_School:065', true)
    SubNpc.TurnNeck(0, false)
    # I've just come up with a brilliant idea! Heh heh. But I'm going to keep it to myself for now…
    SubNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_05_WherearenEvent_School:066', true)
    # What?! That's not fair! Promise you'll tell us soon, alright?
    MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_05_WherearenEvent_School:067', false)
    MainNpc.TurnNeck(10, false)
    run SNPC_otg_01_WherearenOffice::SetSalaryForEventrun SNPC_otg_01_WherearenOffice::SetSalaryForEvent()
    fork:
        branch:
            # Anyway, moving on, that was a VERY large job, and you'll be paid appropriately, PLAYER! Here's <90:44:0000> for all of your hard work!
            MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_05_WherearenEvent_School:068', true)
        branch:
            EventFlowSystemActor.WaitFrame(15)
            Player.TurnNeck(0, false)
            EventFlowSystemActor.WaitFrame(20)
            Npc_2.TurnNeck(10, false)
    run SNPC_otg_01_WherearenOffice::GetSalaryForEventrun SNPC_otg_01_WherearenOffice::GetSalaryForEvent()
    # I have grand plans…so I'm sure I'll need your help with another facility in the future. If we keep growing the client base, I just know we'll get the…
    MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_05_WherearenEvent_School:069', true)
    System.EventFlags['cWherearenPlayer:FacilityPreEditTalkDone'] = false
    System.EventFlags['cWherearenPlayer:MncGenerateInOfficeTemp'] = false
    System.EventFlags['cWherearenPlayer:Unlock_Faclility_School'] = true
    System.EventFlags['cWherearenPlayer:Unlock_Item_Event_After_Facility_School'] = true
    System.EventFlags['cPlayer:OtgTipsCompleteSchoolBuild'] = true
    run Demo_Common_Wherearen::Demo_SetNormalPositionInOfficerun Demo_Common_Wherearen::Demo_SetNormalPositionInOffice()
    SubflowResults[3] = 2
    run SNPC_otg_01_WherearenOffice::OrderClose_Completerun SNPC_otg_01_WherearenOffice::OrderClose_Complete()
 
flow ReturnOffice_Init():
    MainNpc.NpcAITalkCastSetting('WherearenPrologue')
 
flow Root():
    # I've got something a little different for you this time… Remember when we looked at that empty facility together? Well…we got the necessary permits t…
    MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_05_WherearenEvent_School:001', false)
    if EventFlowSystemActor.GeneralTalkChoice2() == 0:
        # It is! I was very impressed with the permitting process. It was much quicker than I expected!
        MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_05_WherearenEvent_School:002', false)
    else:
        # Oh, I suppose you probably haven't been thinking about it constantly like I have. We talked about turning that vacant property next to the office int…
        MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_05_WherearenEvent_School:003', false)
    # This is an important moment in the history of Paradise Planning. Our very first facility! That's why I need your help putting it together. Let's head…
    MainNpc.OpenMessageWindow('TalkSNpc/otg/SP_otg_05_WherearenEvent_School:004', true)
    System.EventFlags['cWherearenPlayer:SeqSchoolEditOngoing'] = true
    System.EventFlags['cWherearenPlayer:IsFacilityEditStartDemo'] = 1
    System.EventFlags['cPlayerTemp:WHEREAREN_OtgTalkReserve_Facility'] = true
    System.EventFlags['cLandTemp:ReserveFaderKeep'] = true
    EventFlowSystemActor.ReserveSkipSceneStartDemo()
    run StartReaction()
 
flow StartReaction():
    EventFlowSystemActor.SystemBGMVolumeFadeOut(0.800000011920929, 0, 0.0)
    fork:
        branch:
            Player.CharacterEmoticonAction('Assent', true, '', 0, false)
        branch:
            MainNpc.CharacterEmoticonAction('Smiling', true, '', 0, false)
    EventFlowSystemActor.WaitFrame(30)
    EventFlowSystemActor.WherearenTakeOnFacilityOrder('cSchool', 'cNew')
    EventFlowSystemActor.WherearenOrderCallback('cStart')
    EventFlowSystemActor.WherearenOrderCallback('cConfirm')
    EventFlowSystemActor.SoundTriggerEmit('Demo_Oshigoto_Wipe', -1)
    EventFlowSystemActor.WaitFrame(6)
    EventFlowSystemActor.NextLPFadeTime(0.7300000190734863)
    EventFlowSystemActor.SoundSceneChangeFadeOutDucking(10)
    EventFlowSystemActor.CameraReserveFirstStateCommand('Demo:SchoolEditStartDemo_0', 'Player', false)
    EventFlowSystemActor.SystemRequestChangeStage('cWherearenFacilitySuspended', 'cOrderWherearen', 'cOrderWherearen', 'cBlack', 1.0, 1.0)
 
