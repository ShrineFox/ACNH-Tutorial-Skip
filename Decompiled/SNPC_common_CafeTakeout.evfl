flow CafeTakeoutGreeting():
    MainNpc.SetDefaultWaitAs('cPgeBaseWait')
    MainNpc.TurnNeck(11, true)
    MainNpc.TurnBody(12, 270.0)
    MainNpc.NpcWaitTurn()
    fork:
        branch:
            DynamicCast_CafeTakeout.CharacterEmoticonAction('Greeting', true, '', 0, false)
        branch:
            EventFlowSystemActor.WaitFrame(30)
            MainNpc.TurnNeck(1, false)
            MainNpc.TurnBody(12, 0.0)
            MainNpc.NpcWaitTurn()
    EventFlowSystemActor.WaitFrame(30)
 
flow CafeTakeoutGreeting2():
    DynamicCast_CafeTakeout.TurnBody(0, 0.0)
    DynamicCast_CafeTakeout.NpcWaitTurn()
    EventFlowSystemActor.WaitFrame(15)
    DynamicCast_CafeTakeout.CharacterEmoticonAction('Greeting', true, '', 0, false)
    EventFlowSystemActor.WaitFrame(45)
 
flow Root():
    MainNpc.NpcAISetting(4, false)
    DynamicCast_CafeTakeout.NpcSetVisibleAction(true)
    MainNpc.SetDefaultWaitAs('cPgeWaitDishcloth')
    MainNpc.TurnBody(12, 270.0)
    DynamicCast_CafeTakeout.TurnNeck(11, false)
    EventFlowSystemActor.SoundEmitMuseumCafeDoorBell()
    fork:
        branch:
            DynamicCast_CafeTakeout.NpcRailMove(1, false, false, 0, 2, 0)
        branch:
            EventFlowSystemActor.WaitFrame(45)
            EventFlowSystemActor.CameraSetDemoParam('CafeNpcTakeoutFar', 'cTalk', 'CameraTag:CafeCenter', false, false, false, 0)
    DynamicCast_CafeTakeout.TurnBody(0, 0.0)
    DynamicCast_CafeTakeout.NpcWaitTurn()
    run CafeTakeoutGreeting()
    EventFlowSystemActor.CameraSetDemoParam('CafeNpcTakeout', 'cTalk', 'CameraTag:CafeCenter', false, false, false, 0)
    System.EventFlags['cPlayerTemp:CafeNpcTakeoutPrepare'] = true
    fork:
        branch:
            Player.TurnNeck(1, false)
            run SNPC_pge::Pge_Anime_Make_TakeoutNpcrun SNPC_pge::Pge_Anime_Make_TakeoutNpc()
            MainNpc.SetDeliveryItemAtRandom(14541, false, 'cVillageRemakePattern', 0)
        branch:
            DynamicCast_CafeTakeout.TurnNeck(10, false)
            switch EventFlowSystemActor.EnvTimeZone():
                case `05:00-07:59`:
                    # Good morning, early bird! Glad to see you up and about!
                    DynamicCast_CafeTakeout.OpenMessageWindow('TalkSNpc/ForCafe/Normal_Takeout/SP_CafeTakeout_sza:001', false)
                case `08:00-11:59`:
                    # Good morning, PLAYER!
                    DynamicCast_CafeTakeout.OpenMessageWindow('TalkSNpc/ForCafe/Normal_Takeout/SP_CafeTakeout_sza:002', false)
                case `12:00-15:59`:
                    # Hello, PLAYER!
                    DynamicCast_CafeTakeout.OpenMessageWindow('TalkSNpc/ForCafe/Normal_Takeout/SP_CafeTakeout_sza:003', false)
                case `16:00-18:59`:
                    # Hi, PLAYER!
                    DynamicCast_CafeTakeout.OpenMessageWindow('TalkSNpc/ForCafe/Normal_Takeout/SP_CafeTakeout_sza:004', false)
                case `19:00-23:59`:
                    # Good evening, PLAYER!
                    DynamicCast_CafeTakeout.OpenMessageWindow('TalkSNpc/ForCafe/Normal_Takeout/SP_CafeTakeout_sza:005', false)
                case `00:00-04:59`:
                    # You're still up, PLAYER?
                    DynamicCast_CafeTakeout.OpenMessageWindow('TalkSNpc/ForCafe/Normal_Takeout/SP_CafeTakeout_sza:006', false)
            # RANDOM: Doesn't Brewster make the very best cof… // You know, we're always seeing you at Re… // Mr. Nook and I have been taking turns t… // Work is slow right now, so Mr. Nook sug… // Are you taking a quick break? Me too.
            DynamicCast_CafeTakeout.OpenMessageWindow('TalkSNpc/ForCafe/Normal_Takeout/SP_CafeTakeout_sza:101', true)
            DynamicCast_CafeTakeout.TurnNeck(0, false)
            Player.TurnNeck(0, false)
            System.EventFlags['cPlayerTemp:CafeNpcTakeoutPrepare'] = false
    MainNpc.TurnBody(12, 0.0)
    MainNpc.NpcWaitTurn()
    MainNpc.PgeCafeReaction('cPutOnTable', true)
    MainNpc.SetDefaultWaitAs('cDefault')
    DynamicCast_CafeTakeout.PgeCafeReaction('cReceiveTakeout', true)
    DynamicCast_CafeTakeout.TurnNeck(10, false)
    Player.TurnNeck(1, false)
    # RANDOM: Enjoy your coffee! // Time to head back! // I'll see you later!
    DynamicCast_CafeTakeout.OpenMessageWindow('TalkSNpc/ForCafe/Normal_Takeout/SP_CafeTakeout_sza:201', true)
    run CafeTakeoutGreeting2()
    EventFlowSystemActor.CameraSetDemoParam('CafeNpcTakeoutFar', 'cTalk', 'CameraTag:CafeCenter', false, false, false, 0)
    DynamicCast_CafeTakeout.TurnNeck(11, false)
    DynamicCast_CafeTakeout.NpcRailMove(1, false, true, 2, 0, 0)
    EventFlowSystemActor.SoundEmitMuseumCafeDoorBell()
    DynamicCast_CafeTakeout.PgeCafeReaction('cDisappear', true)
    DynamicCast_CafeTakeout.NpcSetVisibleAction(false)
    MainNpc.TurnBody(10, 0.0)
    Player.TurnNeck(0, false)
    MainNpc.NpcWaitTurn()
    MainNpc.NpcAISetting(4, true)
    System.EventFlags['cPlayer:SawMuseumCafeTakeoutNpc'] = true
    EventFlowSystemActor.CameraSetDemoParam('cTalkRoom', 'cTalk', 'Player', false, false, false, 0)
 
